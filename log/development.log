Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.3ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
  [1m[35m (0.3ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Migrating to CreateForumThreads (20120311163914)
Migrating to CreatePosts (20120311164326)
Migrating to CreateUsers (20120311170118)
Migrating to CreateForums (20120311201341)
Migrating to CreateSites (20120311210245)
Migrating to AddReplyToToPosts (20120416201606)
Migrating to AddViewsToForumThreads (20120420183447)
Migrating to AddPostsCountToForumThreads (20120423140906)
Migrating to FixPostIndices (20120423142820)
Migrating to RemoveLastPostId (20120423151548)
Migrating to AddDisplayUsernameToUsers (20120425145456)
Migrating to AddUserIdIndexToPosts (20120427150624)
Migrating to CookedMigration (20120427151452)
Migrating to CreateVestalVersions (20120427154330)
Migrating to AddVersionToPosts (20120427172031)
Migrating to AddCreatedByToForumThreads (20120502183240)
Migrating to AddLastPostUserIdToForumThreads (20120502192121)
Migrating to AddSiteIdToUsers (20120503205521)
Migrating to CreateExpressions (20120507144132)
Migrating to CreateExpressionTypes (20120507144222)
Migrating to AddReplyCountToPosts (20120514144549)
Migrating to AddFlagToExpressionTypes (20120514173920)
Migrating to AddDescriptionToExpressionTypes (20120514204934)
Migrating to AddQuotelessToPost (20120517200130)
Migrating to CreateReadPosts (20120518200115)
Migrating to CreateLastReadPosts (20120519182212)
Migrating to CreateViews (20120523180723)
Migrating to AddRepliesToForumThreads (20120523184307)
Migrating to AddFeaturedToForumThreads (20120523201329)
Migrating to AddAvgTimeToForumThreads (20120525194845)
Migrating to CreateUploads (20120529175956)
Migrating to CreateStars (20120529202707)
Migrating to CreateForumThreadUser (20120530150726)
Migrating to MigratePosted (20120530160745)
Migrating to AddIndexToForumThreads (20120530200724)
Migrating to CreateForumThreadLinks (20120530212912)
Migrating to AddTagsToForumThreads (20120614190726)
Migrating to AddQuoteCountToPosts (20120614202024)
Migrating to CreateBookmarks (20120615180517)
Migrating to AddReplyBelowToPosts (20120618152946)
Migrating to CreatePostTimings (20120618212349)
Migrating to CreateMessageBus (20120618214856)
Migrating to FixPostTimings (20120619150807)
Migrating to DropReadPosts (20120619153349)
Migrating to AddPostNumberToBookmarks (20120619172714)
Migrating to AddSeenPostCountToForumThreadUsers (20120621155351)
Migrating to AddDeletedAtToForumThreads (20120621190310)
Migrating to CreateNotifications (20120622200242)
Migrating to AddSeenNotificationIdToUsers (20120625145714)
Migrating to AddDeletedAtToPosts (20120625162318)
Migrating to AddHighestPostNumberToForumThreads (20120625174544)
Migrating to AddImageUrlToForumThreads (20120625195326)
Migrating to RenameExpressionTypeId (20120629143908)
Migrating to DenormalizeExpressions (20120629150253)
Migrating to MakeExpressionsLessGeneric (20120629151243)
Migrating to CreateIncomingLinks (20120629182637)
Migrating to CreateReplies (20120702211427)
Migrating to AddReflectionToForumThreadLinks (20120703184734)
Migrating to AddIncomingLinkCountToPosts (20120703201312)
Migrating to AddIncomingLinkCountToForumThreads (20120703203623)
Migrating to AddBookmarkCountToPosts (20120703210004)
Migrating to AddAvgTimeToPosts (20120704160659)
Migrating to AddViewCountToPosts (20120704201743)
Migrating to AddUserToVersions (20120705181724)
Migrating to AddLastPostedAtToUsers (20120708210305)
Migrating to CreateCategories (20120712150500)
Migrating to AddCategoryIdToForumThreads (20120712151934)
Migrating to CreateCategoryFeaturedThreads (20120713201324)
Migrating to CreateSiteSettings (20120716020835)
Migrating to AddStatsToCategories (20120716173544)
Migrating to CreateUserOpenIds (20120718044955)
Migrating to AddEmailHashedPasswordNameSaltToUsers (20120719004636)
Migrating to AddUsernameLowerToUsers (20120720013733)
Migrating to AddAuthTokenToUsers (20120720044246)
Migrating to AddForumIdToCategories (20120720162422)
Migrating to AddNotNullsToUserOpenIds (20120723051512)
Migrating to AddLastSeenAtToUsers (20120724234502)
Migrating to AddWebsiteToUsers (20120724234711)
Migrating to AddExcerptToCategories (20120725183347)
Migrating to AddInvisibleToForumThread (20120726201830)
Migrating to AddUserIdToCategories (20120726235129)
Migrating to RemoveExcerptFromCategories (20120727005556)
Migrating to RenameInvisible (20120727150428)
Migrating to AddThreadCountsToCategories (20120727213543)
Migrating to AddIconToExpressionTypes (20120802151210)
Migrating to AddAdminFlagToUsers (20120803191426)
Migrating to AddNewPasswordNewSaltEmailTokenToUsers (20120806030641)
Migrating to RemoveNewPasswordStuffFromUser (20120806062617)
Migrating to CreateActions (20120807223020)
Migrating to RemoveSiteId (20120809020415)
Migrating to RemoveForumId (20120809030647)
Migrating to CorrectIndexingOnPosts (20120809053414)
Migrating to RemoveIndexForNow (20120809154750)
Migrating to CreatePostActions (20120809174649)
Migrating to CreatePostActionTypes (20120809175110)
Migrating to MigrateBookmarksToPostActions (20120809201855)
Migrating to RenameActionsToUserActions (20120810064839)
Migrating to RetireExpressions (20120812235417)
Migrating to RenameExpressionColumnsInForumThread (20120813004347)
Migrating to RenameExpressionColumnsInPosts (20120813042912)
Migrating to CreateForumThreadLinkClicks (20120813201426)
Migrating to AddUniqueIndexToForumThreadLinks (20120815004411)
Migrating to AddPostTypeToPosts (20120815180106)
Migrating to AddModeratorPostsCountToForumThreads (20120815204733)
Migrating to AddUniqueConstraintToUserActions (20120816050526)
Migrating to AddForumThreadStates (20120816205537)
Migrating to AddStarredAtToForumThreadUser (20120816205538)
Migrating to AddSearchIndices (20120820191804)
Migrating to AddBumpedAtToForumThreads (20120821191616)
Migrating to AddSlugToCategories (20120823205956)
Migrating to CreateCategoryFeaturedUsers (20120824171908)
Migrating to CreateOneboxRenders (20120828204209)
Migrating to CreatePostOneboxRenders (20120828204624)
Migrating to AddPreviewToOneboxRenders (20120830182736)
Migrating to RemoveDescriptionFromSiteSettings (20120910171504)
Migrating to RenameViewsToReads (20120918152319)
Migrating to AddSubTagToForumThreads (20120918205931)
Migrating to AddHasBestOfToForumThreads (20120919152846)
Migrating to AddTwitterUserInfo (20120921055428)
Migrating to CreateArchetypes (20120921155050)
Migrating to AddMetaDataToForumThreads (20120921162512)
Migrating to CreateArchetypeOptions (20120921163606)
Migrating to AddHstoreExtension (20120924182000)
Migrating to AddVoteCountToPosts (20120924182031)
Migrating to RemoveEnglishFromPostActionTypes (20120925171620)
Migrating to AddSequenceToPostActionTypes (20120925190802)
Migrating to AddSortOrderToPosts (20120928170023)
Migrating to AddEmailStuffToUsers (20121009161116)
Migrating to CreateEmailLogs (20121011155904)
Migrating to ConvertArchetypes (20121017162924)
Migrating to RenameForumThreadTables (20121018103721)
Migrating to CreateTopicAllowedUsers (20121018133039)
Migrating to FixNotificationData (20121018182709)
Migrating to DropAvatarUrlFromUsers (20121106015500)
Migrating to AddPostActionIdToNotifications (20121108193516)
Migrating to CreateTrustLevels (20121109164630)
Migrating to BioMarkdownSupport (20121113200844)
Migrating to CreateFacebookUserInfos (20121113200845)
Migrating to RenameStickyToPinned (20121115172544)
Migrating to AddMoreEmailSettingsToUser (20121116212424)
Migrating to AddEmailSettingsToUsers (20121119190529)
Migrating to AddEmailDirectToUsers (20121119200843)
Migrating to CreateInvites (20121121202035)
Migrating to CreateTopicInvites (20121121205215)
Migrating to AddMutedAtToTopicUser (20121122033316)
Migrating to MakePostNumberDistinct (20121123054127)
Migrating to CreateUserVisits (20121123063630)
Migrating to CreateEmailTokens (20121129160035)
Migrating to RemoveEmailTokenFromUsers (20121129184948)
Migrating to CreateDrafts (20121130010400)
Migrating to AddLinkPostIdToTopicLinks (20121130191818)
Migrating to AddVisitedAtToTopicUser (20121202225421)
Migrating to RenameSeenNotificaitonId (20121203181719)
Migrating to FixLinkPostId (20121204183855)
Migrating to AddAnotherFeaturedUserToTopics (20121204193747)
Migrating to AddApprovedToUsers (20121205162143)
Migrating to AddNotificationsToTopicUsers (20121207000741)
Migrating to CreateSiteCustomizations (20121211233131)
Migrating to AddOverrideDefaultStyleToSiteCustomization (20121216230719)
Migrating to AddTopicsEnteredToUsers (20121218205642)
Migrating to AddLastEditorIdToPosts (20121224072204)
Migrating to CreateDraftSequence (20121224095139)
Migrating to AddSequenceToDrafts (20121224100650)
Migrating to AddDeletedAtToInvites (20121228192219)
Migrating to AddDigestAfterDaysToUsers (20130107165207)
Migrating to AddPreviousVisitAtToUsers (20130108195847)
Migrating to MergeMuteOptionsOnTopicUsers (20130115012140)
Migrating to CorrectDefaultOnNotificationLevel (20130115021937)
Migrating to OopsUnwatchABoatOfWatchedStuff (20130115043603)
Migrating to RemoveSubTagFromTopics (20130116151829)
Migrating to FixSearch (20130120222728)
Migrating to AddTrackingToTopicUsers (20130121231352)
Migrating to AddAutoTrackTopicsToUser (20130122051134)
Migrating to AddAutoTrackAfterSecondsAndBanningAndDobToUser (20130122232825)
Migrating to AutoTrackAllTopicsRepliedTo (20130123070909)
Migrating to AddHiddenToPosts (20130125002652)
Migrating to AddFieldsToPostAction (20130125030305)
Migrating to CorrectIndexOnPostAction (20130125031122)
Migrating to RemoveTrustLevels (20130127213646)
Migrating to TrustLevelDefaultNull (20130128182013)
Migrating to RemovePmReflections (20130129010625)
Migrating to AddTimeReadToUsers (20130129163244)
Migrating to AddDaysVisitedToUsers (20130129174845)
Migrating to RemoveIndexFromViews (20130130154611)
Migrating to AddCustomFlagCountToTopics (20130131055710)
Migrating to AddColumnSummariesToPostsAndTopics (20130201000828)
Migrating to AddPositionToPostActionType (20130201023409)
Migrating to AddLastVersionAtToPosts (20130203204338)
Migrating to AddIpAddressToUsers (20130204000159)
Migrating to AlterFacebookUserId (20130205021905)
Migrating to AddUserDeletedToPosts (20130207200019)
Migrating to RemoveReplyBelowPostNumberFromPosts (20130208220635)
Migrating to RemoveTopicResponseActions (20130213021450)
Migrating to AddNewTopicDurationMinutesToUsers (20130213203300)
Migrating to AddDescriptionToCategories (20130221215017)
Migrating to AddGithubUserInfo (20130226015336)
Migrating to AddClearedPinnedToTopicUsers (20130306180148)
Migrating to RemoveExtraSpamRecord (20130311181327)
Migrating to AddExternalLinksInNewTabAnDisableQuotingToUser (20130313004922)
Migrating to AddForegroundColorToCategories (20130314093434)
Migrating to EnableTrigramSupport (20130315180637)
Migrating to AddReplyToUserIdToPost (20130319122248)
Migrating to AddUserIndexesToPostsAndTopics (20130320012100)
Migrating to AddModeratorToUser (20130320024345)
Migrating to RemoveOneboxesFromDb (20130321154905)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (1.0ms)[0m  DROP TABLE "post_onebox_renders"
  [1m[36m (0.9ms)[0m  [1mDROP TABLE "onebox_renders"[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130321154905')
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
Migrating to AddPercentRankToPosts (20130322183614)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (5.6ms)[0m  [1mALTER TABLE "posts" ADD COLUMN "percent_rank" float DEFAULT 1.0[0m
  [1m[35m (1.8ms)[0m  UPDATE posts SET percent_rank = x.percent_rank
 FROM (SELECT id, percent_rank()
 OVER (PARTITION BY topic_id ORDER BY SCORE DESC)
 FROM posts) AS x
 WHERE x.id = posts.id
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130322183614')[0m
  [1m[35m (0.7ms)[0m  COMMIT
Migrating to AddHotnessToCategory (20130326210101)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (3.6ms)[0m  ALTER TABLE "categories" ADD COLUMN "hotness" float DEFAULT 5.0 NOT NULL
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130326210101')[0m
  [1m[35m (0.7ms)[0m  COMMIT
Migrating to UpdateSiteSettingsForHot (20130327185852)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (1.6ms)[0m  UPDATE site_settings SET value = REPLACE(value, 'popular|', 'latest|hot|') where name = 'top_menu'
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130327185852')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to CreateHotTopics (20130328162943)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.3ms)[0m  DROP TABLE "hot_topics"
  [1m[36m (2.1ms)[0m  [1mCREATE TABLE "hot_topics" ("id" serial primary key, "topic_id" integer NOT NULL, "category_id" integer, "score" float NOT NULL) [0m
  [1m[35m (0.7ms)[0m  CREATE UNIQUE INDEX "index_hot_topics_on_topic_id" ON "hot_topics" ("topic_id")
  [1m[36m (0.6ms)[0m  [1mCREATE INDEX "index_hot_topics_on_score" ON "hot_topics" ("score" DESC)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130328162943')
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
Migrating to AddScoreToTopics (20130328182433)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "topics" ADD COLUMN "score" float[0m
  [1m[35m (4.9ms)[0m  ALTER TABLE "topics" ADD COLUMN "percent_rank" float DEFAULT 1.0 NOT NULL
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130328182433')[0m
  [1m[35m (0.9ms)[0m  COMMIT
Migrating to AddValuesToHotTopics (20130402210723)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "hot_topics" ADD COLUMN "random_bias" float
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "hot_topics" ADD COLUMN "random_multiplier" float[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "hot_topics" ADD COLUMN "days_ago_bias" float
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "hot_topics" ADD COLUMN "days_ago_multiplier" float[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "hot_topics" ADD COLUMN "hot_topic_type" integer
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130402210723')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to CreateSiteContents (20130404143437)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.9ms)[0m  DROP TABLE "site_contents"
  [1m[36m (1.4ms)[0m  [1mCREATE TABLE "site_contents" ("content_type" character varying(255) NOT NULL, "content" text NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.6ms)[0m  CREATE UNIQUE INDEX "index_site_contents_on_content_type" ON "site_contents" ("content_type")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130404143437')[0m
  [1m[35m (0.5ms)[0m  COMMIT
Migrating to AddUserExtras (20130404232558)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (5.7ms)[0m  ALTER TABLE "users" ADD COLUMN "likes_given" integer DEFAULT 0 NOT NULL
  [1m[36m (6.1ms)[0m  [1mALTER TABLE "users" ADD COLUMN "likes_received" integer DEFAULT 0 NOT NULL[0m
  [1m[35m (6.4ms)[0m  ALTER TABLE "users" ADD COLUMN "topic_reply_count" integer DEFAULT 0 NOT NULL
  [1m[36m (1.7ms)[0m  [1mUPDATE users u
SET
 likes_given = X.likes_given
FROM (
 SELECT
 a.user_id,
 COUNT(*) likes_given
 FROM user_actions a
 JOIN posts p ON p.id = a.target_post_id
 WHERE p.deleted_at IS NULL AND a.action_type = 1
 GROUP BY a.user_id
) as X
WHERE X.user_id = u.id
[0m
  [1m[35m (0.5ms)[0m  UPDATE users u
SET
 likes_received = Y.likes_received
FROM (
 SELECT
 a.user_id,
 COUNT(*) likes_received
 FROM user_actions a
 JOIN posts p ON p.id = a.target_post_id
 WHERE p.deleted_at IS NULL AND a.action_type = 2
 GROUP BY a.user_id
) as Y
WHERE Y.user_id = u.id

  [1m[36m (0.9ms)[0m  [1mUPDATE users u
SET
 topic_reply_count = Z.topic_reply_count
FROM (
 SELECT
 p.user_id,
 COUNT(DISTINCT topic_id) topic_reply_count
 FROM posts p
 JOIN topics t on t.id = p.topic_id
 WHERE t.user_id <> p.user_id AND
 p.deleted_at IS NULL AND t.deleted_at IS NULL
 GROUP BY p.user_id
) Z
WHERE
 Z.user_id = u.id
[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130404232558')
  [1m[36m (1.5ms)[0m  [1mCOMMIT[0m
Migrating to CreateAdminLogs (20130411205132)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (1.0ms)[0m  [1mDROP TABLE "admin_logs"[0m
  [1m[35m (3.3ms)[0m  CREATE TABLE "admin_logs" ("id" serial primary key, "action" integer NOT NULL, "admin_id" integer NOT NULL, "target_user_id" integer, "details" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130411205132')[0m
  [1m[35m (0.7ms)[0m  COMMIT
Migrating to CorrectCountsOnPosts (20130412015502)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "posts" RENAME COLUMN "custom_flag_count" TO "notify_moderators_count"
  [1m[36m (6.2ms)[0m  [1mALTER TABLE "posts" ADD COLUMN "notify_user_count" integer DEFAULT 0 NOT NULL[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130412015502')
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
Migrating to CorrectCountsOnTopics (20130412020156)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "topics" RENAME COLUMN "custom_flag_count" TO "notify_moderators_count"[0m
  [1m[35m (5.6ms)[0m  ALTER TABLE "topics" ADD COLUMN "notify_user_count" integer DEFAULT 0 NOT NULL
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130412020156')[0m
  [1m[35m (0.7ms)[0m  COMMIT
Migrating to CreateGroups (20130416004607)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (1.1ms)[0m  DROP TABLE "groups"
  [1m[36m (2.9ms)[0m  [1mCREATE TABLE "groups" ("id" serial primary key, "name" character varying(255) NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130416004607')
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
Migrating to GroupUsers (20130416004933)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.9ms)[0m  [1mDROP TABLE "group_users"[0m
  [1m[35m (2.2ms)[0m  CREATE TABLE "group_users" ("id" serial primary key, "group_id" integer NOT NULL, "user_id" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.9ms)[0m  [1mCREATE UNIQUE INDEX "index_group_users_on_group_id_and_user_id" ON "group_users" ("group_id", "user_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130416004933')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Migrating to AddSubtypeToTopics (20130416170855)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "topics" ADD COLUMN "subtype" character varying(255)[0m
  [1m[35m (0.5ms)[0m  update topics set subtype = 'user_to_user' where archetype = 'private_message'
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130416170855')[0m
  [1m[35m (0.2ms)[0m  COMMIT
Migrating to IncreaseDataLengthOnNotifications (20130419195746)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.5ms)[0m  ALTER TABLE notifications ALTER COLUMN data TYPE VARCHAR(1000)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130419195746')[0m
  [1m[35m (0.4ms)[0m  COMMIT
Migrating to AddRelatedPostIdToPostActions (20130422050626)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "post_actions" ADD COLUMN "related_post_id" integer
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130422050626')[0m
  [1m[35m (0.2ms)[0m  COMMIT
Migrating to AddSlugToTopics (20130424015746)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "topics" ADD COLUMN "slug" character varying(255)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130424015746')[0m
  [1m[35m (0.2ms)[0m  COMMIT
Migrating to AddUserIdToIncomingLinks (20130424055025)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "incoming_links" ADD COLUMN "user_id" integer
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130424055025')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to AllowNullsInIncomingLinks (20130426044914)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "incoming_links" ALTER COLUMN "referer" TYPE character varying(1000)
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "incoming_links" ALTER "referer" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "incoming_links" ALTER COLUMN "domain" TYPE character varying(100)
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "incoming_links" ALTER "domain" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130426044914')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to AddIncomingIpCurrentUserIdToIncomingLinks (20130426052257)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "incoming_links" ADD COLUMN "ip_address" inet[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "incoming_links" ADD COLUMN "current_user_id" int
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130426052257')[0m
  [1m[35m (0.2ms)[0m  COMMIT
Migrating to AddUnstarredAtToTopicUsers (20130428194335)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "topic_users" ADD COLUMN "unstarred_at" timestamp
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130428194335')[0m
  [1m[35m (0.2ms)[0m  COMMIT
Migrating to AddSecurityToCategories (20130429000101)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (3.4ms)[0m  ALTER TABLE "categories" ADD COLUMN "secure" boolean DEFAULT 'f' NOT NULL
  [1m[36m (0.5ms)[0m  [1mDROP TABLE "category_groups"[0m
  [1m[35m (1.5ms)[0m  CREATE TABLE "category_groups" ("id" serial primary key, "category_id" integer NOT NULL, "group_id" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130429000101')[0m
  [1m[35m (0.8ms)[0m  COMMIT
Migrating to AddTopicAllowedGroups (20130430052751)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (1.0ms)[0m  DROP TABLE "topic_allowed_groups"
  [1m[36m (2.4ms)[0m  [1mCREATE TABLE "topic_allowed_groups" ("id" serial primary key, "group_id" integer NOT NULL, "integer" integer NOT NULL, "topic_id" integer NOT NULL) [0m
  [1m[35m (0.8ms)[0m  CREATE UNIQUE INDEX "index_topic_allowed_groups_on_group_id_and_topic_id" ON "topic_allowed_groups" ("group_id", "topic_id")
  [1m[36m (0.7ms)[0m  [1mCREATE UNIQUE INDEX "index_topic_allowed_groups_on_topic_id_and_group_id" ON "topic_allowed_groups" ("topic_id", "group_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130430052751')
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
Migrating to FixTopicAllowedGroups (20130501105651)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "topic_allowed_groups" DROP "integer"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130501105651')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to AddAutomaticToGroups (20130506020935)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (2.2ms)[0m  [1mALTER TABLE "groups" ADD COLUMN "automatic" boolean DEFAULT 'f' NOT NULL[0m
  [1m[35m (0.2ms)[0m   ALTER SEQUENCE groups_id_seq START WITH 100

  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130506020935')[0m
  [1m[35m (0.4ms)[0m  COMMIT
Migrating to AddAutoCloseAtToTopics (20130506185042)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "topics" ADD COLUMN "auto_close_at" timestamp
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "topics" ADD COLUMN "auto_close_user_id" integer[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130506185042')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to AddUserCountToGroups (20130508040235)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.3ms)[0m  [1mALTER TABLE "groups" ADD COLUMN "user_count" integer DEFAULT 0 NOT NULL[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130508040235')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Migrating to UpdateSequenceForGroups (20130509040248)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1m SELECT setval('groups_id_seq', 40)
[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130509040248')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to AddUniqueNameToGroups (20130509041351)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mCREATE UNIQUE INDEX "index_groups_on_name" ON "groups" ("name")[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130509041351')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to AddAutoCloseDaysToCategories (20130515193551)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "categories" ADD COLUMN "auto_close_days" float[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130515193551')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to CreateCasUserInfos (20130521210140)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.6ms)[0m  [1mCREATE TABLE "cas_user_infos" ("id" serial primary key, "user_id" integer NOT NULL, "cas_user_id" character varying(255) NOT NULL, "username" character varying(255) NOT NULL, "first_name" character varying(255), "last_name" character varying(255), "email" character varying(255), "gender" character varying(255), "name" character varying(255), "link" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
PG::Error: ERROR:  relation "cas_user_infos" already exists
: CREATE TABLE "cas_user_infos" ("id" serial primary key, "user_id" integer NOT NULL, "cas_user_id" character varying(255) NOT NULL, "username" character varying(255) NOT NULL, "first_name" character varying(255), "last_name" character varying(255), "email" character varying(255), "gender" character varying(255), "name" character varying(255), "link" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.4ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
  [1m[35m (1.9ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Migrating to CreateForumThreads (20120311163914)
Migrating to CreatePosts (20120311164326)
Migrating to CreateUsers (20120311170118)
Migrating to CreateForums (20120311201341)
Migrating to CreateSites (20120311210245)
Migrating to AddReplyToToPosts (20120416201606)
Migrating to AddViewsToForumThreads (20120420183447)
Migrating to AddPostsCountToForumThreads (20120423140906)
Migrating to FixPostIndices (20120423142820)
Migrating to RemoveLastPostId (20120423151548)
Migrating to AddDisplayUsernameToUsers (20120425145456)
Migrating to AddUserIdIndexToPosts (20120427150624)
Migrating to CookedMigration (20120427151452)
Migrating to CreateVestalVersions (20120427154330)
Migrating to AddVersionToPosts (20120427172031)
Migrating to AddCreatedByToForumThreads (20120502183240)
Migrating to AddLastPostUserIdToForumThreads (20120502192121)
Migrating to AddSiteIdToUsers (20120503205521)
Migrating to CreateExpressions (20120507144132)
Migrating to CreateExpressionTypes (20120507144222)
Migrating to AddReplyCountToPosts (20120514144549)
Migrating to AddFlagToExpressionTypes (20120514173920)
Migrating to AddDescriptionToExpressionTypes (20120514204934)
Migrating to AddQuotelessToPost (20120517200130)
Migrating to CreateReadPosts (20120518200115)
Migrating to CreateLastReadPosts (20120519182212)
Migrating to CreateViews (20120523180723)
Migrating to AddRepliesToForumThreads (20120523184307)
Migrating to AddFeaturedToForumThreads (20120523201329)
Migrating to AddAvgTimeToForumThreads (20120525194845)
Migrating to CreateUploads (20120529175956)
Migrating to CreateStars (20120529202707)
Migrating to CreateForumThreadUser (20120530150726)
Migrating to MigratePosted (20120530160745)
Migrating to AddIndexToForumThreads (20120530200724)
Migrating to CreateForumThreadLinks (20120530212912)
Migrating to AddTagsToForumThreads (20120614190726)
Migrating to AddQuoteCountToPosts (20120614202024)
Migrating to CreateBookmarks (20120615180517)
Migrating to AddReplyBelowToPosts (20120618152946)
Migrating to CreatePostTimings (20120618212349)
Migrating to CreateMessageBus (20120618214856)
Migrating to FixPostTimings (20120619150807)
Migrating to DropReadPosts (20120619153349)
Migrating to AddPostNumberToBookmarks (20120619172714)
Migrating to AddSeenPostCountToForumThreadUsers (20120621155351)
Migrating to AddDeletedAtToForumThreads (20120621190310)
Migrating to CreateNotifications (20120622200242)
Migrating to AddSeenNotificationIdToUsers (20120625145714)
Migrating to AddDeletedAtToPosts (20120625162318)
Migrating to AddHighestPostNumberToForumThreads (20120625174544)
Migrating to AddImageUrlToForumThreads (20120625195326)
Migrating to RenameExpressionTypeId (20120629143908)
Migrating to DenormalizeExpressions (20120629150253)
Migrating to MakeExpressionsLessGeneric (20120629151243)
Migrating to CreateIncomingLinks (20120629182637)
Migrating to CreateReplies (20120702211427)
Migrating to AddReflectionToForumThreadLinks (20120703184734)
Migrating to AddIncomingLinkCountToPosts (20120703201312)
Migrating to AddIncomingLinkCountToForumThreads (20120703203623)
Migrating to AddBookmarkCountToPosts (20120703210004)
Migrating to AddAvgTimeToPosts (20120704160659)
Migrating to AddViewCountToPosts (20120704201743)
Migrating to AddUserToVersions (20120705181724)
Migrating to AddLastPostedAtToUsers (20120708210305)
Migrating to CreateCategories (20120712150500)
Migrating to AddCategoryIdToForumThreads (20120712151934)
Migrating to CreateCategoryFeaturedThreads (20120713201324)
Migrating to CreateSiteSettings (20120716020835)
Migrating to AddStatsToCategories (20120716173544)
Migrating to CreateUserOpenIds (20120718044955)
Migrating to AddEmailHashedPasswordNameSaltToUsers (20120719004636)
Migrating to AddUsernameLowerToUsers (20120720013733)
Migrating to AddAuthTokenToUsers (20120720044246)
Migrating to AddForumIdToCategories (20120720162422)
Migrating to AddNotNullsToUserOpenIds (20120723051512)
Migrating to AddLastSeenAtToUsers (20120724234502)
Migrating to AddWebsiteToUsers (20120724234711)
Migrating to AddExcerptToCategories (20120725183347)
Migrating to AddInvisibleToForumThread (20120726201830)
Migrating to AddUserIdToCategories (20120726235129)
Migrating to RemoveExcerptFromCategories (20120727005556)
Migrating to RenameInvisible (20120727150428)
Migrating to AddThreadCountsToCategories (20120727213543)
Migrating to AddIconToExpressionTypes (20120802151210)
Migrating to AddAdminFlagToUsers (20120803191426)
Migrating to AddNewPasswordNewSaltEmailTokenToUsers (20120806030641)
Migrating to RemoveNewPasswordStuffFromUser (20120806062617)
Migrating to CreateActions (20120807223020)
Migrating to RemoveSiteId (20120809020415)
Migrating to RemoveForumId (20120809030647)
Migrating to CorrectIndexingOnPosts (20120809053414)
Migrating to RemoveIndexForNow (20120809154750)
Migrating to CreatePostActions (20120809174649)
Migrating to CreatePostActionTypes (20120809175110)
Migrating to MigrateBookmarksToPostActions (20120809201855)
Migrating to RenameActionsToUserActions (20120810064839)
Migrating to RetireExpressions (20120812235417)
Migrating to RenameExpressionColumnsInForumThread (20120813004347)
Migrating to RenameExpressionColumnsInPosts (20120813042912)
Migrating to CreateForumThreadLinkClicks (20120813201426)
Migrating to AddUniqueIndexToForumThreadLinks (20120815004411)
Migrating to AddPostTypeToPosts (20120815180106)
Migrating to AddModeratorPostsCountToForumThreads (20120815204733)
Migrating to AddUniqueConstraintToUserActions (20120816050526)
Migrating to AddForumThreadStates (20120816205537)
Migrating to AddStarredAtToForumThreadUser (20120816205538)
Migrating to AddSearchIndices (20120820191804)
Migrating to AddBumpedAtToForumThreads (20120821191616)
Migrating to AddSlugToCategories (20120823205956)
Migrating to CreateCategoryFeaturedUsers (20120824171908)
Migrating to CreateOneboxRenders (20120828204209)
Migrating to CreatePostOneboxRenders (20120828204624)
Migrating to AddPreviewToOneboxRenders (20120830182736)
Migrating to RemoveDescriptionFromSiteSettings (20120910171504)
Migrating to RenameViewsToReads (20120918152319)
Migrating to AddSubTagToForumThreads (20120918205931)
Migrating to AddHasBestOfToForumThreads (20120919152846)
Migrating to AddTwitterUserInfo (20120921055428)
Migrating to CreateArchetypes (20120921155050)
Migrating to AddMetaDataToForumThreads (20120921162512)
Migrating to CreateArchetypeOptions (20120921163606)
Migrating to AddHstoreExtension (20120924182000)
Migrating to AddVoteCountToPosts (20120924182031)
Migrating to RemoveEnglishFromPostActionTypes (20120925171620)
Migrating to AddSequenceToPostActionTypes (20120925190802)
Migrating to AddSortOrderToPosts (20120928170023)
Migrating to AddEmailStuffToUsers (20121009161116)
Migrating to CreateEmailLogs (20121011155904)
Migrating to ConvertArchetypes (20121017162924)
Migrating to RenameForumThreadTables (20121018103721)
Migrating to CreateTopicAllowedUsers (20121018133039)
Migrating to FixNotificationData (20121018182709)
Migrating to DropAvatarUrlFromUsers (20121106015500)
Migrating to AddPostActionIdToNotifications (20121108193516)
Migrating to CreateTrustLevels (20121109164630)
Migrating to BioMarkdownSupport (20121113200844)
Migrating to CreateFacebookUserInfos (20121113200845)
Migrating to RenameStickyToPinned (20121115172544)
Migrating to AddMoreEmailSettingsToUser (20121116212424)
Migrating to AddEmailSettingsToUsers (20121119190529)
Migrating to AddEmailDirectToUsers (20121119200843)
Migrating to CreateInvites (20121121202035)
Migrating to CreateTopicInvites (20121121205215)
Migrating to AddMutedAtToTopicUser (20121122033316)
Migrating to MakePostNumberDistinct (20121123054127)
Migrating to CreateUserVisits (20121123063630)
Migrating to CreateEmailTokens (20121129160035)
Migrating to RemoveEmailTokenFromUsers (20121129184948)
Migrating to CreateDrafts (20121130010400)
Migrating to AddLinkPostIdToTopicLinks (20121130191818)
Migrating to AddVisitedAtToTopicUser (20121202225421)
Migrating to RenameSeenNotificaitonId (20121203181719)
Migrating to FixLinkPostId (20121204183855)
Migrating to AddAnotherFeaturedUserToTopics (20121204193747)
Migrating to AddApprovedToUsers (20121205162143)
Migrating to AddNotificationsToTopicUsers (20121207000741)
Migrating to CreateSiteCustomizations (20121211233131)
Migrating to AddOverrideDefaultStyleToSiteCustomization (20121216230719)
Migrating to AddTopicsEnteredToUsers (20121218205642)
Migrating to AddLastEditorIdToPosts (20121224072204)
Migrating to CreateDraftSequence (20121224095139)
Migrating to AddSequenceToDrafts (20121224100650)
Migrating to AddDeletedAtToInvites (20121228192219)
Migrating to AddDigestAfterDaysToUsers (20130107165207)
Migrating to AddPreviousVisitAtToUsers (20130108195847)
Migrating to MergeMuteOptionsOnTopicUsers (20130115012140)
Migrating to CorrectDefaultOnNotificationLevel (20130115021937)
Migrating to OopsUnwatchABoatOfWatchedStuff (20130115043603)
Migrating to RemoveSubTagFromTopics (20130116151829)
Migrating to FixSearch (20130120222728)
Migrating to AddTrackingToTopicUsers (20130121231352)
Migrating to AddAutoTrackTopicsToUser (20130122051134)
Migrating to AddAutoTrackAfterSecondsAndBanningAndDobToUser (20130122232825)
Migrating to AutoTrackAllTopicsRepliedTo (20130123070909)
Migrating to AddHiddenToPosts (20130125002652)
Migrating to AddFieldsToPostAction (20130125030305)
Migrating to CorrectIndexOnPostAction (20130125031122)
Migrating to RemoveTrustLevels (20130127213646)
Migrating to TrustLevelDefaultNull (20130128182013)
Migrating to RemovePmReflections (20130129010625)
Migrating to AddTimeReadToUsers (20130129163244)
Migrating to AddDaysVisitedToUsers (20130129174845)
Migrating to RemoveIndexFromViews (20130130154611)
Migrating to AddCustomFlagCountToTopics (20130131055710)
Migrating to AddColumnSummariesToPostsAndTopics (20130201000828)
Migrating to AddPositionToPostActionType (20130201023409)
Migrating to AddLastVersionAtToPosts (20130203204338)
Migrating to AddIpAddressToUsers (20130204000159)
Migrating to AlterFacebookUserId (20130205021905)
Migrating to AddUserDeletedToPosts (20130207200019)
Migrating to RemoveReplyBelowPostNumberFromPosts (20130208220635)
Migrating to RemoveTopicResponseActions (20130213021450)
Migrating to AddNewTopicDurationMinutesToUsers (20130213203300)
Migrating to AddDescriptionToCategories (20130221215017)
Migrating to AddGithubUserInfo (20130226015336)
Migrating to AddClearedPinnedToTopicUsers (20130306180148)
Migrating to RemoveExtraSpamRecord (20130311181327)
Migrating to AddExternalLinksInNewTabAnDisableQuotingToUser (20130313004922)
Migrating to AddForegroundColorToCategories (20130314093434)
Migrating to EnableTrigramSupport (20130315180637)
Migrating to AddReplyToUserIdToPost (20130319122248)
Migrating to AddUserIndexesToPostsAndTopics (20130320012100)
Migrating to AddModeratorToUser (20130320024345)
Migrating to RemoveOneboxesFromDb (20130321154905)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (1.0ms)[0m  DROP TABLE "post_onebox_renders"
  [1m[36m (0.8ms)[0m  [1mDROP TABLE "onebox_renders"[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130321154905')
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
Migrating to AddPercentRankToPosts (20130322183614)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (6.8ms)[0m  [1mALTER TABLE "posts" ADD COLUMN "percent_rank" float DEFAULT 1.0[0m
  [1m[35m (4.4ms)[0m  UPDATE posts SET percent_rank = x.percent_rank
 FROM (SELECT id, percent_rank()
 OVER (PARTITION BY topic_id ORDER BY SCORE DESC)
 FROM posts) AS x
 WHERE x.id = posts.id
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130322183614')[0m
  [1m[35m (0.8ms)[0m  COMMIT
Migrating to AddHotnessToCategory (20130326210101)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (3.6ms)[0m  ALTER TABLE "categories" ADD COLUMN "hotness" float DEFAULT 5.0 NOT NULL
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130326210101')[0m
  [1m[35m (0.8ms)[0m  COMMIT
Migrating to UpdateSiteSettingsForHot (20130327185852)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  UPDATE site_settings SET value = REPLACE(value, 'popular|', 'latest|hot|') where name = 'top_menu'
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130327185852')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to CreateHotTopics (20130328162943)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.1ms)[0m  DROP TABLE "hot_topics"
  [1m[36m (2.7ms)[0m  [1mCREATE TABLE "hot_topics" ("id" serial primary key, "topic_id" integer NOT NULL, "category_id" integer, "score" float NOT NULL) [0m
  [1m[35m (0.8ms)[0m  CREATE UNIQUE INDEX "index_hot_topics_on_topic_id" ON "hot_topics" ("topic_id")
  [1m[36m (0.9ms)[0m  [1mCREATE INDEX "index_hot_topics_on_score" ON "hot_topics" ("score" DESC)[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130328162943')
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
Migrating to AddScoreToTopics (20130328182433)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "topics" ADD COLUMN "score" float[0m
  [1m[35m (4.7ms)[0m  ALTER TABLE "topics" ADD COLUMN "percent_rank" float DEFAULT 1.0 NOT NULL
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130328182433')[0m
  [1m[35m (0.9ms)[0m  COMMIT
Migrating to AddValuesToHotTopics (20130402210723)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "hot_topics" ADD COLUMN "random_bias" float
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "hot_topics" ADD COLUMN "random_multiplier" float[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "hot_topics" ADD COLUMN "days_ago_bias" float
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "hot_topics" ADD COLUMN "days_ago_multiplier" float[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "hot_topics" ADD COLUMN "hot_topic_type" integer
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130402210723')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to CreateSiteContents (20130404143437)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  DROP TABLE "site_contents"
  [1m[36m (1.3ms)[0m  [1mCREATE TABLE "site_contents" ("content_type" character varying(255) NOT NULL, "content" text NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.8ms)[0m  CREATE UNIQUE INDEX "index_site_contents_on_content_type" ON "site_contents" ("content_type")
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130404143437')[0m
  [1m[35m (0.5ms)[0m  COMMIT
Migrating to AddUserExtras (20130404232558)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (6.4ms)[0m  ALTER TABLE "users" ADD COLUMN "likes_given" integer DEFAULT 0 NOT NULL
  [1m[36m (7.0ms)[0m  [1mALTER TABLE "users" ADD COLUMN "likes_received" integer DEFAULT 0 NOT NULL[0m
  [1m[35m (6.3ms)[0m  ALTER TABLE "users" ADD COLUMN "topic_reply_count" integer DEFAULT 0 NOT NULL
  [1m[36m (2.6ms)[0m  [1mUPDATE users u
SET
 likes_given = X.likes_given
FROM (
 SELECT
 a.user_id,
 COUNT(*) likes_given
 FROM user_actions a
 JOIN posts p ON p.id = a.target_post_id
 WHERE p.deleted_at IS NULL AND a.action_type = 1
 GROUP BY a.user_id
) as X
WHERE X.user_id = u.id
[0m
  [1m[35m (1.1ms)[0m  UPDATE users u
SET
 likes_received = Y.likes_received
FROM (
 SELECT
 a.user_id,
 COUNT(*) likes_received
 FROM user_actions a
 JOIN posts p ON p.id = a.target_post_id
 WHERE p.deleted_at IS NULL AND a.action_type = 2
 GROUP BY a.user_id
) as Y
WHERE Y.user_id = u.id

  [1m[36m (1.4ms)[0m  [1mUPDATE users u
SET
 topic_reply_count = Z.topic_reply_count
FROM (
 SELECT
 p.user_id,
 COUNT(DISTINCT topic_id) topic_reply_count
 FROM posts p
 JOIN topics t on t.id = p.topic_id
 WHERE t.user_id <> p.user_id AND
 p.deleted_at IS NULL AND t.deleted_at IS NULL
 GROUP BY p.user_id
) Z
WHERE
 Z.user_id = u.id
[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130404232558')
  [1m[36m (1.4ms)[0m  [1mCOMMIT[0m
Migrating to CreateAdminLogs (20130411205132)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mDROP TABLE "admin_logs"[0m
  [1m[35m (2.7ms)[0m  CREATE TABLE "admin_logs" ("id" serial primary key, "action" integer NOT NULL, "admin_id" integer NOT NULL, "target_user_id" integer, "details" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130411205132')[0m
  [1m[35m (0.8ms)[0m  COMMIT
Migrating to CorrectCountsOnPosts (20130412015502)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "posts" RENAME COLUMN "custom_flag_count" TO "notify_moderators_count"
  [1m[36m (8.3ms)[0m  [1mALTER TABLE "posts" ADD COLUMN "notify_user_count" integer DEFAULT 0 NOT NULL[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130412015502')
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
Migrating to CorrectCountsOnTopics (20130412020156)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "topics" RENAME COLUMN "custom_flag_count" TO "notify_moderators_count"[0m
  [1m[35m (4.8ms)[0m  ALTER TABLE "topics" ADD COLUMN "notify_user_count" integer DEFAULT 0 NOT NULL
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130412020156')[0m
  [1m[35m (0.8ms)[0m  COMMIT
Migrating to CreateGroups (20130416004607)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (1.4ms)[0m  DROP TABLE "groups"
  [1m[36m (2.1ms)[0m  [1mCREATE TABLE "groups" ("id" serial primary key, "name" character varying(255) NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130416004607')
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
Migrating to GroupUsers (20130416004933)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.6ms)[0m  [1mDROP TABLE "group_users"[0m
  [1m[35m (1.7ms)[0m  CREATE TABLE "group_users" ("id" serial primary key, "group_id" integer NOT NULL, "user_id" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.7ms)[0m  [1mCREATE UNIQUE INDEX "index_group_users_on_group_id_and_user_id" ON "group_users" ("group_id", "user_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130416004933')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Migrating to AddSubtypeToTopics (20130416170855)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "topics" ADD COLUMN "subtype" character varying(255)[0m
  [1m[35m (1.1ms)[0m  update topics set subtype = 'user_to_user' where archetype = 'private_message'
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130416170855')[0m
  [1m[35m (0.6ms)[0m  COMMIT
Migrating to IncreaseDataLengthOnNotifications (20130419195746)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.2ms)[0m  ALTER TABLE notifications ALTER COLUMN data TYPE VARCHAR(1000)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130419195746')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to AddRelatedPostIdToPostActions (20130422050626)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "post_actions" ADD COLUMN "related_post_id" integer
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130422050626')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to AddSlugToTopics (20130424015746)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "topics" ADD COLUMN "slug" character varying(255)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130424015746')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to AddUserIdToIncomingLinks (20130424055025)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "incoming_links" ADD COLUMN "user_id" integer
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130424055025')[0m
  [1m[35m (0.4ms)[0m  COMMIT
Migrating to AllowNullsInIncomingLinks (20130426044914)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "incoming_links" ALTER COLUMN "referer" TYPE character varying(1000)
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "incoming_links" ALTER "referer" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "incoming_links" ALTER COLUMN "domain" TYPE character varying(100)
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "incoming_links" ALTER "domain" DROP NOT NULL[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130426044914')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
Migrating to AddIncomingIpCurrentUserIdToIncomingLinks (20130426052257)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "incoming_links" ADD COLUMN "ip_address" inet[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "incoming_links" ADD COLUMN "current_user_id" int
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130426052257')[0m
  [1m[35m (0.2ms)[0m  COMMIT
Migrating to AddUnstarredAtToTopicUsers (20130428194335)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "topic_users" ADD COLUMN "unstarred_at" timestamp
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130428194335')[0m
  [1m[35m (0.2ms)[0m  COMMIT
Migrating to AddSecurityToCategories (20130429000101)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (4.0ms)[0m  ALTER TABLE "categories" ADD COLUMN "secure" boolean DEFAULT 'f' NOT NULL
  [1m[36m (0.5ms)[0m  [1mDROP TABLE "category_groups"[0m
  [1m[35m (1.7ms)[0m  CREATE TABLE "category_groups" ("id" serial primary key, "category_id" integer NOT NULL, "group_id" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130429000101')[0m
  [1m[35m (1.1ms)[0m  COMMIT
Migrating to AddTopicAllowedGroups (20130430052751)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (1.0ms)[0m  DROP TABLE "topic_allowed_groups"
  [1m[36m (2.5ms)[0m  [1mCREATE TABLE "topic_allowed_groups" ("id" serial primary key, "group_id" integer NOT NULL, "integer" integer NOT NULL, "topic_id" integer NOT NULL) [0m
  [1m[35m (0.9ms)[0m  CREATE UNIQUE INDEX "index_topic_allowed_groups_on_group_id_and_topic_id" ON "topic_allowed_groups" ("group_id", "topic_id")
  [1m[36m (0.9ms)[0m  [1mCREATE UNIQUE INDEX "index_topic_allowed_groups_on_topic_id_and_group_id" ON "topic_allowed_groups" ("topic_id", "group_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130430052751')
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Migrating to FixTopicAllowedGroups (20130501105651)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "topic_allowed_groups" DROP "integer"[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130501105651')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to AddAutomaticToGroups (20130506020935)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.4ms)[0m  [1mALTER TABLE "groups" ADD COLUMN "automatic" boolean DEFAULT 'f' NOT NULL[0m
  [1m[35m (0.2ms)[0m   ALTER SEQUENCE groups_id_seq START WITH 100

  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130506020935')[0m
  [1m[35m (0.4ms)[0m  COMMIT
Migrating to AddAutoCloseAtToTopics (20130506185042)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "topics" ADD COLUMN "auto_close_at" timestamp
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "topics" ADD COLUMN "auto_close_user_id" integer[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130506185042')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to AddUserCountToGroups (20130508040235)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.7ms)[0m  [1mALTER TABLE "groups" ADD COLUMN "user_count" integer DEFAULT 0 NOT NULL[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130508040235')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Migrating to UpdateSequenceForGroups (20130509040248)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1m SELECT setval('groups_id_seq', 40)
[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130509040248')
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
Migrating to AddUniqueNameToGroups (20130509041351)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mCREATE UNIQUE INDEX "index_groups_on_name" ON "groups" ("name")[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130509041351')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to AddAutoCloseDaysToCategories (20130515193551)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "categories" ADD COLUMN "auto_close_days" float[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130515193551')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to CreateCasUserInfos (20130521210140)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.3ms)[0m  [1mCREATE TABLE "cas_user_infos" ("id" serial primary key, "user_id" integer NOT NULL, "cas_user_id" character varying(255) NOT NULL, "username" character varying(255) NOT NULL, "first_name" character varying(255), "last_name" character varying(255), "email" character varying(255), "gender" character varying(255), "name" character varying(255), "link" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
PG::Error: ERROR:  relation "cas_user_infos" already exists
: CREATE TABLE "cas_user_infos" ("id" serial primary key, "user_id" integer NOT NULL, "cas_user_id" character varying(255) NOT NULL, "username" character varying(255) NOT NULL, "first_name" character varying(255), "last_name" character varying(255), "email" character varying(255), "gender" character varying(255), "name" character varying(255), "link" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.4ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
  [1m[35m (0.4ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Migrating to CreateForumThreads (20120311163914)
Migrating to CreatePosts (20120311164326)
Migrating to CreateUsers (20120311170118)
Migrating to CreateForums (20120311201341)
Migrating to CreateSites (20120311210245)
Migrating to AddReplyToToPosts (20120416201606)
Migrating to AddViewsToForumThreads (20120420183447)
Migrating to AddPostsCountToForumThreads (20120423140906)
Migrating to FixPostIndices (20120423142820)
Migrating to RemoveLastPostId (20120423151548)
Migrating to AddDisplayUsernameToUsers (20120425145456)
Migrating to AddUserIdIndexToPosts (20120427150624)
Migrating to CookedMigration (20120427151452)
Migrating to CreateVestalVersions (20120427154330)
Migrating to AddVersionToPosts (20120427172031)
Migrating to AddCreatedByToForumThreads (20120502183240)
Migrating to AddLastPostUserIdToForumThreads (20120502192121)
Migrating to AddSiteIdToUsers (20120503205521)
Migrating to CreateExpressions (20120507144132)
Migrating to CreateExpressionTypes (20120507144222)
Migrating to AddReplyCountToPosts (20120514144549)
Migrating to AddFlagToExpressionTypes (20120514173920)
Migrating to AddDescriptionToExpressionTypes (20120514204934)
Migrating to AddQuotelessToPost (20120517200130)
Migrating to CreateReadPosts (20120518200115)
Migrating to CreateLastReadPosts (20120519182212)
Migrating to CreateViews (20120523180723)
Migrating to AddRepliesToForumThreads (20120523184307)
Migrating to AddFeaturedToForumThreads (20120523201329)
Migrating to AddAvgTimeToForumThreads (20120525194845)
Migrating to CreateUploads (20120529175956)
Migrating to CreateStars (20120529202707)
Migrating to CreateForumThreadUser (20120530150726)
Migrating to MigratePosted (20120530160745)
Migrating to AddIndexToForumThreads (20120530200724)
Migrating to CreateForumThreadLinks (20120530212912)
Migrating to AddTagsToForumThreads (20120614190726)
Migrating to AddQuoteCountToPosts (20120614202024)
Migrating to CreateBookmarks (20120615180517)
Migrating to AddReplyBelowToPosts (20120618152946)
Migrating to CreatePostTimings (20120618212349)
Migrating to CreateMessageBus (20120618214856)
Migrating to FixPostTimings (20120619150807)
Migrating to DropReadPosts (20120619153349)
Migrating to AddPostNumberToBookmarks (20120619172714)
Migrating to AddSeenPostCountToForumThreadUsers (20120621155351)
Migrating to AddDeletedAtToForumThreads (20120621190310)
Migrating to CreateNotifications (20120622200242)
Migrating to AddSeenNotificationIdToUsers (20120625145714)
Migrating to AddDeletedAtToPosts (20120625162318)
Migrating to AddHighestPostNumberToForumThreads (20120625174544)
Migrating to AddImageUrlToForumThreads (20120625195326)
Migrating to RenameExpressionTypeId (20120629143908)
Migrating to DenormalizeExpressions (20120629150253)
Migrating to MakeExpressionsLessGeneric (20120629151243)
Migrating to CreateIncomingLinks (20120629182637)
Migrating to CreateReplies (20120702211427)
Migrating to AddReflectionToForumThreadLinks (20120703184734)
Migrating to AddIncomingLinkCountToPosts (20120703201312)
Migrating to AddIncomingLinkCountToForumThreads (20120703203623)
Migrating to AddBookmarkCountToPosts (20120703210004)
Migrating to AddAvgTimeToPosts (20120704160659)
Migrating to AddViewCountToPosts (20120704201743)
Migrating to AddUserToVersions (20120705181724)
Migrating to AddLastPostedAtToUsers (20120708210305)
Migrating to CreateCategories (20120712150500)
Migrating to AddCategoryIdToForumThreads (20120712151934)
Migrating to CreateCategoryFeaturedThreads (20120713201324)
Migrating to CreateSiteSettings (20120716020835)
Migrating to AddStatsToCategories (20120716173544)
Migrating to CreateUserOpenIds (20120718044955)
Migrating to AddEmailHashedPasswordNameSaltToUsers (20120719004636)
Migrating to AddUsernameLowerToUsers (20120720013733)
Migrating to AddAuthTokenToUsers (20120720044246)
Migrating to AddForumIdToCategories (20120720162422)
Migrating to AddNotNullsToUserOpenIds (20120723051512)
Migrating to AddLastSeenAtToUsers (20120724234502)
Migrating to AddWebsiteToUsers (20120724234711)
Migrating to AddExcerptToCategories (20120725183347)
Migrating to AddInvisibleToForumThread (20120726201830)
Migrating to AddUserIdToCategories (20120726235129)
Migrating to RemoveExcerptFromCategories (20120727005556)
Migrating to RenameInvisible (20120727150428)
Migrating to AddThreadCountsToCategories (20120727213543)
Migrating to AddIconToExpressionTypes (20120802151210)
Migrating to AddAdminFlagToUsers (20120803191426)
Migrating to AddNewPasswordNewSaltEmailTokenToUsers (20120806030641)
Migrating to RemoveNewPasswordStuffFromUser (20120806062617)
Migrating to CreateActions (20120807223020)
Migrating to RemoveSiteId (20120809020415)
Migrating to RemoveForumId (20120809030647)
Migrating to CorrectIndexingOnPosts (20120809053414)
Migrating to RemoveIndexForNow (20120809154750)
Migrating to CreatePostActions (20120809174649)
Migrating to CreatePostActionTypes (20120809175110)
Migrating to MigrateBookmarksToPostActions (20120809201855)
Migrating to RenameActionsToUserActions (20120810064839)
Migrating to RetireExpressions (20120812235417)
Migrating to RenameExpressionColumnsInForumThread (20120813004347)
Migrating to RenameExpressionColumnsInPosts (20120813042912)
Migrating to CreateForumThreadLinkClicks (20120813201426)
Migrating to AddUniqueIndexToForumThreadLinks (20120815004411)
Migrating to AddPostTypeToPosts (20120815180106)
Migrating to AddModeratorPostsCountToForumThreads (20120815204733)
Migrating to AddUniqueConstraintToUserActions (20120816050526)
Migrating to AddForumThreadStates (20120816205537)
Migrating to AddStarredAtToForumThreadUser (20120816205538)
Migrating to AddSearchIndices (20120820191804)
Migrating to AddBumpedAtToForumThreads (20120821191616)
Migrating to AddSlugToCategories (20120823205956)
Migrating to CreateCategoryFeaturedUsers (20120824171908)
Migrating to CreateOneboxRenders (20120828204209)
Migrating to CreatePostOneboxRenders (20120828204624)
Migrating to AddPreviewToOneboxRenders (20120830182736)
Migrating to RemoveDescriptionFromSiteSettings (20120910171504)
Migrating to RenameViewsToReads (20120918152319)
Migrating to AddSubTagToForumThreads (20120918205931)
Migrating to AddHasBestOfToForumThreads (20120919152846)
Migrating to AddTwitterUserInfo (20120921055428)
Migrating to CreateArchetypes (20120921155050)
Migrating to AddMetaDataToForumThreads (20120921162512)
Migrating to CreateArchetypeOptions (20120921163606)
Migrating to AddHstoreExtension (20120924182000)
Migrating to AddVoteCountToPosts (20120924182031)
Migrating to RemoveEnglishFromPostActionTypes (20120925171620)
Migrating to AddSequenceToPostActionTypes (20120925190802)
Migrating to AddSortOrderToPosts (20120928170023)
Migrating to AddEmailStuffToUsers (20121009161116)
Migrating to CreateEmailLogs (20121011155904)
Migrating to ConvertArchetypes (20121017162924)
Migrating to RenameForumThreadTables (20121018103721)
Migrating to CreateTopicAllowedUsers (20121018133039)
Migrating to FixNotificationData (20121018182709)
Migrating to DropAvatarUrlFromUsers (20121106015500)
Migrating to AddPostActionIdToNotifications (20121108193516)
Migrating to CreateTrustLevels (20121109164630)
Migrating to BioMarkdownSupport (20121113200844)
Migrating to CreateFacebookUserInfos (20121113200845)
Migrating to RenameStickyToPinned (20121115172544)
Migrating to AddMoreEmailSettingsToUser (20121116212424)
Migrating to AddEmailSettingsToUsers (20121119190529)
Migrating to AddEmailDirectToUsers (20121119200843)
Migrating to CreateInvites (20121121202035)
Migrating to CreateTopicInvites (20121121205215)
Migrating to AddMutedAtToTopicUser (20121122033316)
Migrating to MakePostNumberDistinct (20121123054127)
Migrating to CreateUserVisits (20121123063630)
Migrating to CreateEmailTokens (20121129160035)
Migrating to RemoveEmailTokenFromUsers (20121129184948)
Migrating to CreateDrafts (20121130010400)
Migrating to AddLinkPostIdToTopicLinks (20121130191818)
Migrating to AddVisitedAtToTopicUser (20121202225421)
Migrating to RenameSeenNotificaitonId (20121203181719)
Migrating to FixLinkPostId (20121204183855)
Migrating to AddAnotherFeaturedUserToTopics (20121204193747)
Migrating to AddApprovedToUsers (20121205162143)
Migrating to AddNotificationsToTopicUsers (20121207000741)
Migrating to CreateSiteCustomizations (20121211233131)
Migrating to AddOverrideDefaultStyleToSiteCustomization (20121216230719)
Migrating to AddTopicsEnteredToUsers (20121218205642)
Migrating to AddLastEditorIdToPosts (20121224072204)
Migrating to CreateDraftSequence (20121224095139)
Migrating to AddSequenceToDrafts (20121224100650)
Migrating to AddDeletedAtToInvites (20121228192219)
Migrating to AddDigestAfterDaysToUsers (20130107165207)
Migrating to AddPreviousVisitAtToUsers (20130108195847)
Migrating to MergeMuteOptionsOnTopicUsers (20130115012140)
Migrating to CorrectDefaultOnNotificationLevel (20130115021937)
Migrating to OopsUnwatchABoatOfWatchedStuff (20130115043603)
Migrating to RemoveSubTagFromTopics (20130116151829)
Migrating to FixSearch (20130120222728)
Migrating to AddTrackingToTopicUsers (20130121231352)
Migrating to AddAutoTrackTopicsToUser (20130122051134)
Migrating to AddAutoTrackAfterSecondsAndBanningAndDobToUser (20130122232825)
Migrating to AutoTrackAllTopicsRepliedTo (20130123070909)
Migrating to AddHiddenToPosts (20130125002652)
Migrating to AddFieldsToPostAction (20130125030305)
Migrating to CorrectIndexOnPostAction (20130125031122)
Migrating to RemoveTrustLevels (20130127213646)
Migrating to TrustLevelDefaultNull (20130128182013)
Migrating to RemovePmReflections (20130129010625)
Migrating to AddTimeReadToUsers (20130129163244)
Migrating to AddDaysVisitedToUsers (20130129174845)
Migrating to RemoveIndexFromViews (20130130154611)
Migrating to AddCustomFlagCountToTopics (20130131055710)
Migrating to AddColumnSummariesToPostsAndTopics (20130201000828)
Migrating to AddPositionToPostActionType (20130201023409)
Migrating to AddLastVersionAtToPosts (20130203204338)
Migrating to AddIpAddressToUsers (20130204000159)
Migrating to AlterFacebookUserId (20130205021905)
Migrating to AddUserDeletedToPosts (20130207200019)
Migrating to RemoveReplyBelowPostNumberFromPosts (20130208220635)
Migrating to RemoveTopicResponseActions (20130213021450)
Migrating to AddNewTopicDurationMinutesToUsers (20130213203300)
Migrating to AddDescriptionToCategories (20130221215017)
Migrating to AddGithubUserInfo (20130226015336)
Migrating to AddClearedPinnedToTopicUsers (20130306180148)
Migrating to RemoveExtraSpamRecord (20130311181327)
Migrating to AddExternalLinksInNewTabAnDisableQuotingToUser (20130313004922)
Migrating to AddForegroundColorToCategories (20130314093434)
Migrating to EnableTrigramSupport (20130315180637)
Migrating to AddReplyToUserIdToPost (20130319122248)
Migrating to AddUserIndexesToPostsAndTopics (20130320012100)
Migrating to AddModeratorToUser (20130320024345)
Migrating to RemoveOneboxesFromDb (20130321154905)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.9ms)[0m  DROP TABLE "post_onebox_renders"
  [1m[36m (0.9ms)[0m  [1mDROP TABLE "onebox_renders"[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130321154905')
  [1m[36m (2.3ms)[0m  [1mCOMMIT[0m
Migrating to AddPercentRankToPosts (20130322183614)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (7.0ms)[0m  [1mALTER TABLE "posts" ADD COLUMN "percent_rank" float DEFAULT 1.0[0m
  [1m[35m (4.5ms)[0m  UPDATE posts SET percent_rank = x.percent_rank
 FROM (SELECT id, percent_rank()
 OVER (PARTITION BY topic_id ORDER BY SCORE DESC)
 FROM posts) AS x
 WHERE x.id = posts.id
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130322183614')[0m
  [1m[35m (0.7ms)[0m  COMMIT
Migrating to AddHotnessToCategory (20130326210101)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (4.3ms)[0m  ALTER TABLE "categories" ADD COLUMN "hotness" float DEFAULT 5.0 NOT NULL
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130326210101')[0m
  [1m[35m (0.6ms)[0m  COMMIT
Migrating to UpdateSiteSettingsForHot (20130327185852)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  UPDATE site_settings SET value = REPLACE(value, 'popular|', 'latest|hot|') where name = 'top_menu'
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130327185852')[0m
  [1m[35m (0.4ms)[0m  COMMIT
Migrating to CreateHotTopics (20130328162943)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (2.0ms)[0m  CREATE TABLE "hot_topics" ("id" serial primary key, "topic_id" integer NOT NULL, "category_id" integer, "score" float NOT NULL) 
  [1m[36m (0.9ms)[0m  [1mCREATE UNIQUE INDEX "index_hot_topics_on_topic_id" ON "hot_topics" ("topic_id")[0m
  [1m[35m (0.7ms)[0m  CREATE INDEX "index_hot_topics_on_score" ON "hot_topics" ("score" DESC)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130328162943')[0m
  [1m[35m (0.5ms)[0m  COMMIT
Migrating to AddScoreToTopics (20130328182433)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "topics" ADD COLUMN "score" float
  [1m[36m (4.4ms)[0m  [1mALTER TABLE "topics" ADD COLUMN "percent_rank" float DEFAULT 1.0 NOT NULL[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130328182433')
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
Migrating to AddValuesToHotTopics (20130402210723)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "hot_topics" ADD COLUMN "random_bias" float[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "hot_topics" ADD COLUMN "random_multiplier" float
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "hot_topics" ADD COLUMN "days_ago_bias" float[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "hot_topics" ADD COLUMN "days_ago_multiplier" float
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "hot_topics" ADD COLUMN "hot_topic_type" integer[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130402210723')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to CreateSiteContents (20130404143437)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.4ms)[0m  [1mCREATE TABLE "site_contents" ("content_type" character varying(255) NOT NULL, "content" text NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.7ms)[0m  CREATE UNIQUE INDEX "index_site_contents_on_content_type" ON "site_contents" ("content_type")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130404143437')[0m
  [1m[35m (0.5ms)[0m  COMMIT
Migrating to AddUserExtras (20130404232558)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (6.0ms)[0m  ALTER TABLE "users" ADD COLUMN "likes_given" integer DEFAULT 0 NOT NULL
  [1m[36m (6.5ms)[0m  [1mALTER TABLE "users" ADD COLUMN "likes_received" integer DEFAULT 0 NOT NULL[0m
  [1m[35m (6.1ms)[0m  ALTER TABLE "users" ADD COLUMN "topic_reply_count" integer DEFAULT 0 NOT NULL
  [1m[36m (2.3ms)[0m  [1mUPDATE users u
SET
 likes_given = X.likes_given
FROM (
 SELECT
 a.user_id,
 COUNT(*) likes_given
 FROM user_actions a
 JOIN posts p ON p.id = a.target_post_id
 WHERE p.deleted_at IS NULL AND a.action_type = 1
 GROUP BY a.user_id
) as X
WHERE X.user_id = u.id
[0m
  [1m[35m (1.4ms)[0m  UPDATE users u
SET
 likes_received = Y.likes_received
FROM (
 SELECT
 a.user_id,
 COUNT(*) likes_received
 FROM user_actions a
 JOIN posts p ON p.id = a.target_post_id
 WHERE p.deleted_at IS NULL AND a.action_type = 2
 GROUP BY a.user_id
) as Y
WHERE Y.user_id = u.id

  [1m[36m (2.2ms)[0m  [1mUPDATE users u
SET
 topic_reply_count = Z.topic_reply_count
FROM (
 SELECT
 p.user_id,
 COUNT(DISTINCT topic_id) topic_reply_count
 FROM posts p
 JOIN topics t on t.id = p.topic_id
 WHERE t.user_id <> p.user_id AND
 p.deleted_at IS NULL AND t.deleted_at IS NULL
 GROUP BY p.user_id
) Z
WHERE
 Z.user_id = u.id
[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130404232558')
  [1m[36m (1.7ms)[0m  [1mCOMMIT[0m
Migrating to CreateAdminLogs (20130411205132)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (2.9ms)[0m  [1mCREATE TABLE "admin_logs" ("id" serial primary key, "action" integer NOT NULL, "admin_id" integer NOT NULL, "target_user_id" integer, "details" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130411205132')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
Migrating to CorrectCountsOnPosts (20130412015502)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "posts" RENAME COLUMN "custom_flag_count" TO "notify_moderators_count"[0m
  [1m[35m (6.8ms)[0m  ALTER TABLE "posts" ADD COLUMN "notify_user_count" integer DEFAULT 0 NOT NULL
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130412015502')[0m
  [1m[35m (0.8ms)[0m  COMMIT
Migrating to CorrectCountsOnTopics (20130412020156)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "topics" RENAME COLUMN "custom_flag_count" TO "notify_moderators_count"
  [1m[36m (5.7ms)[0m  [1mALTER TABLE "topics" ADD COLUMN "notify_user_count" integer DEFAULT 0 NOT NULL[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130412020156')
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Migrating to CreateGroups (20130416004607)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (2.1ms)[0m  [1mCREATE TABLE "groups" ("id" serial primary key, "name" character varying(255) NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130416004607')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Migrating to GroupUsers (20130416004933)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.7ms)[0m  [1mCREATE TABLE "group_users" ("id" serial primary key, "group_id" integer NOT NULL, "user_id" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.7ms)[0m  CREATE UNIQUE INDEX "index_group_users_on_group_id_and_user_id" ON "group_users" ("group_id", "user_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130416004933')[0m
  [1m[35m (0.4ms)[0m  COMMIT
Migrating to AddSubtypeToTopics (20130416170855)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "topics" ADD COLUMN "subtype" character varying(255)
  [1m[36m (0.9ms)[0m  [1mupdate topics set subtype = 'user_to_user' where archetype = 'private_message'[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130416170855')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
Migrating to IncreaseDataLengthOnNotifications (20130419195746)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.2ms)[0m  [1mALTER TABLE notifications ALTER COLUMN data TYPE VARCHAR(1000)[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130419195746')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to AddRelatedPostIdToPostActions (20130422050626)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "post_actions" ADD COLUMN "related_post_id" integer[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130422050626')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to AddSlugToTopics (20130424015746)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "topics" ADD COLUMN "slug" character varying(255)[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130424015746')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to AddUserIdToIncomingLinks (20130424055025)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "incoming_links" ADD COLUMN "user_id" integer[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130424055025')
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
Migrating to AllowNullsInIncomingLinks (20130426044914)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "incoming_links" ALTER COLUMN "referer" TYPE character varying(1000)[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "incoming_links" ALTER "referer" DROP NOT NULL
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "incoming_links" ALTER COLUMN "domain" TYPE character varying(100)[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "incoming_links" ALTER "domain" DROP NOT NULL
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130426044914')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to AddIncomingIpCurrentUserIdToIncomingLinks (20130426052257)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "incoming_links" ADD COLUMN "ip_address" inet
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "incoming_links" ADD COLUMN "current_user_id" int[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130426052257')
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
Migrating to AddUnstarredAtToTopicUsers (20130428194335)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "topic_users" ADD COLUMN "unstarred_at" timestamp[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130428194335')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to AddSecurityToCategories (20130429000101)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (3.8ms)[0m  [1mALTER TABLE "categories" ADD COLUMN "secure" boolean DEFAULT 'f' NOT NULL[0m
  [1m[35m (1.7ms)[0m  CREATE TABLE "category_groups" ("id" serial primary key, "category_id" integer NOT NULL, "group_id" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130429000101')[0m
  [1m[35m (1.0ms)[0m  COMMIT
Migrating to AddTopicAllowedGroups (20130430052751)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (2.5ms)[0m  CREATE TABLE "topic_allowed_groups" ("id" serial primary key, "group_id" integer NOT NULL, "integer" integer NOT NULL, "topic_id" integer NOT NULL) 
  [1m[36m (0.8ms)[0m  [1mCREATE UNIQUE INDEX "index_topic_allowed_groups_on_group_id_and_topic_id" ON "topic_allowed_groups" ("group_id", "topic_id")[0m
  [1m[35m (0.8ms)[0m  CREATE UNIQUE INDEX "index_topic_allowed_groups_on_topic_id_and_group_id" ON "topic_allowed_groups" ("topic_id", "group_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130430052751')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to FixTopicAllowedGroups (20130501105651)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "topic_allowed_groups" DROP "integer"
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130501105651')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to AddAutomaticToGroups (20130506020935)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.9ms)[0m  ALTER TABLE "groups" ADD COLUMN "automatic" boolean DEFAULT 'f' NOT NULL
  [1m[36m (0.1ms)[0m  [1m ALTER SEQUENCE groups_id_seq START WITH 100
[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130506020935')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
Migrating to AddAutoCloseAtToTopics (20130506185042)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "topics" ADD COLUMN "auto_close_at" timestamp[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "topics" ADD COLUMN "auto_close_user_id" integer
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130506185042')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to AddUserCountToGroups (20130508040235)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.4ms)[0m  ALTER TABLE "groups" ADD COLUMN "user_count" integer DEFAULT 0 NOT NULL
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130508040235')[0m
  [1m[35m (0.4ms)[0m  COMMIT
Migrating to UpdateSequenceForGroups (20130509040248)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m   SELECT setval('groups_id_seq', 40)

  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130509040248')[0m
  [1m[35m (0.4ms)[0m  COMMIT
Migrating to AddUniqueNameToGroups (20130509041351)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  CREATE UNIQUE INDEX "index_groups_on_name" ON "groups" ("name")
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130509041351')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to AddAutoCloseDaysToCategories (20130515193551)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "categories" ADD COLUMN "auto_close_days" float
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130515193551')[0m
  [1m[35m (0.4ms)[0m  COMMIT
Migrating to CreateCasUserInfos (20130521210140)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (2.7ms)[0m  CREATE TABLE "cas_user_infos" ("id" serial primary key, "user_id" integer NOT NULL, "cas_user_id" character varying(255) NOT NULL, "username" character varying(255) NOT NULL, "first_name" character varying(255), "last_name" character varying(255), "email" character varying(255), "gender" character varying(255), "name" character varying(255), "link" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.6ms)[0m  [1mCREATE UNIQUE INDEX "index_cas_user_infos_on_user_id" ON "cas_user_infos" ("user_id")[0m
  [1m[35m (0.7ms)[0m  CREATE UNIQUE INDEX "index_cas_user_infos_on_cas_user_id" ON "cas_user_infos" ("cas_user_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130521210140')[0m
  [1m[35m (0.4ms)[0m  COMMIT
Migrating to RenameSearchTables (20130522193615)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "users_search" RENAME TO "user_search_data"
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "user_search_data" RENAME COLUMN "id" TO "user_id"[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "categories_search" RENAME TO "category_search_data"
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "category_search_data" RENAME COLUMN "id" TO "category_id"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "posts_search" RENAME TO "post_search_data"
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "post_search_data" RENAME COLUMN "id" TO "post_id"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130522193615')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Migrating to AddLikeScoreToPosts (20130527152648)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (6.4ms)[0m  [1mALTER TABLE "posts" ADD COLUMN "like_score" integer DEFAULT 0 NOT NULL[0m
  [1m[35m (3.2ms)[0m  UPDATE posts p
 set like_score = x.like_score
 FROM (SELECT pa.post_id,
 SUM(CASE
 WHEN u.admin OR u.moderator THEN 3
 ELSE 1
 END) AS like_score
 FROM post_actions AS pa
 INNER JOIN users AS u ON u.id = pa.user_id
 GROUP BY pa.post_id) AS x
 WHERE x.post_id = p.id
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130527152648')[0m
  [1m[35m (1.0ms)[0m  COMMIT
Migrating to AddRankToCategoryFeaturedTopics (20130528174147)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (2.3ms)[0m  ALTER TABLE "category_featured_topics" ADD COLUMN "rank" integer DEFAULT 0 NOT NULL
  [1m[36m (0.8ms)[0m  [1mCREATE INDEX "index_category_featured_topics_on_category_id_and_rank" ON "category_featured_topics" ("category_id", "rank")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130528174147')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Migrating to AddStaffTookActionToPostActions (20130531210816)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (4.2ms)[0m  [1mALTER TABLE "post_actions" ADD COLUMN "staff_took_action" boolean DEFAULT 'f' NOT NULL[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130531210816')
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
Migrating to AddBlockedToUsers (20130603192412)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (6.7ms)[0m  [1mALTER TABLE "users" ADD COLUMN "blocked" boolean DEFAULT 'f'[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130603192412')
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
Migrating to AddAutoCloseStartedAtToTopics (20130606190601)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "topics" ADD COLUMN "auto_close_started_at" timestamp[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130606190601')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to AddReplyKeyToEmailLogs (20130610201033)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "email_logs" ADD COLUMN "reply_key" character varying(32)[0m
  [1m[35m (0.9ms)[0m  CREATE INDEX "index_email_logs_on_reply_key" ON "email_logs" ("reply_key")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130610201033')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to CreatePostUploadJoinTable (20130612200846)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  CREATE TABLE "posts_uploads" ("post_id" integer, "upload_id" integer) 
  [1m[36m (0.8ms)[0m  [1mCREATE INDEX "index_posts_uploads_on_post_id" ON "posts_uploads" ("post_id")[0m
  [1m[35m (0.7ms)[0m  CREATE INDEX "index_posts_uploads_on_upload_id" ON "posts_uploads" ("upload_id")
  [1m[36m (0.6ms)[0m  [1mCREATE UNIQUE INDEX "index_posts_uploads_on_post_id_and_upload_id" ON "posts_uploads" ("post_id", "upload_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130612200846')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to DropPostsUploads (20130613211700)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mDROP TABLE "posts_uploads"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130613211700')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Migrating to CreatePostUploads (20130613212230)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.9ms)[0m  [1mCREATE TABLE "post_uploads" ("id" serial primary key, "post_id" integer NOT NULL, "upload_id" integer NOT NULL) [0m
  [1m[35m (0.7ms)[0m  create unique index idx_unique_post_uploads on post_uploads(post_id, upload_id)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130613212230')[0m
  [1m[35m (0.4ms)[0m  COMMIT
Migrating to RemoveTopicIdFromUploads (20130615073305)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "uploads" DROP "topic_id"
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130615073305')[0m
  [1m[35m (0.4ms)[0m  COMMIT
Migrating to AddShaToUploads (20130615075557)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "uploads" ADD COLUMN "sha" character varying(255)
  [1m[36m (0.8ms)[0m  [1mCREATE UNIQUE INDEX "index_uploads_on_sha" ON "uploads" ("sha")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130615075557')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to CreateOptimizedImages (20130616082327)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (2.5ms)[0m  [1mCREATE TABLE "optimized_images" ("id" serial primary key, "sha" character varying(255) NOT NULL, "ext" character varying(255) NOT NULL, "width" integer NOT NULL, "height" integer NOT NULL, "upload_id" integer NOT NULL) [0m
  [1m[35m (0.7ms)[0m  CREATE INDEX "index_optimized_images_on_upload_id" ON "optimized_images" ("upload_id")
  [1m[36m (0.8ms)[0m  [1mCREATE UNIQUE INDEX "index_optimized_images_on_upload_id_and_width_and_height" ON "optimized_images" ("upload_id", "width", "height")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130616082327')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
Migrating to RenameShaAndExtColumns (20130617014127)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "optimized_images" RENAME COLUMN "sha" TO "sha1"[0m
  [1m[35m (2.4ms)[0m  ALTER TABLE "optimized_images" ALTER COLUMN "sha1" TYPE character varying(40)
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "optimized_images" RENAME COLUMN "ext" TO "extension"[0m
  [1m[35m (1.7ms)[0m  ALTER TABLE "optimized_images" ALTER COLUMN "extension" TYPE character varying(10)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130617014127')[0m
  [1m[35m (0.7ms)[0m  COMMIT
  [1m[36m (1.8ms)[0m  [1mSELECT version FROM schema_migrations ORDER BY version[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mPostActionType Load (0.5ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 1 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.3ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.3ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 3 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.3ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 4 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.3ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 5 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  UPDATE "post_action_types" SET "position" = 5, "updated_at" = '2013-06-17 15:34:38.429825' WHERE "post_action_types"."id" = 5
  [1m[36m (0.2ms)[0m  [1mSELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);[0m
  [1m[35mPostActionType Load (0.3ms)[0m  SELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 8 LIMIT 1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "post_action_types" ("created_at", "icon", "id", "is_flag", "name_key", "position", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["created_at", Mon, 17 Jun 2013 11:34:38 EDT -04:00], ["icon", nil], ["id", 8], ["is_flag", true], ["name_key", "spam"], ["position", 6], ["updated_at", Mon, 17 Jun 2013 11:34:38 EDT -04:00]]
  [1m[35m (0.3ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.3ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 6 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  UPDATE "post_action_types" SET "name_key" = 'notify_user', "updated_at" = '2013-06-17 15:34:38.441846' WHERE "post_action_types"."id" = 6
  [1m[36m (0.3ms)[0m  [1mSELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);[0m
  [1m[35mPostActionType Load (0.2ms)[0m  SELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 7 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mUPDATE "post_action_types" SET "name_key" = 'notify_moderators', "position" = 8, "updated_at" = '2013-06-17 15:34:38.443875' WHERE "post_action_types"."id" = 7[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.4ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
  [1m[35m (0.4ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
  [1m[36m (1.8ms)[0m  [1mSELECT version FROM schema_migrations ORDER BY version[0m
  [1m[35m (111.1ms)[0m  DROP DATABASE IF EXISTS "discourse_test"
  [1m[36m (320.6ms)[0m  [1mCREATE DATABASE "discourse_test" ENCODING = 'utf8'[0m
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.5ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mPostActionType Load (0.7ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 1 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.3ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 4 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 5 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 8 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 6 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 7 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36m (2.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.3ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m


Started GET "/images" for 127.0.0.1 at 2013-06-17 08:36:00 -0700

ActionController::RoutingError (No route matches [GET] "/images"):
  config/initializers/quiet_logger.rb:10:in `call_with_quiet_assets'
  config/initializers/silence_logger.rb:19:in `call'
  lib/middleware/turbo_dev.rb:19:in `call'


  Rendered /Users/joshua/.rvm/gems/ruby-2.0.0-p195-turbo/gems/actionpack-3.2.12/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)


Started GET "/" for 127.0.0.1 at 2013-06-17 08:36:03 -0700
Processing by ListController#latest as HTML
  [1m[35mCategory Load (1.8ms)[0m  SELECT "categories".* FROM "categories" WHERE (NOT categories.secure) ORDER BY topic_count desc
  [1m[36mTopic Load (2.0ms)[0m  [1mSELECT id, title, slug FROM "topics" WHERE "topics"."id" IN (10, 11, 13, 41, 42, 43, 44, 45, 46, 47, 12) AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mSQL (1.9ms)[0m  UPDATE "topics" SET "slug" = 'discourse' WHERE "topics"."id" = 10 AND ("topics"."deleted_at" IS NULL)
  [1m[36mSQL (1.5ms)[0m  [1mUPDATE "topics" SET "slug" = 'tech' WHERE "topics"."id" = 11 AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mSQL (1.5ms)[0m  UPDATE "topics" SET "slug" = 'videos' WHERE "topics"."id" = 13 AND ("topics"."deleted_at" IS NULL)
  [1m[36mSQL (1.7ms)[0m  [1mUPDATE "topics" SET "slug" = 'category-definition-for-general' WHERE "topics"."id" = 41 AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mSQL (1.4ms)[0m  UPDATE "topics" SET "slug" = 'category-definition-for-gaming' WHERE "topics"."id" = 42 AND ("topics"."deleted_at" IS NULL)
  [1m[36mSQL (1.5ms)[0m  [1mUPDATE "topics" SET "slug" = 'category-definition-for-music' WHERE "topics"."id" = 43 AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mSQL (1.5ms)[0m  UPDATE "topics" SET "slug" = 'category-definition-for-movies' WHERE "topics"."id" = 44 AND ("topics"."deleted_at" IS NULL)
  [1m[36mSQL (1.4ms)[0m  [1mUPDATE "topics" SET "slug" = 'category-definition-for-sports' WHERE "topics"."id" = 45 AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mSQL (1.4ms)[0m  UPDATE "topics" SET "slug" = 'category-definition-for-school' WHERE "topics"."id" = 46 AND ("topics"."deleted_at" IS NULL)
  [1m[36mSQL (1.4ms)[0m  [1mUPDATE "topics" SET "slug" = 'category-definition-for-pets' WHERE "topics"."id" = 47 AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mSQL (1.5ms)[0m  UPDATE "topics" SET "slug" = 'pics' WHERE "topics"."id" = 12 AND ("topics"."deleted_at" IS NULL)
  [1m[36mPostActionType Load (1.3ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" ORDER BY position asc[0m
  [1m[35m (1.6ms)[0m  SHOW max_identifier_length
  [1m[36mSQL (4.3ms)[0m  [1mSELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') ORDER BY CASE WHEN topics.category_id IS NULL and (topics.pinned_at IS NOT NULL) THEN 0 ELSE 1 END, topics.bumped_at DESC LIMIT 30[0m
  [1m[35mUser Load (1.7ms)[0m  SELECT id, email, username FROM "users" WHERE "users"."id" IN (24, 7, 23, 19, 22, 2, 20, 11, 14, 9, 12)
  [1m[36mSQL (1.8ms)[0m  [1mUPDATE "topics" SET "slug" = 'congratulations-on-getting-vagrant-up' WHERE "topics"."id" = 53 AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mPost Load (1.9ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 53 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mSQL (1.7ms)[0m  [1mUPDATE "topics" SET "slug" = 'how-do-i-follow-conversations' WHERE "topics"."id" = 52 AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mSQL (1.8ms)[0m  UPDATE "topics" SET "slug" = 'how-do-i-reply-to-folks-here' WHERE "topics"."id" = 51 AND ("topics"."deleted_at" IS NULL)
  [1m[36mSQL (1.5ms)[0m  [1mUPDATE "topics" SET "slug" = 'a-few-qestions-about-remembering-what-ive-read' WHERE "topics"."id" = 50 AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mSQL (1.6ms)[0m  UPDATE "topics" SET "slug" = 'a-bear-however-hard-he-tries-grows-tubby-without-exercise' WHERE "topics"."id" = 48 AND ("topics"."deleted_at" IS NULL)
  [1m[36mSQL (1.5ms)[0m  [1mUPDATE "topics" SET "slug" = 'how-do-i-add-pictures-to-a-post' WHERE "topics"."id" = 49 AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mSQL (1.5ms)[0m  UPDATE "topics" SET "slug" = 'charlie-the-unicorn-4' WHERE "topics"."id" = 15 AND ("topics"."deleted_at" IS NULL)
  [1m[36mSQL (1.5ms)[0m  [1mUPDATE "topics" SET "slug" = 'mac-vs-mac-and-the-misuse-of-words' WHERE "topics"."id" = 39 AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mPost Load (1.6ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 47 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mPost Load (1.4ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 46 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mPost Load (1.7ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 45 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mPost Load (1.5ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 44 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mPost Load (1.4ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 43 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mPost Load (1.5ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 42 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mPost Load (1.6ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 41 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mUPDATE "topics" SET "slug" = 'why-is-uninhabited-land-in-the-us-so-closed-off' WHERE "topics"."id" = 26 AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mSQL (58.8ms)[0m  UPDATE "topics" SET "slug" = 'most-important-sci-fi-movie-of-the-2000s' WHERE "topics"."id" = 27 AND ("topics"."deleted_at" IS NULL)
  [1m[36mSQL (2.1ms)[0m  [1mUPDATE "topics" SET "slug" = 'do-you-use-a-mobile-device-for-all-your-work-tell-me-how' WHERE "topics"."id" = 25 AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mSQL (1.5ms)[0m  UPDATE "topics" SET "slug" = 'try-all-the-things' WHERE "topics"."id" = 14 AND ("topics"."deleted_at" IS NULL)
  [1m[36mPost Load (1.5ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 13 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mPost Load (1.4ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 12 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mPost Load (1.5ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 11 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mPost Load (1.4ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 10 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  Rendered list/list.erb within layouts/application (2.0ms)
  Rendered common/_special_font_face.html.erb (1.0ms)
  [1m[36mSiteCustomization Load (1.6ms)[0m  [1mSELECT "site_customizations".* FROM "site_customizations" WHERE "site_customizations"."enabled" = 't' LIMIT 1[0m
  Rendered common/_discourse_stylesheet.html.erb (4254.0ms)
  Rendered common/_discourse_javascript.html.erb (6537.0ms)
Completed 200 OK in 11966ms (Views: 10813.9ms | ActiveRecord: 153.4ms)


Started GET "/t/53/1.json?track_visit=true" for 127.0.0.1 at 2013-06-17 08:36:24 -0700
Processing by TopicsController#show as JSON
  Parameters: {"track_visit"=>"true", "topic_id"=>"53", "post_number"=>"1"}
  [1m[35mTopic Load (1.5ms)[0m  SELECT "topics".* FROM "topics" WHERE "topics"."id" = 53 AND ("topics"."deleted_at" IS NULL) LIMIT 1
  [1m[36mPost Load (1.7ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 53 AND ("posts"."deleted_at" IS NULL) ORDER BY @(post_number - 1) LIMIT 1[0m
  [1m[35m (1.2ms)[0m  SELECT id FROM "posts" WHERE "posts"."topic_id" = 53 AND ("posts"."deleted_at" IS NULL) ORDER BY sort_order
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "posts" WHERE "posts"."id" IN (77, 78) AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35m (1.0ms)[0m  BEGIN
  [1m[36mSQL (3.3ms)[0m  [1mINSERT INTO "views" ("ip", "parent_id", "parent_type", "user_id", "viewed_at") VALUES ($1, $2, $3, $4, $5)[0m  [["ip", 2130706433], ["parent_id", 53], ["parent_type", "Topic"], ["user_id", nil], ["viewed_at", Mon, 17 Jun 2013]]
  [1m[35mSQL (1.6ms)[0m  UPDATE "topics" SET views = views + 1 WHERE "topics"."id" = 53 AND ("topics"."deleted_at" IS NULL)
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "posts" WHERE "posts"."id" IN (77, 78) AND ("posts"."deleted_at" IS NULL)
  [1m[36mPost Load (1.3ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."id" IN (77, 78) AND ("posts"."deleted_at" IS NULL) ORDER BY sort_order[0m
  [1m[35mUser Load (1.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" IN (24)
  [1m[36m (3.0ms)[0m  [1mSELECT
 l.post_id,
 l.url,
 l.clicks,
 t.title,
 l.internal,
 l.reflection
 FROM topic_links l
 LEFT JOIN topics t ON t.id = l.link_topic_id
 LEFT JOIN categories AS c ON c.id = t.category_id
 WHERE (t.deleted_at IS NULL) AND (l.post_id IN (77,78)) AND (NOT COALESCE(c.secure, false))
 ORDER BY reflection ASC, clicks DESC[0m
  [1m[35mPostAction Load (1.6ms)[0m  SELECT "post_actions".* FROM "post_actions" WHERE "post_actions"."post_id" IN (77, 78) AND "post_actions"."user_id" = 0 AND ("post_actions"."deleted_at" IS NULL)
  [1m[36m (1.6ms)[0m  [1mSELECT MAX("posts"."post_number") AS max_id FROM "posts" WHERE "posts"."topic_id" = 53 AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "posts" WHERE "posts"."topic_id" = 53 AND ("posts"."deleted_at" IS NULL)
  [1m[36mUser Load (1.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 24 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 24 LIMIT 1
  [1m[36mGroup Load (1.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "topic_allowed_groups" ON "groups"."id" = "topic_allowed_groups"."group_id" WHERE "topic_allowed_groups"."topic_id" = 53[0m
  [1m[35m (1.7ms)[0m  SELECT ftl.url,
 ft.title,
 ftl.link_topic_id,
 ftl.reflection,
 ftl.internal,
 MIN(ftl.user_id) AS user_id,
 SUM(clicks) AS clicks
 FROM topic_links AS ftl
 LEFT JOIN topics AS ft ON ftl.link_topic_id = ft.id
 LEFT JOIN categories AS c ON c.id = ft.category_id
 WHERE (ftl.topic_id = 53) AND (ft.deleted_at IS NULL) AND (NOT COALESCE(c.secure, false))
 GROUP BY ftl.url, ft.title, ftl.link_topic_id, ftl.reflection, ftl.internal
 ORDER BY clicks DESC
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) AS count_all, user_id AS user_id FROM "posts" WHERE "posts"."topic_id" = 53 AND ("posts"."deleted_at" IS NULL) GROUP BY user_id ORDER BY count_all desc LIMIT 24[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" IN (24)
  [1m[36mSQL (2.7ms)[0m  [1mSELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."closed" = 'f' AND "topics"."archived" = 'f' AND "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') AND (topics.id NOT IN (53)) ORDER BY RANDOM() LIMIT 5[0m
  [1m[35mUser Load (1.5ms)[0m  SELECT id, email, username FROM "users" WHERE "users"."id" IN (2, 19, 20, 11, 23, 14, 22, 7)
  [1m[36mGroup Load (1.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 4 ORDER BY name[0m
  [1m[35mGroup Load (1.4ms)[0m  SELECT "groups".* FROM "groups" ORDER BY name
  [1m[36mPost Load (1.6ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 47 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mGroup Load (1.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 11 ORDER BY name
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".* FROM "groups" ORDER BY name[0m
  [1m[35mGroup Load (1.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".* FROM "groups" ORDER BY name[0m
Completed 200 OK in 270ms (Views: 0.2ms | ActiveRecord: 63.9ms)
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.3ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
  [1m[35m (0.4ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Migrating to CreateForumThreads (20120311163914)
Migrating to CreatePosts (20120311164326)
Migrating to CreateUsers (20120311170118)
Migrating to CreateForums (20120311201341)
Migrating to CreateSites (20120311210245)
Migrating to AddReplyToToPosts (20120416201606)
Migrating to AddViewsToForumThreads (20120420183447)
Migrating to AddPostsCountToForumThreads (20120423140906)
Migrating to FixPostIndices (20120423142820)
Migrating to RemoveLastPostId (20120423151548)
Migrating to AddDisplayUsernameToUsers (20120425145456)
Migrating to AddUserIdIndexToPosts (20120427150624)
Migrating to CookedMigration (20120427151452)
Migrating to CreateVestalVersions (20120427154330)
Migrating to AddVersionToPosts (20120427172031)
Migrating to AddCreatedByToForumThreads (20120502183240)
Migrating to AddLastPostUserIdToForumThreads (20120502192121)
Migrating to AddSiteIdToUsers (20120503205521)
Migrating to CreateExpressions (20120507144132)
Migrating to CreateExpressionTypes (20120507144222)
Migrating to AddReplyCountToPosts (20120514144549)
Migrating to AddFlagToExpressionTypes (20120514173920)
Migrating to AddDescriptionToExpressionTypes (20120514204934)
Migrating to AddQuotelessToPost (20120517200130)
Migrating to CreateReadPosts (20120518200115)
Migrating to CreateLastReadPosts (20120519182212)
Migrating to CreateViews (20120523180723)
Migrating to AddRepliesToForumThreads (20120523184307)
Migrating to AddFeaturedToForumThreads (20120523201329)
Migrating to AddAvgTimeToForumThreads (20120525194845)
Migrating to CreateUploads (20120529175956)
Migrating to CreateStars (20120529202707)
Migrating to CreateForumThreadUser (20120530150726)
Migrating to MigratePosted (20120530160745)
Migrating to AddIndexToForumThreads (20120530200724)
Migrating to CreateForumThreadLinks (20120530212912)
Migrating to AddTagsToForumThreads (20120614190726)
Migrating to AddQuoteCountToPosts (20120614202024)
Migrating to CreateBookmarks (20120615180517)
Migrating to AddReplyBelowToPosts (20120618152946)
Migrating to CreatePostTimings (20120618212349)
Migrating to CreateMessageBus (20120618214856)
Migrating to FixPostTimings (20120619150807)
Migrating to DropReadPosts (20120619153349)
Migrating to AddPostNumberToBookmarks (20120619172714)
Migrating to AddSeenPostCountToForumThreadUsers (20120621155351)
Migrating to AddDeletedAtToForumThreads (20120621190310)
Migrating to CreateNotifications (20120622200242)
Migrating to AddSeenNotificationIdToUsers (20120625145714)
Migrating to AddDeletedAtToPosts (20120625162318)
Migrating to AddHighestPostNumberToForumThreads (20120625174544)
Migrating to AddImageUrlToForumThreads (20120625195326)
Migrating to RenameExpressionTypeId (20120629143908)
Migrating to DenormalizeExpressions (20120629150253)
Migrating to MakeExpressionsLessGeneric (20120629151243)
Migrating to CreateIncomingLinks (20120629182637)
Migrating to CreateReplies (20120702211427)
Migrating to AddReflectionToForumThreadLinks (20120703184734)
Migrating to AddIncomingLinkCountToPosts (20120703201312)
Migrating to AddIncomingLinkCountToForumThreads (20120703203623)
Migrating to AddBookmarkCountToPosts (20120703210004)
Migrating to AddAvgTimeToPosts (20120704160659)
Migrating to AddViewCountToPosts (20120704201743)
Migrating to AddUserToVersions (20120705181724)
Migrating to AddLastPostedAtToUsers (20120708210305)
Migrating to CreateCategories (20120712150500)
Migrating to AddCategoryIdToForumThreads (20120712151934)
Migrating to CreateCategoryFeaturedThreads (20120713201324)
Migrating to CreateSiteSettings (20120716020835)
Migrating to AddStatsToCategories (20120716173544)
Migrating to CreateUserOpenIds (20120718044955)
Migrating to AddEmailHashedPasswordNameSaltToUsers (20120719004636)
Migrating to AddUsernameLowerToUsers (20120720013733)
Migrating to AddAuthTokenToUsers (20120720044246)
Migrating to AddForumIdToCategories (20120720162422)
Migrating to AddNotNullsToUserOpenIds (20120723051512)
Migrating to AddLastSeenAtToUsers (20120724234502)
Migrating to AddWebsiteToUsers (20120724234711)
Migrating to AddExcerptToCategories (20120725183347)
Migrating to AddInvisibleToForumThread (20120726201830)
Migrating to AddUserIdToCategories (20120726235129)
Migrating to RemoveExcerptFromCategories (20120727005556)
Migrating to RenameInvisible (20120727150428)
Migrating to AddThreadCountsToCategories (20120727213543)
Migrating to AddIconToExpressionTypes (20120802151210)
Migrating to AddAdminFlagToUsers (20120803191426)
Migrating to AddNewPasswordNewSaltEmailTokenToUsers (20120806030641)
Migrating to RemoveNewPasswordStuffFromUser (20120806062617)
Migrating to CreateActions (20120807223020)
Migrating to RemoveSiteId (20120809020415)
Migrating to RemoveForumId (20120809030647)
Migrating to CorrectIndexingOnPosts (20120809053414)
Migrating to RemoveIndexForNow (20120809154750)
Migrating to CreatePostActions (20120809174649)
Migrating to CreatePostActionTypes (20120809175110)
Migrating to MigrateBookmarksToPostActions (20120809201855)
Migrating to RenameActionsToUserActions (20120810064839)
Migrating to RetireExpressions (20120812235417)
Migrating to RenameExpressionColumnsInForumThread (20120813004347)
Migrating to RenameExpressionColumnsInPosts (20120813042912)
Migrating to CreateForumThreadLinkClicks (20120813201426)
Migrating to AddUniqueIndexToForumThreadLinks (20120815004411)
Migrating to AddPostTypeToPosts (20120815180106)
Migrating to AddModeratorPostsCountToForumThreads (20120815204733)
Migrating to AddUniqueConstraintToUserActions (20120816050526)
Migrating to AddForumThreadStates (20120816205537)
Migrating to AddStarredAtToForumThreadUser (20120816205538)
Migrating to AddSearchIndices (20120820191804)
Migrating to AddBumpedAtToForumThreads (20120821191616)
Migrating to AddSlugToCategories (20120823205956)
Migrating to CreateCategoryFeaturedUsers (20120824171908)
Migrating to CreateOneboxRenders (20120828204209)
Migrating to CreatePostOneboxRenders (20120828204624)
Migrating to AddPreviewToOneboxRenders (20120830182736)
Migrating to RemoveDescriptionFromSiteSettings (20120910171504)
Migrating to RenameViewsToReads (20120918152319)
Migrating to AddSubTagToForumThreads (20120918205931)
Migrating to AddHasBestOfToForumThreads (20120919152846)
Migrating to AddTwitterUserInfo (20120921055428)
Migrating to CreateArchetypes (20120921155050)
Migrating to AddMetaDataToForumThreads (20120921162512)
Migrating to CreateArchetypeOptions (20120921163606)
Migrating to AddHstoreExtension (20120924182000)
Migrating to AddVoteCountToPosts (20120924182031)
Migrating to RemoveEnglishFromPostActionTypes (20120925171620)
Migrating to AddSequenceToPostActionTypes (20120925190802)
Migrating to AddSortOrderToPosts (20120928170023)
Migrating to AddEmailStuffToUsers (20121009161116)
Migrating to CreateEmailLogs (20121011155904)
Migrating to ConvertArchetypes (20121017162924)
Migrating to RenameForumThreadTables (20121018103721)
Migrating to CreateTopicAllowedUsers (20121018133039)
Migrating to FixNotificationData (20121018182709)
Migrating to DropAvatarUrlFromUsers (20121106015500)
Migrating to AddPostActionIdToNotifications (20121108193516)
Migrating to CreateTrustLevels (20121109164630)
Migrating to BioMarkdownSupport (20121113200844)
Migrating to CreateFacebookUserInfos (20121113200845)
Migrating to RenameStickyToPinned (20121115172544)
Migrating to AddMoreEmailSettingsToUser (20121116212424)
Migrating to AddEmailSettingsToUsers (20121119190529)
Migrating to AddEmailDirectToUsers (20121119200843)
Migrating to CreateInvites (20121121202035)
Migrating to CreateTopicInvites (20121121205215)
Migrating to AddMutedAtToTopicUser (20121122033316)
Migrating to MakePostNumberDistinct (20121123054127)
Migrating to CreateUserVisits (20121123063630)
Migrating to CreateEmailTokens (20121129160035)
Migrating to RemoveEmailTokenFromUsers (20121129184948)
Migrating to CreateDrafts (20121130010400)
Migrating to AddLinkPostIdToTopicLinks (20121130191818)
Migrating to AddVisitedAtToTopicUser (20121202225421)
Migrating to RenameSeenNotificaitonId (20121203181719)
Migrating to FixLinkPostId (20121204183855)
Migrating to AddAnotherFeaturedUserToTopics (20121204193747)
Migrating to AddApprovedToUsers (20121205162143)
Migrating to AddNotificationsToTopicUsers (20121207000741)
Migrating to CreateSiteCustomizations (20121211233131)
Migrating to AddOverrideDefaultStyleToSiteCustomization (20121216230719)
Migrating to AddTopicsEnteredToUsers (20121218205642)
Migrating to AddLastEditorIdToPosts (20121224072204)
Migrating to CreateDraftSequence (20121224095139)
Migrating to AddSequenceToDrafts (20121224100650)
Migrating to AddDeletedAtToInvites (20121228192219)
Migrating to AddDigestAfterDaysToUsers (20130107165207)
Migrating to AddPreviousVisitAtToUsers (20130108195847)
Migrating to MergeMuteOptionsOnTopicUsers (20130115012140)
Migrating to CorrectDefaultOnNotificationLevel (20130115021937)
Migrating to OopsUnwatchABoatOfWatchedStuff (20130115043603)
Migrating to RemoveSubTagFromTopics (20130116151829)
Migrating to FixSearch (20130120222728)
Migrating to AddTrackingToTopicUsers (20130121231352)
Migrating to AddAutoTrackTopicsToUser (20130122051134)
Migrating to AddAutoTrackAfterSecondsAndBanningAndDobToUser (20130122232825)
Migrating to AutoTrackAllTopicsRepliedTo (20130123070909)
Migrating to AddHiddenToPosts (20130125002652)
Migrating to AddFieldsToPostAction (20130125030305)
Migrating to CorrectIndexOnPostAction (20130125031122)
Migrating to RemoveTrustLevels (20130127213646)
Migrating to TrustLevelDefaultNull (20130128182013)
Migrating to RemovePmReflections (20130129010625)
Migrating to AddTimeReadToUsers (20130129163244)
Migrating to AddDaysVisitedToUsers (20130129174845)
Migrating to RemoveIndexFromViews (20130130154611)
Migrating to AddCustomFlagCountToTopics (20130131055710)
Migrating to AddColumnSummariesToPostsAndTopics (20130201000828)
Migrating to AddPositionToPostActionType (20130201023409)
Migrating to AddLastVersionAtToPosts (20130203204338)
Migrating to AddIpAddressToUsers (20130204000159)
Migrating to AlterFacebookUserId (20130205021905)
Migrating to AddUserDeletedToPosts (20130207200019)
Migrating to RemoveReplyBelowPostNumberFromPosts (20130208220635)
Migrating to RemoveTopicResponseActions (20130213021450)
Migrating to AddNewTopicDurationMinutesToUsers (20130213203300)
Migrating to AddDescriptionToCategories (20130221215017)
Migrating to AddGithubUserInfo (20130226015336)
Migrating to AddClearedPinnedToTopicUsers (20130306180148)
Migrating to RemoveExtraSpamRecord (20130311181327)
Migrating to AddExternalLinksInNewTabAnDisableQuotingToUser (20130313004922)
Migrating to AddForegroundColorToCategories (20130314093434)
Migrating to EnableTrigramSupport (20130315180637)
Migrating to AddReplyToUserIdToPost (20130319122248)
Migrating to AddUserIndexesToPostsAndTopics (20130320012100)
Migrating to AddModeratorToUser (20130320024345)
Migrating to RemoveOneboxesFromDb (20130321154905)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (2.7ms)[0m  DROP TABLE "post_onebox_renders"
  [1m[36m (1.2ms)[0m  [1mDROP TABLE "onebox_renders"[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130321154905')
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
Migrating to AddPercentRankToPosts (20130322183614)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (5.8ms)[0m  [1mALTER TABLE "posts" ADD COLUMN "percent_rank" float DEFAULT 1.0[0m
  [1m[35m (1.1ms)[0m  UPDATE posts SET percent_rank = x.percent_rank
 FROM (SELECT id, percent_rank()
 OVER (PARTITION BY topic_id ORDER BY SCORE DESC)
 FROM posts) AS x
 WHERE x.id = posts.id
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130322183614')[0m
  [1m[35m (0.9ms)[0m  COMMIT
Migrating to AddHotnessToCategory (20130326210101)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (4.1ms)[0m  ALTER TABLE "categories" ADD COLUMN "hotness" float DEFAULT 5.0 NOT NULL
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130326210101')[0m
  [1m[35m (0.8ms)[0m  COMMIT
Migrating to UpdateSiteSettingsForHot (20130327185852)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  UPDATE site_settings SET value = REPLACE(value, 'popular|', 'latest|hot|') where name = 'top_menu'
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130327185852')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to CreateHotTopics (20130328162943)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.9ms)[0m  DROP TABLE "hot_topics"
  [1m[36m (2.1ms)[0m  [1mCREATE TABLE "hot_topics" ("id" serial primary key, "topic_id" integer NOT NULL, "category_id" integer, "score" float NOT NULL) [0m
  [1m[35m (0.8ms)[0m  CREATE UNIQUE INDEX "index_hot_topics_on_topic_id" ON "hot_topics" ("topic_id")
  [1m[36m (0.6ms)[0m  [1mCREATE INDEX "index_hot_topics_on_score" ON "hot_topics" ("score" DESC)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130328162943')
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
Migrating to AddScoreToTopics (20130328182433)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "topics" ADD COLUMN "score" float[0m
  [1m[35m (4.6ms)[0m  ALTER TABLE "topics" ADD COLUMN "percent_rank" float DEFAULT 1.0 NOT NULL
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130328182433')[0m
  [1m[35m (0.7ms)[0m  COMMIT
Migrating to AddValuesToHotTopics (20130402210723)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "hot_topics" ADD COLUMN "random_bias" float
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "hot_topics" ADD COLUMN "random_multiplier" float[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "hot_topics" ADD COLUMN "days_ago_bias" float
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "hot_topics" ADD COLUMN "days_ago_multiplier" float[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "hot_topics" ADD COLUMN "hot_topic_type" integer
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130402210723')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to CreateSiteContents (20130404143437)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.5ms)[0m  DROP TABLE "site_contents"
  [1m[36m (1.5ms)[0m  [1mCREATE TABLE "site_contents" ("content_type" character varying(255) NOT NULL, "content" text NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.6ms)[0m  CREATE UNIQUE INDEX "index_site_contents_on_content_type" ON "site_contents" ("content_type")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130404143437')[0m
  [1m[35m (0.4ms)[0m  COMMIT
Migrating to AddUserExtras (20130404232558)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (5.8ms)[0m  ALTER TABLE "users" ADD COLUMN "likes_given" integer DEFAULT 0 NOT NULL
  [1m[36m (6.8ms)[0m  [1mALTER TABLE "users" ADD COLUMN "likes_received" integer DEFAULT 0 NOT NULL[0m
  [1m[35m (6.5ms)[0m  ALTER TABLE "users" ADD COLUMN "topic_reply_count" integer DEFAULT 0 NOT NULL
  [1m[36m (1.4ms)[0m  [1mUPDATE users u
SET
 likes_given = X.likes_given
FROM (
 SELECT
 a.user_id,
 COUNT(*) likes_given
 FROM user_actions a
 JOIN posts p ON p.id = a.target_post_id
 WHERE p.deleted_at IS NULL AND a.action_type = 1
 GROUP BY a.user_id
) as X
WHERE X.user_id = u.id
[0m
  [1m[35m (0.6ms)[0m  UPDATE users u
SET
 likes_received = Y.likes_received
FROM (
 SELECT
 a.user_id,
 COUNT(*) likes_received
 FROM user_actions a
 JOIN posts p ON p.id = a.target_post_id
 WHERE p.deleted_at IS NULL AND a.action_type = 2
 GROUP BY a.user_id
) as Y
WHERE Y.user_id = u.id

  [1m[36m (1.2ms)[0m  [1mUPDATE users u
SET
 topic_reply_count = Z.topic_reply_count
FROM (
 SELECT
 p.user_id,
 COUNT(DISTINCT topic_id) topic_reply_count
 FROM posts p
 JOIN topics t on t.id = p.topic_id
 WHERE t.user_id <> p.user_id AND
 p.deleted_at IS NULL AND t.deleted_at IS NULL
 GROUP BY p.user_id
) Z
WHERE
 Z.user_id = u.id
[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130404232558')
  [1m[36m (1.7ms)[0m  [1mCOMMIT[0m
Migrating to CreateAdminLogs (20130411205132)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (1.0ms)[0m  [1mDROP TABLE "admin_logs"[0m
  [1m[35m (2.6ms)[0m  CREATE TABLE "admin_logs" ("id" serial primary key, "action" integer NOT NULL, "admin_id" integer NOT NULL, "target_user_id" integer, "details" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130411205132')[0m
  [1m[35m (0.9ms)[0m  COMMIT
Migrating to CorrectCountsOnPosts (20130412015502)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "posts" RENAME COLUMN "custom_flag_count" TO "notify_moderators_count"
  [1m[36m (6.3ms)[0m  [1mALTER TABLE "posts" ADD COLUMN "notify_user_count" integer DEFAULT 0 NOT NULL[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130412015502')
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
Migrating to CorrectCountsOnTopics (20130412020156)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "topics" RENAME COLUMN "custom_flag_count" TO "notify_moderators_count"[0m
  [1m[35m (5.1ms)[0m  ALTER TABLE "topics" ADD COLUMN "notify_user_count" integer DEFAULT 0 NOT NULL
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130412020156')[0m
  [1m[35m (0.9ms)[0m  COMMIT
Migrating to CreateGroups (20130416004607)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (1.4ms)[0m  DROP TABLE "groups"
  [1m[36m (2.3ms)[0m  [1mCREATE TABLE "groups" ("id" serial primary key, "name" character varying(255) NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130416004607')
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
Migrating to GroupUsers (20130416004933)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.0ms)[0m  [1mDROP TABLE "group_users"[0m
  [1m[35m (2.4ms)[0m  CREATE TABLE "group_users" ("id" serial primary key, "group_id" integer NOT NULL, "user_id" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.7ms)[0m  [1mCREATE UNIQUE INDEX "index_group_users_on_group_id_and_user_id" ON "group_users" ("group_id", "user_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130416004933')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Migrating to AddSubtypeToTopics (20130416170855)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "topics" ADD COLUMN "subtype" character varying(255)[0m
  [1m[35m (0.6ms)[0m  update topics set subtype = 'user_to_user' where archetype = 'private_message'
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130416170855')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to IncreaseDataLengthOnNotifications (20130419195746)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.1ms)[0m  ALTER TABLE notifications ALTER COLUMN data TYPE VARCHAR(1000)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130419195746')[0m
  [1m[35m (0.5ms)[0m  COMMIT
Migrating to AddRelatedPostIdToPostActions (20130422050626)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "post_actions" ADD COLUMN "related_post_id" integer
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130422050626')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to AddSlugToTopics (20130424015746)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "topics" ADD COLUMN "slug" character varying(255)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130424015746')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to AddUserIdToIncomingLinks (20130424055025)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "incoming_links" ADD COLUMN "user_id" integer
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130424055025')[0m
  [1m[35m (0.4ms)[0m  COMMIT
Migrating to AllowNullsInIncomingLinks (20130426044914)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "incoming_links" ALTER COLUMN "referer" TYPE character varying(1000)
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "incoming_links" ALTER "referer" DROP NOT NULL[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "incoming_links" ALTER COLUMN "domain" TYPE character varying(100)
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "incoming_links" ALTER "domain" DROP NOT NULL[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130426044914')
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
Migrating to AddIncomingIpCurrentUserIdToIncomingLinks (20130426052257)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "incoming_links" ADD COLUMN "ip_address" inet[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "incoming_links" ADD COLUMN "current_user_id" int
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130426052257')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to AddUnstarredAtToTopicUsers (20130428194335)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "topic_users" ADD COLUMN "unstarred_at" timestamp
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130428194335')[0m
  [1m[35m (0.2ms)[0m  COMMIT
Migrating to AddSecurityToCategories (20130429000101)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (4.0ms)[0m  ALTER TABLE "categories" ADD COLUMN "secure" boolean DEFAULT 'f' NOT NULL
  [1m[36m (0.5ms)[0m  [1mDROP TABLE "category_groups"[0m
  [1m[35m (1.7ms)[0m  CREATE TABLE "category_groups" ("id" serial primary key, "category_id" integer NOT NULL, "group_id" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130429000101')[0m
  [1m[35m (0.8ms)[0m  COMMIT
Migrating to AddTopicAllowedGroups (20130430052751)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.9ms)[0m  DROP TABLE "topic_allowed_groups"
  [1m[36m (2.3ms)[0m  [1mCREATE TABLE "topic_allowed_groups" ("id" serial primary key, "group_id" integer NOT NULL, "integer" integer NOT NULL, "topic_id" integer NOT NULL) [0m
  [1m[35m (0.9ms)[0m  CREATE UNIQUE INDEX "index_topic_allowed_groups_on_group_id_and_topic_id" ON "topic_allowed_groups" ("group_id", "topic_id")
  [1m[36m (0.8ms)[0m  [1mCREATE UNIQUE INDEX "index_topic_allowed_groups_on_topic_id_and_group_id" ON "topic_allowed_groups" ("topic_id", "group_id")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130430052751')
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Migrating to FixTopicAllowedGroups (20130501105651)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "topic_allowed_groups" DROP "integer"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130501105651')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to AddAutomaticToGroups (20130506020935)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.8ms)[0m  [1mALTER TABLE "groups" ADD COLUMN "automatic" boolean DEFAULT 'f' NOT NULL[0m
  [1m[35m (0.2ms)[0m   ALTER SEQUENCE groups_id_seq START WITH 100

  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130506020935')[0m
  [1m[35m (0.4ms)[0m  COMMIT
Migrating to AddAutoCloseAtToTopics (20130506185042)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "topics" ADD COLUMN "auto_close_at" timestamp
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "topics" ADD COLUMN "auto_close_user_id" integer[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130506185042')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to AddUserCountToGroups (20130508040235)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.6ms)[0m  [1mALTER TABLE "groups" ADD COLUMN "user_count" integer DEFAULT 0 NOT NULL[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130508040235')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Migrating to UpdateSequenceForGroups (20130509040248)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1m SELECT setval('groups_id_seq', 40)
[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130509040248')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
Migrating to AddUniqueNameToGroups (20130509041351)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.9ms)[0m  [1mCREATE UNIQUE INDEX "index_groups_on_name" ON "groups" ("name")[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130509041351')
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
Migrating to AddAutoCloseDaysToCategories (20130515193551)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "categories" ADD COLUMN "auto_close_days" float[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130515193551')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to CreateCasUserInfos (20130521210140)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.3ms)[0m  [1mCREATE TABLE "cas_user_infos" ("id" serial primary key, "user_id" integer NOT NULL, "cas_user_id" character varying(255) NOT NULL, "username" character varying(255) NOT NULL, "first_name" character varying(255), "last_name" character varying(255), "email" character varying(255), "gender" character varying(255), "name" character varying(255), "link" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
PG::Error: ERROR:  relation "cas_user_infos" already exists
: CREATE TABLE "cas_user_infos" ("id" serial primary key, "user_id" integer NOT NULL, "cas_user_id" character varying(255) NOT NULL, "username" character varying(255) NOT NULL, "first_name" character varying(255), "last_name" character varying(255), "email" character varying(255), "gender" character varying(255), "name" character varying(255), "link" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[35m (0.1ms)[0m  ROLLBACK
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.4ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
  [1m[35m (0.4ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Migrating to CreateForumThreads (20120311163914)
Migrating to CreatePosts (20120311164326)
Migrating to CreateUsers (20120311170118)
Migrating to CreateForums (20120311201341)
Migrating to CreateSites (20120311210245)
Migrating to AddReplyToToPosts (20120416201606)
Migrating to AddViewsToForumThreads (20120420183447)
Migrating to AddPostsCountToForumThreads (20120423140906)
Migrating to FixPostIndices (20120423142820)
Migrating to RemoveLastPostId (20120423151548)
Migrating to AddDisplayUsernameToUsers (20120425145456)
Migrating to AddUserIdIndexToPosts (20120427150624)
Migrating to CookedMigration (20120427151452)
Migrating to CreateVestalVersions (20120427154330)
Migrating to AddVersionToPosts (20120427172031)
Migrating to AddCreatedByToForumThreads (20120502183240)
Migrating to AddLastPostUserIdToForumThreads (20120502192121)
Migrating to AddSiteIdToUsers (20120503205521)
Migrating to CreateExpressions (20120507144132)
Migrating to CreateExpressionTypes (20120507144222)
Migrating to AddReplyCountToPosts (20120514144549)
Migrating to AddFlagToExpressionTypes (20120514173920)
Migrating to AddDescriptionToExpressionTypes (20120514204934)
Migrating to AddQuotelessToPost (20120517200130)
Migrating to CreateReadPosts (20120518200115)
Migrating to CreateLastReadPosts (20120519182212)
Migrating to CreateViews (20120523180723)
Migrating to AddRepliesToForumThreads (20120523184307)
Migrating to AddFeaturedToForumThreads (20120523201329)
Migrating to AddAvgTimeToForumThreads (20120525194845)
Migrating to CreateUploads (20120529175956)
Migrating to CreateStars (20120529202707)
Migrating to CreateForumThreadUser (20120530150726)
Migrating to MigratePosted (20120530160745)
Migrating to AddIndexToForumThreads (20120530200724)
Migrating to CreateForumThreadLinks (20120530212912)
Migrating to AddTagsToForumThreads (20120614190726)
Migrating to AddQuoteCountToPosts (20120614202024)
Migrating to CreateBookmarks (20120615180517)
Migrating to AddReplyBelowToPosts (20120618152946)
Migrating to CreatePostTimings (20120618212349)
Migrating to CreateMessageBus (20120618214856)
Migrating to FixPostTimings (20120619150807)
Migrating to DropReadPosts (20120619153349)
Migrating to AddPostNumberToBookmarks (20120619172714)
Migrating to AddSeenPostCountToForumThreadUsers (20120621155351)
Migrating to AddDeletedAtToForumThreads (20120621190310)
Migrating to CreateNotifications (20120622200242)
Migrating to AddSeenNotificationIdToUsers (20120625145714)
Migrating to AddDeletedAtToPosts (20120625162318)
Migrating to AddHighestPostNumberToForumThreads (20120625174544)
Migrating to AddImageUrlToForumThreads (20120625195326)
Migrating to RenameExpressionTypeId (20120629143908)
Migrating to DenormalizeExpressions (20120629150253)
Migrating to MakeExpressionsLessGeneric (20120629151243)
Migrating to CreateIncomingLinks (20120629182637)
Migrating to CreateReplies (20120702211427)
Migrating to AddReflectionToForumThreadLinks (20120703184734)
Migrating to AddIncomingLinkCountToPosts (20120703201312)
Migrating to AddIncomingLinkCountToForumThreads (20120703203623)
Migrating to AddBookmarkCountToPosts (20120703210004)
Migrating to AddAvgTimeToPosts (20120704160659)
Migrating to AddViewCountToPosts (20120704201743)
Migrating to AddUserToVersions (20120705181724)
Migrating to AddLastPostedAtToUsers (20120708210305)
Migrating to CreateCategories (20120712150500)
Migrating to AddCategoryIdToForumThreads (20120712151934)
Migrating to CreateCategoryFeaturedThreads (20120713201324)
Migrating to CreateSiteSettings (20120716020835)
Migrating to AddStatsToCategories (20120716173544)
Migrating to CreateUserOpenIds (20120718044955)
Migrating to AddEmailHashedPasswordNameSaltToUsers (20120719004636)
Migrating to AddUsernameLowerToUsers (20120720013733)
Migrating to AddAuthTokenToUsers (20120720044246)
Migrating to AddForumIdToCategories (20120720162422)
Migrating to AddNotNullsToUserOpenIds (20120723051512)
Migrating to AddLastSeenAtToUsers (20120724234502)
Migrating to AddWebsiteToUsers (20120724234711)
Migrating to AddExcerptToCategories (20120725183347)
Migrating to AddInvisibleToForumThread (20120726201830)
Migrating to AddUserIdToCategories (20120726235129)
Migrating to RemoveExcerptFromCategories (20120727005556)
Migrating to RenameInvisible (20120727150428)
Migrating to AddThreadCountsToCategories (20120727213543)
Migrating to AddIconToExpressionTypes (20120802151210)
Migrating to AddAdminFlagToUsers (20120803191426)
Migrating to AddNewPasswordNewSaltEmailTokenToUsers (20120806030641)
Migrating to RemoveNewPasswordStuffFromUser (20120806062617)
Migrating to CreateActions (20120807223020)
Migrating to RemoveSiteId (20120809020415)
Migrating to RemoveForumId (20120809030647)
Migrating to CorrectIndexingOnPosts (20120809053414)
Migrating to RemoveIndexForNow (20120809154750)
Migrating to CreatePostActions (20120809174649)
Migrating to CreatePostActionTypes (20120809175110)
Migrating to MigrateBookmarksToPostActions (20120809201855)
Migrating to RenameActionsToUserActions (20120810064839)
Migrating to RetireExpressions (20120812235417)
Migrating to RenameExpressionColumnsInForumThread (20120813004347)
Migrating to RenameExpressionColumnsInPosts (20120813042912)
Migrating to CreateForumThreadLinkClicks (20120813201426)
Migrating to AddUniqueIndexToForumThreadLinks (20120815004411)
Migrating to AddPostTypeToPosts (20120815180106)
Migrating to AddModeratorPostsCountToForumThreads (20120815204733)
Migrating to AddUniqueConstraintToUserActions (20120816050526)
Migrating to AddForumThreadStates (20120816205537)
Migrating to AddStarredAtToForumThreadUser (20120816205538)
Migrating to AddSearchIndices (20120820191804)
Migrating to AddBumpedAtToForumThreads (20120821191616)
Migrating to AddSlugToCategories (20120823205956)
Migrating to CreateCategoryFeaturedUsers (20120824171908)
Migrating to CreateOneboxRenders (20120828204209)
Migrating to CreatePostOneboxRenders (20120828204624)
Migrating to AddPreviewToOneboxRenders (20120830182736)
Migrating to RemoveDescriptionFromSiteSettings (20120910171504)
Migrating to RenameViewsToReads (20120918152319)
Migrating to AddSubTagToForumThreads (20120918205931)
Migrating to AddHasBestOfToForumThreads (20120919152846)
Migrating to AddTwitterUserInfo (20120921055428)
Migrating to CreateArchetypes (20120921155050)
Migrating to AddMetaDataToForumThreads (20120921162512)
Migrating to CreateArchetypeOptions (20120921163606)
Migrating to AddHstoreExtension (20120924182000)
Migrating to AddVoteCountToPosts (20120924182031)
Migrating to RemoveEnglishFromPostActionTypes (20120925171620)
Migrating to AddSequenceToPostActionTypes (20120925190802)
Migrating to AddSortOrderToPosts (20120928170023)
Migrating to AddEmailStuffToUsers (20121009161116)
Migrating to CreateEmailLogs (20121011155904)
Migrating to ConvertArchetypes (20121017162924)
Migrating to RenameForumThreadTables (20121018103721)
Migrating to CreateTopicAllowedUsers (20121018133039)
Migrating to FixNotificationData (20121018182709)
Migrating to DropAvatarUrlFromUsers (20121106015500)
Migrating to AddPostActionIdToNotifications (20121108193516)
Migrating to CreateTrustLevels (20121109164630)
Migrating to BioMarkdownSupport (20121113200844)
Migrating to CreateFacebookUserInfos (20121113200845)
Migrating to RenameStickyToPinned (20121115172544)
Migrating to AddMoreEmailSettingsToUser (20121116212424)
Migrating to AddEmailSettingsToUsers (20121119190529)
Migrating to AddEmailDirectToUsers (20121119200843)
Migrating to CreateInvites (20121121202035)
Migrating to CreateTopicInvites (20121121205215)
Migrating to AddMutedAtToTopicUser (20121122033316)
Migrating to MakePostNumberDistinct (20121123054127)
Migrating to CreateUserVisits (20121123063630)
Migrating to CreateEmailTokens (20121129160035)
Migrating to RemoveEmailTokenFromUsers (20121129184948)
Migrating to CreateDrafts (20121130010400)
Migrating to AddLinkPostIdToTopicLinks (20121130191818)
Migrating to AddVisitedAtToTopicUser (20121202225421)
Migrating to RenameSeenNotificaitonId (20121203181719)
Migrating to FixLinkPostId (20121204183855)
Migrating to AddAnotherFeaturedUserToTopics (20121204193747)
Migrating to AddApprovedToUsers (20121205162143)
Migrating to AddNotificationsToTopicUsers (20121207000741)
Migrating to CreateSiteCustomizations (20121211233131)
Migrating to AddOverrideDefaultStyleToSiteCustomization (20121216230719)
Migrating to AddTopicsEnteredToUsers (20121218205642)
Migrating to AddLastEditorIdToPosts (20121224072204)
Migrating to CreateDraftSequence (20121224095139)
Migrating to AddSequenceToDrafts (20121224100650)
Migrating to AddDeletedAtToInvites (20121228192219)
Migrating to AddDigestAfterDaysToUsers (20130107165207)
Migrating to AddPreviousVisitAtToUsers (20130108195847)
Migrating to MergeMuteOptionsOnTopicUsers (20130115012140)
Migrating to CorrectDefaultOnNotificationLevel (20130115021937)
Migrating to OopsUnwatchABoatOfWatchedStuff (20130115043603)
Migrating to RemoveSubTagFromTopics (20130116151829)
Migrating to FixSearch (20130120222728)
Migrating to AddTrackingToTopicUsers (20130121231352)
Migrating to AddAutoTrackTopicsToUser (20130122051134)
Migrating to AddAutoTrackAfterSecondsAndBanningAndDobToUser (20130122232825)
Migrating to AutoTrackAllTopicsRepliedTo (20130123070909)
Migrating to AddHiddenToPosts (20130125002652)
Migrating to AddFieldsToPostAction (20130125030305)
Migrating to CorrectIndexOnPostAction (20130125031122)
Migrating to RemoveTrustLevels (20130127213646)
Migrating to TrustLevelDefaultNull (20130128182013)
Migrating to RemovePmReflections (20130129010625)
Migrating to AddTimeReadToUsers (20130129163244)
Migrating to AddDaysVisitedToUsers (20130129174845)
Migrating to RemoveIndexFromViews (20130130154611)
Migrating to AddCustomFlagCountToTopics (20130131055710)
Migrating to AddColumnSummariesToPostsAndTopics (20130201000828)
Migrating to AddPositionToPostActionType (20130201023409)
Migrating to AddLastVersionAtToPosts (20130203204338)
Migrating to AddIpAddressToUsers (20130204000159)
Migrating to AlterFacebookUserId (20130205021905)
Migrating to AddUserDeletedToPosts (20130207200019)
Migrating to RemoveReplyBelowPostNumberFromPosts (20130208220635)
Migrating to RemoveTopicResponseActions (20130213021450)
Migrating to AddNewTopicDurationMinutesToUsers (20130213203300)
Migrating to AddDescriptionToCategories (20130221215017)
Migrating to AddGithubUserInfo (20130226015336)
Migrating to AddClearedPinnedToTopicUsers (20130306180148)
Migrating to RemoveExtraSpamRecord (20130311181327)
Migrating to AddExternalLinksInNewTabAnDisableQuotingToUser (20130313004922)
Migrating to AddForegroundColorToCategories (20130314093434)
Migrating to EnableTrigramSupport (20130315180637)
Migrating to AddReplyToUserIdToPost (20130319122248)
Migrating to AddUserIndexesToPostsAndTopics (20130320012100)
Migrating to AddModeratorToUser (20130320024345)
Migrating to RemoveOneboxesFromDb (20130321154905)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  DROP TABLE "post_onebox_renders"
  [1m[36m (1.0ms)[0m  [1mDROP TABLE "onebox_renders"[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130321154905')
  [1m[36m (2.0ms)[0m  [1mCOMMIT[0m
Migrating to AddPercentRankToPosts (20130322183614)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (5.6ms)[0m  [1mALTER TABLE "posts" ADD COLUMN "percent_rank" float DEFAULT 1.0[0m
  [1m[35m (1.1ms)[0m  UPDATE posts SET percent_rank = x.percent_rank
 FROM (SELECT id, percent_rank()
 OVER (PARTITION BY topic_id ORDER BY SCORE DESC)
 FROM posts) AS x
 WHERE x.id = posts.id
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130322183614')[0m
  [1m[35m (0.9ms)[0m  COMMIT
Migrating to AddHotnessToCategory (20130326210101)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (4.3ms)[0m  ALTER TABLE "categories" ADD COLUMN "hotness" float DEFAULT 5.0 NOT NULL
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130326210101')[0m
  [1m[35m (0.7ms)[0m  COMMIT
Migrating to UpdateSiteSettingsForHot (20130327185852)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.9ms)[0m  UPDATE site_settings SET value = REPLACE(value, 'popular|', 'latest|hot|') where name = 'top_menu'
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130327185852')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to CreateHotTopics (20130328162943)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (2.1ms)[0m  CREATE TABLE "hot_topics" ("id" serial primary key, "topic_id" integer NOT NULL, "category_id" integer, "score" float NOT NULL) 
  [1m[36m (0.6ms)[0m  [1mCREATE UNIQUE INDEX "index_hot_topics_on_topic_id" ON "hot_topics" ("topic_id")[0m
  [1m[35m (0.6ms)[0m  CREATE INDEX "index_hot_topics_on_score" ON "hot_topics" ("score" DESC)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130328162943')[0m
  [1m[35m (0.4ms)[0m  COMMIT
Migrating to AddScoreToTopics (20130328182433)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "topics" ADD COLUMN "score" float
  [1m[36m (4.5ms)[0m  [1mALTER TABLE "topics" ADD COLUMN "percent_rank" float DEFAULT 1.0 NOT NULL[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130328182433')
  [1m[36m (0.6ms)[0m  [1mCOMMIT[0m
Migrating to AddValuesToHotTopics (20130402210723)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "hot_topics" ADD COLUMN "random_bias" float[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "hot_topics" ADD COLUMN "random_multiplier" float
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "hot_topics" ADD COLUMN "days_ago_bias" float[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "hot_topics" ADD COLUMN "days_ago_multiplier" float
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "hot_topics" ADD COLUMN "hot_topic_type" integer[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130402210723')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to CreateSiteContents (20130404143437)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.4ms)[0m  [1mCREATE TABLE "site_contents" ("content_type" character varying(255) NOT NULL, "content" text NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.6ms)[0m  CREATE UNIQUE INDEX "index_site_contents_on_content_type" ON "site_contents" ("content_type")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130404143437')[0m
  [1m[35m (0.4ms)[0m  COMMIT
Migrating to AddUserExtras (20130404232558)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (5.0ms)[0m  ALTER TABLE "users" ADD COLUMN "likes_given" integer DEFAULT 0 NOT NULL
  [1m[36m (5.9ms)[0m  [1mALTER TABLE "users" ADD COLUMN "likes_received" integer DEFAULT 0 NOT NULL[0m
  [1m[35m (6.9ms)[0m  ALTER TABLE "users" ADD COLUMN "topic_reply_count" integer DEFAULT 0 NOT NULL
  [1m[36m (1.9ms)[0m  [1mUPDATE users u
SET
 likes_given = X.likes_given
FROM (
 SELECT
 a.user_id,
 COUNT(*) likes_given
 FROM user_actions a
 JOIN posts p ON p.id = a.target_post_id
 WHERE p.deleted_at IS NULL AND a.action_type = 1
 GROUP BY a.user_id
) as X
WHERE X.user_id = u.id
[0m
  [1m[35m (0.5ms)[0m  UPDATE users u
SET
 likes_received = Y.likes_received
FROM (
 SELECT
 a.user_id,
 COUNT(*) likes_received
 FROM user_actions a
 JOIN posts p ON p.id = a.target_post_id
 WHERE p.deleted_at IS NULL AND a.action_type = 2
 GROUP BY a.user_id
) as Y
WHERE Y.user_id = u.id

  [1m[36m (0.9ms)[0m  [1mUPDATE users u
SET
 topic_reply_count = Z.topic_reply_count
FROM (
 SELECT
 p.user_id,
 COUNT(DISTINCT topic_id) topic_reply_count
 FROM posts p
 JOIN topics t on t.id = p.topic_id
 WHERE t.user_id <> p.user_id AND
 p.deleted_at IS NULL AND t.deleted_at IS NULL
 GROUP BY p.user_id
) Z
WHERE
 Z.user_id = u.id
[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130404232558')
  [1m[36m (1.5ms)[0m  [1mCOMMIT[0m
Migrating to CreateAdminLogs (20130411205132)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (3.4ms)[0m  [1mCREATE TABLE "admin_logs" ("id" serial primary key, "action" integer NOT NULL, "admin_id" integer NOT NULL, "target_user_id" integer, "details" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130411205132')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
Migrating to CorrectCountsOnPosts (20130412015502)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "posts" RENAME COLUMN "custom_flag_count" TO "notify_moderators_count"[0m
  [1m[35m (5.2ms)[0m  ALTER TABLE "posts" ADD COLUMN "notify_user_count" integer DEFAULT 0 NOT NULL
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130412015502')[0m
  [1m[35m (0.9ms)[0m  COMMIT
Migrating to CorrectCountsOnTopics (20130412020156)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "topics" RENAME COLUMN "custom_flag_count" TO "notify_moderators_count"
  [1m[36m (5.0ms)[0m  [1mALTER TABLE "topics" ADD COLUMN "notify_user_count" integer DEFAULT 0 NOT NULL[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130412020156')
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
Migrating to CreateGroups (20130416004607)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (2.2ms)[0m  [1mCREATE TABLE "groups" ("id" serial primary key, "name" character varying(255) NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130416004607')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
Migrating to GroupUsers (20130416004933)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.9ms)[0m  [1mCREATE TABLE "group_users" ("id" serial primary key, "group_id" integer NOT NULL, "user_id" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.7ms)[0m  CREATE UNIQUE INDEX "index_group_users_on_group_id_and_user_id" ON "group_users" ("group_id", "user_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130416004933')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to AddSubtypeToTopics (20130416170855)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "topics" ADD COLUMN "subtype" character varying(255)
  [1m[36m (0.5ms)[0m  [1mupdate topics set subtype = 'user_to_user' where archetype = 'private_message'[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130416170855')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to IncreaseDataLengthOnNotifications (20130419195746)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (1.2ms)[0m  [1mALTER TABLE notifications ALTER COLUMN data TYPE VARCHAR(1000)[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130419195746')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to AddRelatedPostIdToPostActions (20130422050626)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "post_actions" ADD COLUMN "related_post_id" integer[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130422050626')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to AddSlugToTopics (20130424015746)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "topics" ADD COLUMN "slug" character varying(255)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130424015746')
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
Migrating to AddUserIdToIncomingLinks (20130424055025)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "incoming_links" ADD COLUMN "user_id" integer[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130424055025')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to AllowNullsInIncomingLinks (20130426044914)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "incoming_links" ALTER COLUMN "referer" TYPE character varying(1000)[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "incoming_links" ALTER "referer" DROP NOT NULL
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "incoming_links" ALTER COLUMN "domain" TYPE character varying(100)[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "incoming_links" ALTER "domain" DROP NOT NULL
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130426044914')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to AddIncomingIpCurrentUserIdToIncomingLinks (20130426052257)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "incoming_links" ADD COLUMN "ip_address" inet
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "incoming_links" ADD COLUMN "current_user_id" int[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130426052257')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to AddUnstarredAtToTopicUsers (20130428194335)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "topic_users" ADD COLUMN "unstarred_at" timestamp[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130428194335')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to AddSecurityToCategories (20130429000101)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (3.5ms)[0m  [1mALTER TABLE "categories" ADD COLUMN "secure" boolean DEFAULT 'f' NOT NULL[0m
  [1m[35m (1.6ms)[0m  CREATE TABLE "category_groups" ("id" serial primary key, "category_id" integer NOT NULL, "group_id" integer NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130429000101')[0m
  [1m[35m (0.7ms)[0m  COMMIT
Migrating to AddTopicAllowedGroups (20130430052751)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (2.3ms)[0m  CREATE TABLE "topic_allowed_groups" ("id" serial primary key, "group_id" integer NOT NULL, "integer" integer NOT NULL, "topic_id" integer NOT NULL) 
  [1m[36m (0.7ms)[0m  [1mCREATE UNIQUE INDEX "index_topic_allowed_groups_on_group_id_and_topic_id" ON "topic_allowed_groups" ("group_id", "topic_id")[0m
  [1m[35m (0.8ms)[0m  CREATE UNIQUE INDEX "index_topic_allowed_groups_on_topic_id_and_group_id" ON "topic_allowed_groups" ("topic_id", "group_id")
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130430052751')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to FixTopicAllowedGroups (20130501105651)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "topic_allowed_groups" DROP "integer"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130501105651')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to AddAutomaticToGroups (20130506020935)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.5ms)[0m  ALTER TABLE "groups" ADD COLUMN "automatic" boolean DEFAULT 'f' NOT NULL
  [1m[36m (0.2ms)[0m  [1m ALTER SEQUENCE groups_id_seq START WITH 100
[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130506020935')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Migrating to AddAutoCloseAtToTopics (20130506185042)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "topics" ADD COLUMN "auto_close_at" timestamp[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "topics" ADD COLUMN "auto_close_user_id" integer
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130506185042')[0m
  [1m[35m (0.4ms)[0m  COMMIT
Migrating to AddUserCountToGroups (20130508040235)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.4ms)[0m  ALTER TABLE "groups" ADD COLUMN "user_count" integer DEFAULT 0 NOT NULL
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130508040235')[0m
  [1m[35m (0.6ms)[0m  COMMIT
Migrating to UpdateSequenceForGroups (20130509040248)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m   SELECT setval('groups_id_seq', 40)

  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130509040248')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to AddUniqueNameToGroups (20130509041351)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  CREATE UNIQUE INDEX "index_groups_on_name" ON "groups" ("name")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130509041351')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to AddAutoCloseDaysToCategories (20130515193551)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "categories" ADD COLUMN "auto_close_days" float
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130515193551')[0m
  [1m[35m (0.2ms)[0m  COMMIT
Migrating to CreateCasUserInfos (20130521210140)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (3.1ms)[0m  CREATE TABLE "cas_user_infos" ("id" serial primary key, "user_id" integer NOT NULL, "cas_user_id" character varying(255) NOT NULL, "username" character varying(255) NOT NULL, "first_name" character varying(255), "last_name" character varying(255), "email" character varying(255), "gender" character varying(255), "name" character varying(255), "link" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.6ms)[0m  [1mCREATE UNIQUE INDEX "index_cas_user_infos_on_user_id" ON "cas_user_infos" ("user_id")[0m
  [1m[35m (0.5ms)[0m  CREATE UNIQUE INDEX "index_cas_user_infos_on_cas_user_id" ON "cas_user_infos" ("cas_user_id")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130521210140')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to RenameSearchTables (20130522193615)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "users_search" RENAME TO "user_search_data"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "user_search_data" RENAME COLUMN "id" TO "user_id"[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "categories_search" RENAME TO "category_search_data"
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "category_search_data" RENAME COLUMN "id" TO "category_id"[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "posts_search" RENAME TO "post_search_data"
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "post_search_data" RENAME COLUMN "id" TO "post_id"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130522193615')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
Migrating to AddLikeScoreToPosts (20130527152648)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (4.5ms)[0m  [1mALTER TABLE "posts" ADD COLUMN "like_score" integer DEFAULT 0 NOT NULL[0m
  [1m[35m (1.4ms)[0m  UPDATE posts p
 set like_score = x.like_score
 FROM (SELECT pa.post_id,
 SUM(CASE
 WHEN u.admin OR u.moderator THEN 3
 ELSE 1
 END) AS like_score
 FROM post_actions AS pa
 INNER JOIN users AS u ON u.id = pa.user_id
 GROUP BY pa.post_id) AS x
 WHERE x.post_id = p.id
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130527152648')[0m
  [1m[35m (1.0ms)[0m  COMMIT
Migrating to AddRankToCategoryFeaturedTopics (20130528174147)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (2.1ms)[0m  ALTER TABLE "category_featured_topics" ADD COLUMN "rank" integer DEFAULT 0 NOT NULL
  [1m[36m (0.9ms)[0m  [1mCREATE INDEX "index_category_featured_topics_on_category_id_and_rank" ON "category_featured_topics" ("category_id", "rank")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130528174147')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
Migrating to AddStaffTookActionToPostActions (20130531210816)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (3.0ms)[0m  [1mALTER TABLE "post_actions" ADD COLUMN "staff_took_action" boolean DEFAULT 'f' NOT NULL[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130531210816')
  [1m[36m (0.7ms)[0m  [1mCOMMIT[0m
Migrating to AddBlockedToUsers (20130603192412)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (6.3ms)[0m  [1mALTER TABLE "users" ADD COLUMN "blocked" boolean DEFAULT 'f'[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130603192412')
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
Migrating to AddAutoCloseStartedAtToTopics (20130606190601)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "topics" ADD COLUMN "auto_close_started_at" timestamp[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130606190601')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Migrating to AddReplyKeyToEmailLogs (20130610201033)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "email_logs" ADD COLUMN "reply_key" character varying(32)[0m
  [1m[35m (0.6ms)[0m  CREATE INDEX "index_email_logs_on_reply_key" ON "email_logs" ("reply_key")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130610201033')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to CreatePostUploadJoinTable (20130612200846)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  CREATE TABLE "posts_uploads" ("post_id" integer, "upload_id" integer) 
  [1m[36m (0.8ms)[0m  [1mCREATE INDEX "index_posts_uploads_on_post_id" ON "posts_uploads" ("post_id")[0m
  [1m[35m (0.8ms)[0m  CREATE INDEX "index_posts_uploads_on_upload_id" ON "posts_uploads" ("upload_id")
  [1m[36m (0.6ms)[0m  [1mCREATE UNIQUE INDEX "index_posts_uploads_on_post_id_and_upload_id" ON "posts_uploads" ("post_id", "upload_id")[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130612200846')
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
Migrating to DropPostsUploads (20130613211700)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.5ms)[0m  [1mDROP TABLE "posts_uploads"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130613211700')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Migrating to CreatePostUploads (20130613212230)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (2.0ms)[0m  [1mCREATE TABLE "post_uploads" ("id" serial primary key, "post_id" integer NOT NULL, "upload_id" integer NOT NULL) [0m
  [1m[35m (0.7ms)[0m  create unique index idx_unique_post_uploads on post_uploads(post_id, upload_id)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130613212230')[0m
  [1m[35m (0.4ms)[0m  COMMIT
Migrating to RemoveTopicIdFromUploads (20130615073305)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "uploads" DROP "topic_id"
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130615073305')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to AddShaToUploads (20130615075557)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "uploads" ADD COLUMN "sha" character varying(255)
  [1m[36m (0.8ms)[0m  [1mCREATE UNIQUE INDEX "index_uploads_on_sha" ON "uploads" ("sha")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130615075557')
  [1m[36m (0.2ms)[0m  [1mCOMMIT[0m
Migrating to CreateOptimizedImages (20130616082327)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (2.6ms)[0m  [1mCREATE TABLE "optimized_images" ("id" serial primary key, "sha" character varying(255) NOT NULL, "ext" character varying(255) NOT NULL, "width" integer NOT NULL, "height" integer NOT NULL, "upload_id" integer NOT NULL) [0m
  [1m[35m (0.6ms)[0m  CREATE INDEX "index_optimized_images_on_upload_id" ON "optimized_images" ("upload_id")
  [1m[36m (0.6ms)[0m  [1mCREATE UNIQUE INDEX "index_optimized_images_on_upload_id_and_width_and_height" ON "optimized_images" ("upload_id", "width", "height")[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130616082327')
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Migrating to RenameShaAndExtColumns (20130617014127)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "optimized_images" RENAME COLUMN "sha" TO "sha1"[0m
  [1m[35m (2.3ms)[0m  ALTER TABLE "optimized_images" ALTER COLUMN "sha1" TYPE character varying(40)
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "optimized_images" RENAME COLUMN "ext" TO "extension"[0m
  [1m[35m (1.5ms)[0m  ALTER TABLE "optimized_images" ALTER COLUMN "extension" TYPE character varying(10)
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130617014127')[0m
  [1m[35m (0.7ms)[0m  COMMIT
  [1m[36m (1.0ms)[0m  [1mSELECT version FROM schema_migrations ORDER BY version[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mPostActionType Load (0.5ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 4 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 5 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 8 LIMIT 1[0m
  [1m[35mSQL (4.4ms)[0m  INSERT INTO "post_action_types" ("created_at", "icon", "id", "is_flag", "name_key", "position", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["created_at", Mon, 17 Jun 2013 11:38:18 EDT -04:00], ["icon", nil], ["id", 8], ["is_flag", true], ["name_key", "spam"], ["position", 6], ["updated_at", Mon, 17 Jun 2013 11:38:18 EDT -04:00]]
  [1m[36m (0.3ms)[0m  [1mSELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);[0m
  [1m[35mPostActionType Load (0.3ms)[0m  SELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 6 LIMIT 1
  [1m[36m (0.3ms)[0m  [1mUPDATE "post_action_types" SET "name_key" = 'notify_user', "updated_at" = '2013-06-17 15:38:18.439585' WHERE "post_action_types"."id" = 6[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 7 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  UPDATE "post_action_types" SET "name_key" = 'notify_moderators', "position" = 8, "updated_at" = '2013-06-17 15:38:18.442230' WHERE "post_action_types"."id" = 7
  [1m[36m (0.2ms)[0m  [1mSELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);[0m
  [1m[35m (0.4ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.4ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
  [1m[35m (0.3ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
  [1m[36m (1.0ms)[0m  [1mSELECT version FROM schema_migrations ORDER BY version[0m
  [1m[35m (108.6ms)[0m  DROP DATABASE IF EXISTS "discourse_test"
  [1m[36m (224.6ms)[0m  [1mCREATE DATABASE "discourse_test" ENCODING = 'utf8'[0m
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.4ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m


Started GET "/t/congratulations-on-getting-vagrant-up/53/2" for 127.0.0.1 at 2013-06-17 08:39:00 -0700
Processing by TopicsController#show as HTML
  Parameters: {"slug"=>"congratulations-on-getting-vagrant-up", "topic_id"=>"53", "post_number"=>"2"}
  [1m[35mCategory Load (1.8ms)[0m  SELECT "categories".* FROM "categories" WHERE (NOT categories.secure) ORDER BY topic_count desc
  [1m[36mTopic Load (3.5ms)[0m  [1mSELECT id, title, slug FROM "topics" WHERE "topics"."id" IN (2) AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mSQL (2.1ms)[0m  UPDATE "topics" SET "slug" = 'meta-category-definition' WHERE "topics"."id" = 2 AND ("topics"."deleted_at" IS NULL)
  [1m[36mPostActionType Load (1.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" ORDER BY position asc[0m
  [1m[35mTopic Load (1.4ms)[0m  SELECT "topics".* FROM "topics" WHERE "topics"."id" = 53 AND ("topics"."deleted_at" IS NULL) LIMIT 1
  [1m[36mTopic Load (2.5ms)[0m  [1mSELECT "topics".* FROM "topics" WHERE "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (category_id IS NULL OR category_id IN (
 SELECT c.id FROM categories c
 WHERE NOT c.secure)) ORDER BY views desc[0m
  [1m[35mTopic Load (1.6ms)[0m  SELECT "topics".* FROM "topics" WHERE "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (category_id IS NULL OR category_id IN (
 SELECT c.id FROM categories c
 WHERE NOT c.secure)) ORDER BY created_at desc
  [1m[36mSQL (1.8ms)[0m  [1mUPDATE "topics" SET "slug" = 'what-is-meta' WHERE "topics"."id" = 3 AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mSQL (1.6ms)[0m  UPDATE "topics" SET "slug" = 'the-discourse-admin-quick-start-guide' WHERE "topics"."id" = 1 AND ("topics"."deleted_at" IS NULL)
  [1m[36mSQL (1.5ms)[0m  [1mUPDATE "topics" SET "slug" = 'what-is-meta' WHERE "topics"."id" = 3 AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mSQL (1.5ms)[0m  UPDATE "topics" SET "slug" = 'the-discourse-admin-quick-start-guide' WHERE "topics"."id" = 1 AND ("topics"."deleted_at" IS NULL)
  Rendered exceptions/not_found.html.erb within layouts/no_js (10.4ms)
  Rendered common/_special_font_face.html.erb (0.9ms)
  [1m[36mSiteCustomization Load (1.5ms)[0m  [1mSELECT "site_customizations".* FROM "site_customizations" WHERE "site_customizations"."enabled" = 't' LIMIT 1[0m
  Rendered common/_discourse_stylesheet.html.erb (196.2ms)
Completed 404 Not Found in 945ms (Views: 198.6ms | ActiveRecord: 37.2ms)


Started GET "/" for 127.0.0.1 at 2013-06-17 08:39:06 -0700
Processing by ListController#latest as HTML
  [1m[35m (1.3ms)[0m  SHOW max_identifier_length
  [1m[36mSQL (2.6ms)[0m  [1mSELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') ORDER BY CASE WHEN topics.category_id IS NULL and (topics.pinned_at IS NOT NULL) THEN 0 ELSE 1 END, topics.bumped_at DESC LIMIT 30[0m
  [1m[35mUser Load (1.6ms)[0m  SELECT id, email, username FROM "users" WHERE "users"."id" IN (1)
  [1m[36mPost Load (1.8ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mPost Load (1.6ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  Rendered list/list.erb within layouts/application (1.1ms)
  Rendered common/_special_font_face.html.erb (0.3ms)
  Rendered common/_discourse_stylesheet.html.erb (5.1ms)
  Rendered common/_discourse_javascript.html.erb (528.2ms)
Completed 200 OK in 802ms (Views: 547.0ms | ActiveRecord: 21.9ms)


Started GET "/t/1/1.json?track_visit=true" for 127.0.0.1 at 2013-06-17 08:39:13 -0700
Processing by TopicsController#show as JSON
  Parameters: {"track_visit"=>"true", "topic_id"=>"1", "post_number"=>"1"}
  [1m[36mTopic Load (1.5ms)[0m  [1mSELECT "topics".* FROM "topics" WHERE "topics"."id" = 1 AND ("topics"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mPost Load (1.9ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 1 AND ("posts"."deleted_at" IS NULL) ORDER BY @(post_number - 1) LIMIT 1
  [1m[36m (1.6ms)[0m  [1mSELECT id FROM "posts" WHERE "posts"."topic_id" = 1 AND ("posts"."deleted_at" IS NULL) ORDER BY sort_order[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "posts" WHERE "posts"."id" IN (1) AND ("posts"."deleted_at" IS NULL)
  [1m[36m (1.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (3.5ms)[0m  INSERT INTO "views" ("ip", "parent_id", "parent_type", "user_id", "viewed_at") VALUES ($1, $2, $3, $4, $5)  [["ip", 2130706433], ["parent_id", 1], ["parent_type", "Topic"], ["user_id", nil], ["viewed_at", Mon, 17 Jun 2013]]
  [1m[36mSQL (72.0ms)[0m  [1mUPDATE "topics" SET views = views + 1 WHERE "topics"."id" = 1 AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35m (1.3ms)[0m  COMMIT
  [1m[36m (2.1ms)[0m  [1mSELECT COUNT(*) FROM "posts" WHERE "posts"."id" IN (1) AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35mPost Load (1.5ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."id" IN (1) AND ("posts"."deleted_at" IS NULL) ORDER BY sort_order
  [1m[36mUser Load (1.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35m (2.1ms)[0m  SELECT
 l.post_id,
 l.url,
 l.clicks,
 t.title,
 l.internal,
 l.reflection
 FROM topic_links l
 LEFT JOIN topics t ON t.id = l.link_topic_id
 LEFT JOIN categories AS c ON c.id = t.category_id
 WHERE (t.deleted_at IS NULL) AND (l.post_id IN (1)) AND (NOT COALESCE(c.secure, false))
 ORDER BY reflection ASC, clicks DESC
  [1m[36mPostAction Load (1.6ms)[0m  [1mSELECT "post_actions".* FROM "post_actions" WHERE "post_actions"."post_id" IN (1) AND "post_actions"."user_id" = 0 AND ("post_actions"."deleted_at" IS NULL)[0m
  [1m[35m (1.5ms)[0m  SELECT MAX("posts"."post_number") AS max_id FROM "posts" WHERE "posts"."topic_id" = 1 AND ("posts"."deleted_at" IS NULL)
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "posts" WHERE "posts"."topic_id" = 1 AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35mUser Load (1.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mGroup Load (1.7ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "topic_allowed_groups" ON "groups"."id" = "topic_allowed_groups"."group_id" WHERE "topic_allowed_groups"."topic_id" = 1
  [1m[36m (1.8ms)[0m  [1mSELECT ftl.url,
 ft.title,
 ftl.link_topic_id,
 ftl.reflection,
 ftl.internal,
 MIN(ftl.user_id) AS user_id,
 SUM(clicks) AS clicks
 FROM topic_links AS ftl
 LEFT JOIN topics AS ft ON ftl.link_topic_id = ft.id
 LEFT JOIN categories AS c ON c.id = ft.category_id
 WHERE (ftl.topic_id = 1) AND (ft.deleted_at IS NULL) AND (NOT COALESCE(c.secure, false))
 GROUP BY ftl.url, ft.title, ftl.link_topic_id, ftl.reflection, ftl.internal
 ORDER BY clicks DESC[0m
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) AS count_all, user_id AS user_id FROM "posts" WHERE "posts"."topic_id" = 1 AND ("posts"."deleted_at" IS NULL) GROUP BY user_id ORDER BY count_all desc LIMIT 24
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mSQL (2.7ms)[0m  SELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."closed" = 'f' AND "topics"."archived" = 'f' AND "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') AND (topics.id NOT IN (1)) ORDER BY RANDOM() LIMIT 5
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT id, email, username FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mPost Load (1.6ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mGroup Load (1.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name[0m
  [1m[35mGroup Load (1.2ms)[0m  SELECT "groups".* FROM "groups" ORDER BY name
  [1m[36mPost Load (1.4ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".* FROM "groups" ORDER BY name[0m
Completed 200 OK in 326ms (Views: 0.3ms | ActiveRecord: 134.2ms)


Started POST "/session" for 127.0.0.1 at 2013-06-17 08:39:44 -0700
Processing by SessionController#create as */*
  Parameters: {"login"=>"forumadmin", "password"=>"[FILTERED]"}
  [1m[35mUser Load (1.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username_lower" = 'forumadmin' LIMIT 1
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "email_tokens" WHERE "email_tokens"."user_id" = 1 AND "email_tokens"."email" = 'team@discourse.org' AND "email_tokens"."confirmed" = 't'[0m
  [1m[35mUserAction Load (2.3ms)[0m  
 SELECT action_type, COUNT(*) count
 FROM user_actions a
 JOIN topics t ON t.id = a.target_topic_id
 LEFT JOIN posts p on p.id = a.target_post_id
 JOIN posts p2 on p2.topic_id = a.target_topic_id and p2.post_number = 1
 LEFT JOIN categories c ON c.id = t.category_id
 WHERE (a.user_id = 1) AND (p.deleted_at is null and p2.deleted_at is null and t.deleted_at is null) AND (a.action_type not in (3)) AND (t.archetype != 'private_message') AND ((c.secure IS NULL OR c.secure = 'f'))
 GROUP BY action_type

  [1m[36mInvite Load (1.3ms)[0m  [1mSELECT "invites".* FROM "invites" WHERE "invites"."user_id" = 1 AND ("invites"."deleted_at" IS NULL) AND (redeemed_at is not null) LIMIT 1[0m
Completed 200 OK in 288ms (Views: 0.1ms | ActiveRecord: 21.4ms)


Started POST "/login" for 127.0.0.1 at 2013-06-17 08:39:44 -0700
Processing by StaticController#enter as HTML
  Parameters: {"username"=>"forumadmin", "password"=>"[FILTERED]", "redirect"=>"http://localhost:3000/t/the-discourse-admin-quick-start-guide/1", "authenticity_token"=>""}
WARNING: Can't verify CSRF token authenticity
  [1m[35mUser Load (67.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."auth_token" = '8102fd64abe0a669dc300e5141b0ce55' LIMIT 1
  [1m[36mUserVisit Load (1.3ms)[0m  [1mSELECT "user_visits".* FROM "user_visits" WHERE "user_visits"."user_id" = 1 AND "user_visits"."visited_at" = '2013-06-17' LIMIT 1[0m
  [1m[35mSQL (2.9ms)[0m  UPDATE "users" SET "days_visited" = 2 WHERE "users"."id" = 1
  [1m[36m (0.9ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "user_visits" ("user_id", "visited_at") VALUES ($1, $2) RETURNING "id"  [["user_id", 1], ["visited_at", Mon, 17 Jun 2013]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.4ms)[0m  UPDATE "users" SET "previous_visit_at" = '2013-03-21 02:20:11.000000' WHERE "users"."id" = 1
  [1m[36mSQL (1.3ms)[0m  [1mUPDATE "users" SET "last_seen_at" = '2013-06-17 15:39:44' WHERE "users"."id" = 1[0m
  [1m[35mSQL (1.4ms)[0m  UPDATE "users" SET "ip_address" = '127.0.0.1' WHERE "users"."id" = 1
  [1m[36mCategory Load (1.1ms)[0m  [1mSELECT id FROM "categories" WHERE "categories"."secure" = 't'[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT id FROM "categories" WHERE "categories"."secure" = 't'
  [1m[36mCategory Load (1.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE (NOT categories.secure) ORDER BY topic_count desc[0m
  [1m[35mTopic Load (1.3ms)[0m  SELECT id, title, slug FROM "topics" WHERE "topics"."id" IN (2) AND ("topics"."deleted_at" IS NULL)
  [1m[36mPostActionType Load (1.1ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" ORDER BY position asc[0m
  [1m[35m (1.6ms)[0m  SELECT COUNT(*) AS count_all, notification_type AS notification_type FROM "notifications" WHERE "notifications"."user_id" = 1 AND (id > 0 and read = false) GROUP BY notification_type
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."user_id" = 1 AND (read = false AND notification_type = 6)[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "topics" WHERE "topics"."user_id" = 1 AND ("topics"."deleted_at" IS NULL)
  [1m[36m (2.5ms)[0m  [1m SELECT u.id AS user_id, topics.id AS topic_id, topics.created_at, highest_post_number, last_read_post_number, c.name AS category_name
 FROM users u
 FULL OUTER JOIN topics ON 1=1
 LEFT JOIN topic_users tu ON tu.topic_id = topics.id AND tu.user_id = u.id
 LEFT JOIN categories c ON c.id = topics.category_id
 WHERE u.id IN (1) AND
 topics.archetype <> 'private_message' AND
 ((tu.last_read_post_number < topics.highest_post_number AND COALESCE(tu.notification_level, 1) >= 2) OR (topics.created_at >= CASE
 WHEN COALESCE(u.new_topic_duration_minutes, 2880) = -1 THEN u.created_at
 WHEN COALESCE(u.new_topic_duration_minutes, 2880) = -2 THEN COALESCE(u.previous_visit_at,u.created_at)
 ELSE ('2013-06-17 15:39:44'::timestamp - INTERVAL '1 MINUTE' * COALESCE(u.new_topic_duration_minutes, 2880))
 END AND tu.last_read_post_number IS NULL AND COALESCE(tu.notification_level, 2) >= 2)) AND
 (topics.visible OR u.admin OR u.moderator) AND
 topics.deleted_at IS NULL AND
 ( category_id IS NULL OR NOT c.secure OR category_id IN (
 SELECT c2.id FROM categories c2
 JOIN category_groups cg ON cg.category_id = c2.id
 JOIN group_users gu ON gu.user_id = u.id AND cg.group_id = gu.group_id
 WHERE c2.secure )
 )

[0m
Redirected to http://localhost:3000/t/the-discourse-admin-quick-start-guide/1
Completed 302 Found in 138ms (ActiveRecord: 99.7ms)


Started GET "/t/the-discourse-admin-quick-start-guide/1" for 127.0.0.1 at 2013-06-17 08:39:44 -0700
Processing by TopicsController#show as HTML
  Parameters: {"slug"=>"the-discourse-admin-quick-start-guide", "topic_id"=>"1"}
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mCategory Load (1.2ms)[0m  [1mSELECT id FROM "categories" WHERE "categories"."secure" = 't'[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) AS count_all, notification_type AS notification_type FROM "notifications" WHERE "notifications"."user_id" = 1 AND (id > 0 and read = false) GROUP BY notification_type
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."user_id" = 1 AND (read = false AND notification_type = 6)[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "topics" WHERE "topics"."user_id" = 1 AND ("topics"."deleted_at" IS NULL)
  [1m[36m (1.6ms)[0m  [1m SELECT u.id AS user_id, topics.id AS topic_id, topics.created_at, highest_post_number, last_read_post_number, c.name AS category_name
 FROM users u
 FULL OUTER JOIN topics ON 1=1
 LEFT JOIN topic_users tu ON tu.topic_id = topics.id AND tu.user_id = u.id
 LEFT JOIN categories c ON c.id = topics.category_id
 WHERE u.id IN (1) AND
 topics.archetype <> 'private_message' AND
 ((tu.last_read_post_number < topics.highest_post_number AND COALESCE(tu.notification_level, 1) >= 2) OR (topics.created_at >= CASE
 WHEN COALESCE(u.new_topic_duration_minutes, 2880) = -1 THEN u.created_at
 WHEN COALESCE(u.new_topic_duration_minutes, 2880) = -2 THEN COALESCE(u.previous_visit_at,u.created_at)
 ELSE ('2013-06-17 15:39:44'::timestamp - INTERVAL '1 MINUTE' * COALESCE(u.new_topic_duration_minutes, 2880))
 END AND tu.last_read_post_number IS NULL AND COALESCE(tu.notification_level, 2) >= 2)) AND
 (topics.visible OR u.admin OR u.moderator) AND
 topics.deleted_at IS NULL AND
 ( category_id IS NULL OR NOT c.secure OR category_id IN (
 SELECT c2.id FROM categories c2
 JOIN category_groups cg ON cg.category_id = c2.id
 JOIN group_users gu ON gu.user_id = u.id AND cg.group_id = gu.group_id
 WHERE c2.secure )
 )

[0m
  [1m[35mTopic Load (1.2ms)[0m  SELECT "topics".* FROM "topics" WHERE "topics"."id" = 1 AND ("topics"."deleted_at" IS NULL) LIMIT 1
  [1m[36m (1.2ms)[0m  [1mSELECT id FROM "posts" WHERE "posts"."topic_id" = 1 ORDER BY sort_order[0m
  [1m[35m (1.1ms)[0m  select sequence from draft_sequences where user_id = 1 and draft_key = 'topic_1'
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "posts" WHERE "posts"."id" IN (1)[0m
  [1m[35m (67.3ms)[0m  BEGIN
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "views" ("ip", "parent_id", "parent_type", "user_id", "viewed_at") VALUES ($1, $2, $3, $4, $5)[0m  [["ip", 2130706433], ["parent_id", 1], ["parent_type", "Topic"], ["user_id", 1], ["viewed_at", Mon, 17 Jun 2013]]
  [1m[35mSQL (1.4ms)[0m  UPDATE "topics" SET views = views + 1 WHERE "topics"."id" = 1 AND ("topics"."deleted_at" IS NULL)
  [1m[36m (2.5ms)[0m  [1mCOMMIT[0m
  [1m[35mSQL (1.4ms)[0m  UPDATE "topic_users" SET "last_visited_at" = '2013-06-17 15:39:44' WHERE "topic_users"."topic_id" = 1 AND "topic_users"."user_id" = 1
  [1m[36mTopicUser Load (1.1ms)[0m  [1mSELECT "topic_users".* FROM "topic_users" WHERE "topic_users"."topic_id" = 1 AND "topic_users"."user_id" = 1[0m
  [1m[35mUserAction Load (1.6ms)[0m  SELECT "user_actions".* FROM "user_actions" WHERE "user_actions"."action_type" = 10 AND "user_actions"."user_id" = 1 AND "user_actions"."acting_user_id" = 1 AND "user_actions"."target_topic_id" = 1 AND "user_actions"."target_post_id" = -1 AND "user_actions"."created_at" IS NULL LIMIT 1
  [1m[36mDraft Load (1.2ms)[0m  [1mSELECT "drafts".* FROM "drafts" WHERE "drafts"."user_id" = 1 AND "drafts"."draft_key" = 'topic_1' LIMIT 1[0m
  [1m[35mCategory Exists (1.2ms)[0m  SELECT 1 AS one FROM "categories" WHERE "categories"."topic_id" = 1 LIMIT 1
  [1m[36mTopicUser Load (1.5ms)[0m  [1mSELECT "topic_users".* FROM "topic_users" WHERE "topic_users"."topic_id" = 1 AND "topic_users"."user_id" = 1 LIMIT 1[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "posts" WHERE "posts"."id" IN (1)
  [1m[36mPost Load (1.4ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."id" IN (1) ORDER BY sort_order[0m
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" IN (1)
  [1m[36mCategory Load (1.5ms)[0m  [1mSELECT id FROM "categories" WHERE "categories"."secure" = 't'[0m
  [1m[35m (1.4ms)[0m  SELECT
 l.post_id,
 l.url,
 l.clicks,
 t.title,
 l.internal,
 l.reflection
 FROM topic_links l
 LEFT JOIN topics t ON t.id = l.link_topic_id
 LEFT JOIN categories AS c ON c.id = t.category_id
 WHERE (t.deleted_at IS NULL) AND (l.post_id IN (1)) AND (NOT COALESCE(c.secure, false))
 ORDER BY reflection ASC, clicks DESC
  [1m[36m (1.4ms)[0m  [1mSELECT post_number FROM "posts" WHERE "posts"."id" IN (1) ORDER BY sort_order[0m
  [1m[35m (1.5ms)[0m  SELECT post_number, post_number FROM "post_timings" WHERE "post_timings"."topic_id" = 1 AND "post_timings"."user_id" = 1 AND "post_timings"."post_number" IN (1)
  [1m[36mPostAction Load (1.7ms)[0m  [1mSELECT "post_actions".* FROM "post_actions" WHERE "post_actions"."post_id" IN (1) AND "post_actions"."user_id" = 1 AND ("post_actions"."deleted_at" IS NULL)[0m
  [1m[35m (1.2ms)[0m  SELECT MAX("posts"."post_number") AS max_id FROM "posts" WHERE "posts"."topic_id" = 1
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "posts" WHERE "posts"."topic_id" = 1[0m
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mGroup Load (1.3ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "topic_allowed_groups" ON "groups"."id" = "topic_allowed_groups"."group_id" WHERE "topic_allowed_groups"."topic_id" = 1
  [1m[36m (1.5ms)[0m  [1mSELECT ftl.url,
 ft.title,
 ftl.link_topic_id,
 ftl.reflection,
 ftl.internal,
 MIN(ftl.user_id) AS user_id,
 SUM(clicks) AS clicks
 FROM topic_links AS ftl
 LEFT JOIN topics AS ft ON ftl.link_topic_id = ft.id
 LEFT JOIN categories AS c ON c.id = ft.category_id
 WHERE (ftl.topic_id = 1) AND (ft.deleted_at IS NULL) AND (NOT COALESCE(c.secure, false))
 GROUP BY ftl.url, ft.title, ftl.link_topic_id, ftl.reflection, ftl.internal
 ORDER BY clicks DESC[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) AS count_all, user_id AS user_id FROM "posts" WHERE "posts"."topic_id" = 1 AND ("posts"."deleted_at" IS NULL) GROUP BY user_id ORDER BY count_all desc LIMIT 24
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT id FROM "categories" WHERE "categories"."secure" = 't'
  [1m[36mSQL (2.4ms)[0m  [1mSELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" LEFT OUTER JOIN topic_users AS tu ON (topics.id = tu.topic_id AND tu.user_id = 1) WHERE "topics"."closed" = 'f' AND "topics"."archived" = 'f' AND "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') AND (tu.last_read_post_number < topics.highest_post_number) AND (COALESCE(tu.notification_level, 1) >= 2) AND (topics.id NOT IN (1)) ORDER BY CASE
 WHEN topics.category_id IS NULL and (COALESCE(topics.pinned_at, '2010-01-01') > COALESCE(tu.cleared_pinned_at, '2010-01-01'))
 THEN '3000-01-01'
 ELSE topics.bumped_at
 END DESC LIMIT 5[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT id FROM "categories" WHERE "categories"."secure" = 't'
  [1m[36mSQL (69.2ms)[0m  [1mSELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" LEFT OUTER JOIN topic_users AS tu ON (topics.id = tu.topic_id AND tu.user_id = 1) WHERE "topics"."closed" = 'f' AND "topics"."archived" = 'f' AND "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') AND (topics.created_at >= '2013-06-15 15:39:45.020946') AND (tu.last_read_post_number IS NULL) AND (COALESCE(tu.notification_level, 2) >= 2) AND (topics.id NOT IN (1)) ORDER BY CASE
 WHEN topics.category_id IS NULL and (COALESCE(topics.pinned_at, '2010-01-01') > COALESCE(tu.cleared_pinned_at, '2010-01-01'))
 THEN '3000-01-01'
 ELSE topics.bumped_at
 END DESC LIMIT 5[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT id FROM "categories" WHERE "categories"."secure" = 't'
  [1m[36mSQL (2.3ms)[0m  [1mSELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" LEFT OUTER JOIN topic_users AS tu ON (topics.id = tu.topic_id AND tu.user_id = 1) WHERE "topics"."closed" = 'f' AND "topics"."archived" = 'f' AND "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') AND (topics.id NOT IN (1)) ORDER BY RANDOM() LIMIT 5[0m
  [1m[35mTopicUser Load (1.4ms)[0m  SELECT "topic_users".* FROM "topic_users" WHERE "topic_users"."topic_id" IN (2, 3) AND "topic_users"."user_id" = 1
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT id, email, username FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mPost Load (1.5ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mGroup Load (1.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name[0m
  [1m[35mGroup Load (1.4ms)[0m  SELECT "groups".* FROM "groups" ORDER BY name
  [1m[36mPost Load (1.5ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".* FROM "groups" ORDER BY name[0m
  [1m[35mPost Load (1.8ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 1 ORDER BY "posts"."id" DESC LIMIT 1
  Rendered topics/show.html.erb within layouts/application (89.2ms)
  Rendered common/_special_font_face.html.erb (0.3ms)
  Rendered common/_discourse_stylesheet.html.erb (439.5ms)
  Rendered common/_discourse_javascript.html.erb (1240.2ms)
Completed 200 OK in 2058ms (Views: 1772.1ms | ActiveRecord: 212.6ms)


Started GET "/" for 127.0.0.1 at 2013-06-17 08:39:57 -0700
Processing by ListController#latest as HTML
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mCategory Load (1.0ms)[0m  SELECT id FROM "categories" WHERE "categories"."secure" = 't'
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) AS count_all, notification_type AS notification_type FROM "notifications" WHERE "notifications"."user_id" = 1 AND (id > 0 and read = false) GROUP BY notification_type[0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM "notifications" WHERE "notifications"."user_id" = 1 AND (read = false AND notification_type = 6)
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "topics" WHERE "topics"."user_id" = 1 AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35m (1.8ms)[0m   SELECT u.id AS user_id, topics.id AS topic_id, topics.created_at, highest_post_number, last_read_post_number, c.name AS category_name
 FROM users u
 FULL OUTER JOIN topics ON 1=1
 LEFT JOIN topic_users tu ON tu.topic_id = topics.id AND tu.user_id = u.id
 LEFT JOIN categories c ON c.id = topics.category_id
 WHERE u.id IN (1) AND
 topics.archetype <> 'private_message' AND
 ((tu.last_read_post_number < topics.highest_post_number AND COALESCE(tu.notification_level, 1) >= 2) OR (topics.created_at >= CASE
 WHEN COALESCE(u.new_topic_duration_minutes, 2880) = -1 THEN u.created_at
 WHEN COALESCE(u.new_topic_duration_minutes, 2880) = -2 THEN COALESCE(u.previous_visit_at,u.created_at)
 ELSE ('2013-06-17 15:39:57'::timestamp - INTERVAL '1 MINUTE' * COALESCE(u.new_topic_duration_minutes, 2880))
 END AND tu.last_read_post_number IS NULL AND COALESCE(tu.notification_level, 2) >= 2)) AND
 (topics.visible OR u.admin OR u.moderator) AND
 topics.deleted_at IS NULL AND
 ( category_id IS NULL OR NOT c.secure OR category_id IN (
 SELECT c2.id FROM categories c2
 JOIN category_groups cg ON cg.category_id = c2.id
 JOIN group_users gu ON gu.user_id = u.id AND cg.group_id = gu.group_id
 WHERE c2.secure )
 )


  [1m[36mCACHE (0.0ms)[0m  [1mSELECT id FROM "categories" WHERE "categories"."secure" = 't'[0m
  [1m[35m (1.1ms)[0m  select sequence from draft_sequences where user_id = 1 and draft_key = 'new_topic'
  [1m[36mDraft Load (1.1ms)[0m  [1mSELECT "drafts".* FROM "drafts" WHERE "drafts"."user_id" = 1 AND "drafts"."draft_key" = 'new_topic' LIMIT 1[0m
  [1m[35mSQL (2.5ms)[0m  SELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" LEFT OUTER JOIN topic_users AS tu ON (topics.id = tu.topic_id AND tu.user_id = 1) WHERE ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') ORDER BY CASE
 WHEN topics.category_id IS NULL and (COALESCE(topics.pinned_at, '2010-01-01') > COALESCE(tu.cleared_pinned_at, '2010-01-01'))
 THEN '3000-01-01'
 ELSE topics.bumped_at
 END DESC LIMIT 30
  [1m[36mTopicUser Load (1.8ms)[0m  [1mSELECT "topic_users".* FROM "topic_users" WHERE "topic_users"."topic_id" IN (3, 2, 1) AND "topic_users"."user_id" = 1[0m
  [1m[35mUser Load (1.4ms)[0m  SELECT id, email, username FROM "users" WHERE "users"."id" IN (1)
  [1m[36mPost Load (1.7ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mPost Load (69.4ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  Rendered list/list.erb within layouts/application (0.4ms)
  Rendered common/_special_font_face.html.erb (0.2ms)
  Rendered common/_discourse_stylesheet.html.erb (5.1ms)
  Rendered common/_discourse_javascript.html.erb (32.4ms)
Completed 200 OK in 155ms (Views: 41.6ms | ActiveRecord: 86.7ms)


Started GET "/admin" for 127.0.0.1 at 2013-06-17 08:40:03 -0700
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
Processing by Admin::AdminController#index as HTML
  [1m[35mUser Load (1.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mCategory Load (1.2ms)[0m  [1mSELECT id FROM "categories" WHERE "categories"."secure" = 't'[0m
  [1m[35m (1.8ms)[0m  SELECT COUNT(*) AS count_all, notification_type AS notification_type FROM "notifications" WHERE "notifications"."user_id" = 1 AND (id > 0 and read = false) GROUP BY notification_type
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."user_id" = 1 AND (read = false AND notification_type = 6)[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "topics" WHERE "topics"."user_id" = 1 AND ("topics"."deleted_at" IS NULL)
  [1m[36m (1.9ms)[0m  [1m SELECT u.id AS user_id, topics.id AS topic_id, topics.created_at, highest_post_number, last_read_post_number, c.name AS category_name
 FROM users u
 FULL OUTER JOIN topics ON 1=1
 LEFT JOIN topic_users tu ON tu.topic_id = topics.id AND tu.user_id = u.id
 LEFT JOIN categories c ON c.id = topics.category_id
 WHERE u.id IN (1) AND
 topics.archetype <> 'private_message' AND
 ((tu.last_read_post_number < topics.highest_post_number AND COALESCE(tu.notification_level, 1) >= 2) OR (topics.created_at >= CASE
 WHEN COALESCE(u.new_topic_duration_minutes, 2880) = -1 THEN u.created_at
 WHEN COALESCE(u.new_topic_duration_minutes, 2880) = -2 THEN COALESCE(u.previous_visit_at,u.created_at)
 ELSE ('2013-06-17 15:40:03'::timestamp - INTERVAL '1 MINUTE' * COALESCE(u.new_topic_duration_minutes, 2880))
 END AND tu.last_read_post_number IS NULL AND COALESCE(tu.notification_level, 2) >= 2)) AND
 (topics.visible OR u.admin OR u.moderator) AND
 topics.deleted_at IS NULL AND
 ( category_id IS NULL OR NOT c.secure OR category_id IN (
 SELECT c2.id FROM categories c2
 JOIN category_groups cg ON cg.category_id = c2.id
 JOIN group_users gu ON gu.user_id = u.id AND cg.group_id = gu.group_id
 WHERE c2.secure )
 )

[0m
  Rendered default/empty.html.erb within layouts/application (0.4ms)
  Rendered common/_special_font_face.html.erb (0.3ms)
  Rendered common/_discourse_stylesheet.html.erb (5.3ms)
  Rendered common/_discourse_javascript.html.erb (33.0ms)
Completed 200 OK in 65ms (Views: 45.6ms | ActiveRecord: 9.2ms)


Started GET "/admin/dashboard" for 127.0.0.1 at 2013-06-17 08:40:05 -0700
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
Processing by Admin::DashboardController#index as JSON
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35m (1.7ms)[0m  SELECT COUNT(*) AS count_all, visited_at AS visited_at FROM "user_visits" WHERE (visited_at >= '2013-05-18 15:40:06.013455') GROUP BY visited_at ORDER BY visited_at
  [1m[36m (2.0ms)[0m  [1mSELECT COUNT(*) AS count_all, date(created_at) AS date_created_at FROM "users" WHERE (created_at > '2013-05-18 15:40:06.016552') GROUP BY date(created_at) ORDER BY date(created_at)[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "users" 
  [1m[36m (2.9ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE (created_at > '2013-04-18 15:40:06.021022' and created_at < '2013-05-18 15:40:06.021173')[0m
  [1m[35m (1.6ms)[0m  SELECT COUNT(*) AS count_all, date(created_at) AS date_created_at FROM "topics" WHERE ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (created_at > '2013-05-18 15:40:06.025943') GROUP BY date(created_at) ORDER BY date(created_at)
  [1m[36m (2.0ms)[0m  [1mSELECT COUNT(*) FROM "topics" WHERE ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message')[0m
  [1m[35m (2.2ms)[0m  SELECT COUNT(*) FROM "topics" WHERE ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (created_at > '2013-04-18 15:40:06.031914' and created_at < '2013-05-18 15:40:06.032121')
  [1m[36m (2.8ms)[0m  [1mSELECT COUNT(*) AS count_all, date(posts.created_at) AS date_posts_created_at FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (posts.created_at > '2013-05-18 15:40:06.035868') GROUP BY date(posts.created_at) ORDER BY date(posts.created_at)[0m
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message')
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (posts.created_at > '2013-04-18 15:40:06.043672' and posts.created_at < '2013-05-18 15:40:06.043822')[0m
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-18')
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-19')[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-20')
  [1m[36m (1.6ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-21')[0m
  [1m[35m (2.0ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-22')
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-23')[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-24')
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-25')[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-26')
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-27')[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-28')
  [1m[36m (1.1ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-29')[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-30')
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-31')[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-01')
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-02')[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-03')
  [1m[36m (1.1ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-04')[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-05')
  [1m[36m (1.1ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-06')[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-07')
  [1m[36m (1.1ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-08')[0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-09')
  [1m[36m (1.1ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-10')[0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-11')
  [1m[36m (1.1ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-12')[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-13')
  [1m[36m (1.1ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-14')[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-15')
  [1m[36m (1.1ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-16')[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-17')
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL)[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (created_at > '2013-04-18 15:40:06.104620' and created_at < '2013-05-18 15:40:06.104724')
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) AS count_all, trust_level AS trust_level FROM "users" GROUP BY trust_level[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) AS count_all, date(created_at) AS date_created_at FROM "post_actions" WHERE "post_actions"."post_action_type_id" = 2 AND (created_at > '2013-05-18 15:40:06.108355') GROUP BY date(created_at) ORDER BY date(created_at)
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" = 2[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" = 2 AND (created_at > '2013-04-18 15:40:06.111445' and created_at < '2013-05-18 15:40:06.111552')
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) AS count_all, date(created_at) AS date_created_at FROM "post_actions" WHERE "post_actions"."post_action_type_id" = 1 AND (created_at > '2013-05-18 15:40:06.113229') GROUP BY date(created_at) ORDER BY date(created_at)[0m
  [1m[35m (68.1ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" = 1
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" = 1 AND (created_at > '2013-04-18 15:40:06.183417' and created_at < '2013-05-18 15:40:06.183618')[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) AS count_all, date(starred_at) AS date_starred_at FROM "topic_users" WHERE (starred_at > '2013-05-18 15:40:06.186046') GROUP BY date(starred_at) ORDER BY date(starred_at)
  [1m[36m (1.1ms)[0m  [1mSELECT COUNT(*) FROM "topic_users" WHERE "topic_users"."starred" = 't'[0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM "topic_users" WHERE "topic_users"."starred" = 't' AND (starred_at > '2013-04-18 15:40:06.189842' and starred_at < '2013-05-18 15:40:06.189996')
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) AS count_all, date(created_at) AS date_created_at FROM "email_logs" WHERE (created_at > '2013-05-18 15:40:06.196392') GROUP BY date(created_at) ORDER BY date(created_at)[0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM "email_logs" 
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "email_logs" WHERE (created_at > '2013-04-18 15:40:06.205869' and created_at < '2013-05-18 15:40:06.206026')[0m
  [1m[35m (2.5ms)[0m  SELECT COUNT(*) AS count_all, date(posts.created_at) AS date_posts_created_at FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'user_to_user') AND (posts.created_at > '2013-05-18 15:40:06.208696') GROUP BY date(posts.created_at) ORDER BY date(posts.created_at)
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'user_to_user')[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'user_to_user') AND (posts.created_at > '2013-04-18 15:40:06.215735' and posts.created_at < '2013-05-18 15:40:06.215891')
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) AS count_all, date(posts.created_at) AS date_posts_created_at FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'system_message') AND (posts.created_at > '2013-05-18 15:40:06.218623') GROUP BY date(posts.created_at) ORDER BY date(posts.created_at)[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'system_message')
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'system_message') AND (posts.created_at > '2013-04-18 15:40:06.223425' and posts.created_at < '2013-05-18 15:40:06.223569')[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) AS count_all, date(posts.created_at) AS date_posts_created_at FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'moderator_warning') AND (posts.created_at > '2013-05-18 15:40:06.226068') GROUP BY date(posts.created_at) ORDER BY date(posts.created_at)
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'moderator_warning')[0m
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'moderator_warning') AND (posts.created_at > '2013-04-18 15:40:06.230517' and posts.created_at < '2013-05-18 15:40:06.230646')
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) AS count_all, date(posts.created_at) AS date_posts_created_at FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'notify_moderators') AND (posts.created_at > '2013-05-18 15:40:06.233230') GROUP BY date(posts.created_at) ORDER BY date(posts.created_at)[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'notify_moderators')
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'notify_moderators') AND (posts.created_at > '2013-04-18 15:40:06.237787' and posts.created_at < '2013-05-18 15:40:06.237917')[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) AS count_all, date(posts.created_at) AS date_posts_created_at FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'notify_user') AND (posts.created_at > '2013-05-18 15:40:06.240495') GROUP BY date(posts.created_at) ORDER BY date(posts.created_at)
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'notify_user')[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'notify_user') AND (posts.created_at > '2013-04-18 15:40:06.245141' and posts.created_at < '2013-05-18 15:40:06.245279')
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."admin" = 't'[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "users" WHERE "users"."moderator" = 't'
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."blocked" = 't'[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) AS count_all, users.username AS users_username FROM "incoming_links" INNER JOIN "users" ON "users"."id" = "incoming_links"."user_id" WHERE (incoming_links.created_at > '2013-05-18 15:40:06.254824' AND incoming_links.user_id IS NOT NULL) GROUP BY users.username
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(DISTINCT incoming_links.topic_id) AS count_incoming_links_topic_id, users.username AS users_username FROM "incoming_links" INNER JOIN "users" ON "users"."id" = "incoming_links"."user_id" WHERE (incoming_links.created_at > '2013-05-18 15:40:06.254824' AND incoming_links.user_id IS NOT NULL) GROUP BY users.username[0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) AS count_all, domain AS domain FROM "incoming_links" WHERE (created_at > '2013-05-18 15:40:06.267401' AND domain IS NOT NULL) GROUP BY domain
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(DISTINCT "incoming_links"."topic_id") AS count_topic_id, domain AS domain FROM "incoming_links" WHERE (created_at > '2013-05-18 15:40:06.267401' AND domain IS NOT NULL) GROUP BY domain[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(DISTINCT "incoming_links"."user_id") AS count_user_id, domain AS domain FROM "incoming_links" WHERE (created_at > '2013-05-18 15:40:06.267401' AND domain IS NOT NULL) GROUP BY domain
  [1m[36m (1.1ms)[0m  [1mSELECT COUNT(*) AS count_all, topic_id AS topic_id FROM "incoming_links" WHERE (created_at > '2013-05-18 15:40:06.272673' AND topic_id IS NOT NULL) GROUP BY topic_id[0m
  [1m[35mTopic Load (1.1ms)[0m  SELECT id, slug, title FROM "topics" WHERE ("topics"."deleted_at" IS NULL) AND (id in (NULL))
Completed 200 OK in 441ms (Views: 0.1ms | ActiveRecord: 187.0ms)


Started GET "/admin/dashboard/problems" for 127.0.0.1 at 2013-06-17 08:40:06 -0700
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
Processing by Admin::DashboardController#problems as JSON
  [1m[35mUser Load (1.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Completed 200 OK in 33ms (Views: 0.4ms | ActiveRecord: 1.8ms)


Started GET "/admin/site_settings" for 127.0.0.1 at 2013-06-17 08:40:36 -0700
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (1.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::SiteSettingsController#index as JSON
  [1m[36mUser Load (1.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
Completed 200 OK in 108ms (Views: 0.1ms | ActiveRecord: 1.6ms)


Started PUT "/admin/site_settings/company_full_name" for 127.0.0.1 at 2013-06-17 08:41:04 -0700
  [1m[35mUser Exists (1.5ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::SiteSettingsController#update as */*
  Parameters: {"value"=>"DGS", "id"=>"company_full_name"}
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUserVisit Load (1.3ms)[0m  [1mSELECT "user_visits".* FROM "user_visits" WHERE "user_visits"."user_id" = 1 AND "user_visits"."visited_at" = '2013-06-17' LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  UPDATE "users" SET "last_seen_at" = '2013-06-17 15:41:04' WHERE "users"."id" = 1
  [1m[36mSiteSetting Load (1.1ms)[0m  [1mSELECT "site_settings".* FROM "site_settings" WHERE "site_settings"."name" = 'company_full_name' LIMIT 1[0m
  [1m[35m (72.5ms)[0m  BEGIN
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "site_settings" ("created_at", "data_type", "name", "updated_at", "value") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Mon, 17 Jun 2013 11:41:04 EDT -04:00], ["data_type", 1], ["name", :company_full_name], ["updated_at", Mon, 17 Jun 2013 11:41:04 EDT -04:00], ["value", "DGS"]]
  [1m[35m (1.1ms)[0m  COMMIT
  [1m[36mSiteSetting Load (1.2ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
  Rendered text template (0.0ms)
Completed 200 OK in 99ms (Views: 1.2ms | ActiveRecord: 85.0ms)


Started PUT "/admin/site_settings/company_short_name" for 127.0.0.1 at 2013-06-17 08:41:05 -0700
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::SiteSettingsController#update as */*
  Parameters: {"value"=>"DGS", "id"=>"company_short_name"}
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mSiteSetting Load (1.3ms)[0m  [1mSELECT "site_settings".* FROM "site_settings" WHERE "site_settings"."name" = 'company_short_name' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  BEGIN
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "site_settings" ("created_at", "data_type", "name", "updated_at", "value") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Mon, 17 Jun 2013 11:41:05 EDT -04:00], ["data_type", 1], ["name", :company_short_name], ["updated_at", Mon, 17 Jun 2013 11:41:05 EDT -04:00], ["value", "DGS"]]
  [1m[35m (2.5ms)[0m  COMMIT
  [1m[36mSiteSetting Load (1.2ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
  Rendered text template (0.0ms)
Completed 200 OK in 16ms (Views: 0.5ms | ActiveRecord: 8.7ms)


Started PUT "/admin/site_settings/company_domain" for 127.0.0.1 at 2013-06-17 08:42:04 -0700
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::SiteSettingsController#update as */*
  Parameters: {"value"=>"clanxp.aws.af.cm", "id"=>"company_domain"}
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mSiteSetting Load (1.2ms)[0m  [1mSELECT "site_settings".* FROM "site_settings" WHERE "site_settings"."name" = 'company_domain' LIMIT 1[0m
  [1m[35m (1.1ms)[0m  BEGIN
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "site_settings" ("created_at", "data_type", "name", "updated_at", "value") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Mon, 17 Jun 2013 11:42:04 EDT -04:00], ["data_type", 1], ["name", :company_domain], ["updated_at", Mon, 17 Jun 2013 11:42:04 EDT -04:00], ["value", "clanxp.aws.af.cm"]]
  [1m[35m (77.5ms)[0m  COMMIT
  [1m[36mSiteSetting Load (1.2ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
  Rendered text template (0.0ms)
Completed 200 OK in 91ms (Views: 0.4ms | ActiveRecord: 83.7ms)


Started PUT "/admin/site_settings/share_links" for 127.0.0.1 at 2013-06-17 08:42:31 -0700
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::SiteSettingsController#update as */*
  Parameters: {"value"=>"", "id"=>"share_links"}
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUserVisit Load (1.4ms)[0m  [1mSELECT "user_visits".* FROM "user_visits" WHERE "user_visits"."user_id" = 1 AND "user_visits"."visited_at" = '2013-06-17' LIMIT 1[0m
  [1m[35mSQL (2.9ms)[0m  UPDATE "users" SET "last_seen_at" = '2013-06-17 15:42:31' WHERE "users"."id" = 1
  [1m[36mSiteSetting Load (1.2ms)[0m  [1mSELECT "site_settings".* FROM "site_settings" WHERE "site_settings"."name" = 'share_links' LIMIT 1[0m
  [1m[35m (0.9ms)[0m  BEGIN
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "site_settings" ("created_at", "data_type", "name", "updated_at", "value") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Mon, 17 Jun 2013 11:42:31 EDT -04:00], ["data_type", 1], ["name", :share_links], ["updated_at", Mon, 17 Jun 2013 11:42:31 EDT -04:00], ["value", ""]]
  [1m[35m (1.4ms)[0m  COMMIT
  [1m[36mSiteSetting Load (1.2ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 0.4ms | ActiveRecord: 11.5ms)


Started PUT "/admin/site_settings/enable_google_logins" for 127.0.0.1 at 2013-06-17 08:44:33 -0700
  [1m[35mUser Exists (1.4ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::SiteSettingsController#update as */*
  Parameters: {"value"=>"false", "id"=>"enable_google_logins"}
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUserVisit Load (1.3ms)[0m  [1mSELECT "user_visits".* FROM "user_visits" WHERE "user_visits"."user_id" = 1 AND "user_visits"."visited_at" = '2013-06-17' LIMIT 1[0m
  [1m[35mSQL (1.7ms)[0m  UPDATE "users" SET "last_seen_at" = '2013-06-17 15:44:33' WHERE "users"."id" = 1
  [1m[36mSiteSetting Load (1.2ms)[0m  [1mSELECT "site_settings".* FROM "site_settings" WHERE "site_settings"."name" = 'enable_google_logins' LIMIT 1[0m
  [1m[35m (0.9ms)[0m  BEGIN
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "site_settings" ("created_at", "data_type", "name", "updated_at", "value") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Mon, 17 Jun 2013 11:44:33 EDT -04:00], ["data_type", 5], ["name", :enable_google_logins], ["updated_at", Mon, 17 Jun 2013 11:44:33 EDT -04:00], ["value", "f"]]
  [1m[35m (1.1ms)[0m  COMMIT
  [1m[36mSiteSetting Load (1.1ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 0.4ms | ActiveRecord: 10.0ms)


Started PUT "/admin/site_settings/enable_yahoo_logins" for 127.0.0.1 at 2013-06-17 08:44:33 -0700
  [1m[35mUser Exists (1.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::SiteSettingsController#update as */*
  Parameters: {"value"=>"false", "id"=>"enable_yahoo_logins"}
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mSiteSetting Load (1.2ms)[0m  [1mSELECT "site_settings".* FROM "site_settings" WHERE "site_settings"."name" = 'enable_yahoo_logins' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  BEGIN
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "site_settings" ("created_at", "data_type", "name", "updated_at", "value") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Mon, 17 Jun 2013 11:44:33 EDT -04:00], ["data_type", 5], ["name", :enable_yahoo_logins], ["updated_at", Mon, 17 Jun 2013 11:44:33 EDT -04:00], ["value", "f"]]
  [1m[35m (2.4ms)[0m  COMMIT
  [1m[36mSiteSetting Load (1.1ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
  Rendered text template (0.0ms)
Completed 200 OK in 15ms (Views: 0.4ms | ActiveRecord: 8.4ms)


Started PUT "/admin/site_settings/enable_twitter_logins" for 127.0.0.1 at 2013-06-17 08:44:35 -0700
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::SiteSettingsController#update as */*
  Parameters: {"value"=>"false", "id"=>"enable_twitter_logins"}
  [1m[35mUser Load (74.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mSiteSetting Load (1.4ms)[0m  [1mSELECT "site_settings".* FROM "site_settings" WHERE "site_settings"."name" = 'enable_twitter_logins' LIMIT 1[0m
  [1m[35m (1.1ms)[0m  BEGIN
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "site_settings" ("created_at", "data_type", "name", "updated_at", "value") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Mon, 17 Jun 2013 11:44:35 EDT -04:00], ["data_type", 5], ["name", :enable_twitter_logins], ["updated_at", Mon, 17 Jun 2013 11:44:35 EDT -04:00], ["value", "f"]]
  [1m[35m (2.9ms)[0m  COMMIT
  [1m[36mSiteSetting Load (1.3ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
  Rendered text template (0.0ms)
Completed 200 OK in 90ms (Views: 0.4ms | ActiveRecord: 82.5ms)


Started PUT "/admin/site_settings/enable_facebook_logins" for 127.0.0.1 at 2013-06-17 08:44:38 -0700
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::SiteSettingsController#update as */*
  Parameters: {"value"=>"false", "id"=>"enable_facebook_logins"}
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mSiteSetting Load (1.1ms)[0m  [1mSELECT "site_settings".* FROM "site_settings" WHERE "site_settings"."name" = 'enable_facebook_logins' LIMIT 1[0m
  [1m[35m (0.9ms)[0m  BEGIN
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "site_settings" ("created_at", "data_type", "name", "updated_at", "value") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Mon, 17 Jun 2013 11:44:38 EDT -04:00], ["data_type", 5], ["name", :enable_facebook_logins], ["updated_at", Mon, 17 Jun 2013 11:44:38 EDT -04:00], ["value", "f"]]
  [1m[35m (3.7ms)[0m  COMMIT
  [1m[36mSiteSetting Load (1.2ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
  Rendered text template (0.0ms)
Completed 200 OK in 17ms (Views: 0.4ms | ActiveRecord: 9.5ms)


Started PUT "/admin/site_settings/reply_by_email_enabled" for 127.0.0.1 at 2013-06-17 08:45:03 -0700
  [1m[35mUser Exists (1.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::SiteSettingsController#update as */*
  Parameters: {"value"=>"true", "id"=>"reply_by_email_enabled"}
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mSiteSetting Load (1.1ms)[0m  [1mSELECT "site_settings".* FROM "site_settings" WHERE "site_settings"."name" = 'reply_by_email_enabled' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  BEGIN
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "site_settings" ("created_at", "data_type", "name", "updated_at", "value") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Mon, 17 Jun 2013 11:45:03 EDT -04:00], ["data_type", 5], ["name", :reply_by_email_enabled], ["updated_at", Mon, 17 Jun 2013 11:45:03 EDT -04:00], ["value", "t"]]
  [1m[35m (2.8ms)[0m  COMMIT
  [1m[36mSiteSetting Load (1.1ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
  Rendered text template (0.0ms)
Completed 200 OK in 15ms (Views: 0.4ms | ActiveRecord: 8.7ms)


Started GET "/admin/site_content_types" for 127.0.0.1 at 2013-06-17 08:45:34 -0700
  [1m[35mUser Exists (1.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::SiteContentTypesController#index as JSON
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUserVisit Load (1.2ms)[0m  [1mSELECT "user_visits".* FROM "user_visits" WHERE "user_visits"."user_id" = 1 AND "user_visits"."visited_at" = '2013-06-17' LIMIT 1[0m
  [1m[35mSQL (2.7ms)[0m  UPDATE "users" SET "last_seen_at" = '2013-06-17 15:45:34' WHERE "users"."id" = 1
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 5.3ms)


Started GET "/admin/site_contents/usage_tips" for 127.0.0.1 at 2013-06-17 08:45:37 -0700
  [1m[36mUser Exists (1.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::SiteContentsController#show as JSON
  Parameters: {"id"=>"usage_tips"}
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mSiteContent Load (1.4ms)[0m  SELECT "site_contents".* FROM "site_contents" WHERE "site_contents"."content_type" = 'usage_tips' LIMIT 1
Completed 200 OK in 86ms (Views: 0.1ms | ActiveRecord: 2.7ms)


Started GET "/admin/site_contents/education_new_reply" for 127.0.0.1 at 2013-06-17 08:45:48 -0700
  [1m[36mUser Exists (1.4ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (1.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::SiteContentsController#show as JSON
  Parameters: {"id"=>"education_new_reply"}
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mSiteContent Load (1.1ms)[0m  SELECT "site_contents".* FROM "site_contents" WHERE "site_contents"."content_type" = 'education_new_reply' LIMIT 1
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 2.4ms)


Started GET "/admin/site_contents/login_required_welcome_message" for 127.0.0.1 at 2013-06-17 08:45:50 -0700
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::SiteContentsController#show as JSON
  Parameters: {"id"=>"login_required_welcome_message"}
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mSiteContent Load (1.0ms)[0m  SELECT "site_contents".* FROM "site_contents" WHERE "site_contents"."content_type" = 'login_required_welcome_message' LIMIT 1
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 2.3ms)


Started GET "/admin/users/list/active.json?filter=" for 127.0.0.1 at 2013-06-17 08:45:58 -0700
  [1m[36mUser Exists (1.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
Processing by Admin::UsersController#index as JSON
  Parameters: {"filter"=>"", "query"=>"active"}
  [1m[35mUser Load (1.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUser Load (1.5ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY COALESCE(last_seen_at, to_date('1970-01-01', 'YYYY-MM-DD')) DESC, username[0m
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 3.0ms)


Started GET "/admin/groups.json" for 127.0.0.1 at 2013-06-17 08:46:00 -0700
  [1m[35mUser Exists (75.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::GroupsController#index as JSON
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mGroup Load (1.1ms)[0m  [1mSELECT "groups".* FROM "groups" ORDER BY name[0m
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 2.5ms)


Started GET "/admin/email.json" for 127.0.0.1 at 2013-06-17 08:46:04 -0700
  [1m[35mUser Exists (1.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
Processing by Admin::EmailController#index as JSON
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started GET "/admin/users/list/active.json?filter=" for 127.0.0.1 at 2013-06-17 08:46:06 -0700
  [1m[35mUser Exists (1.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
Processing by Admin::UsersController#index as JSON
  Parameters: {"filter"=>"", "query"=>"active"}
  [1m[36mUser Load (2.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" ORDER BY COALESCE(last_seen_at, to_date('1970-01-01', 'YYYY-MM-DD')) DESC, username
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 3.5ms)


Started GET "/admin/users/list/new.json?filter=" for 127.0.0.1 at 2013-06-17 08:46:09 -0700
  [1m[36mUser Exists (1.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
Processing by Admin::UsersController#index as JSON
  Parameters: {"filter"=>"", "query"=>"new"}
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY created_at DESC, username[0m
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 2.8ms)


Started GET "/admin/users/list/active.json?filter=" for 127.0.0.1 at 2013-06-17 08:46:12 -0700
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
Processing by Admin::UsersController#index as JSON
  Parameters: {"filter"=>"", "query"=>"active"}
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" ORDER BY COALESCE(last_seen_at, to_date('1970-01-01', 'YYYY-MM-DD')) DESC, username
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 2.4ms)


Started GET "/admin/groups.json" for 127.0.0.1 at 2013-06-17 08:46:14 -0700
  [1m[36mUser Exists (1.5ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (1.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::GroupsController#index as JSON
  [1m[36mUser Load (1.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mGroup Load (1.1ms)[0m  SELECT "groups".* FROM "groups" ORDER BY name
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 2.8ms)


Started GET "/admin/email.json" for 127.0.0.1 at 2013-06-17 08:46:14 -0700
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
Processing by Admin::EmailController#index as JSON
  [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 2.0ms)


Started GET "/admin/email/logs.json" for 127.0.0.1 at 2013-06-17 08:46:19 -0700
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
Processing by Admin::EmailController#logs as JSON
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mEmailLog Load (1.2ms)[0m  [1mSELECT "email_logs".* FROM "email_logs" ORDER BY created_at desc LIMIT 50[0m
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 2.6ms)


Started GET "/admin/email.json" for 127.0.0.1 at 2013-06-17 08:46:19 -0700
  [1m[35mUser Exists (1.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
Processing by Admin::EmailController#index as JSON
  [1m[36mUser Load (1.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.7ms)


Started GET "/admin/email/preview-digest.json?last_seen_at=2013-06-10" for 127.0.0.1 at 2013-06-17 08:46:23 -0700
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
Processing by Admin::EmailController#preview_digest as JSON
  Parameters: {"last_seen_at"=>"2013-06-10"}
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mCategory Load (1.4ms)[0m  SELECT id FROM "categories" WHERE "categories"."secure" = 't'
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(count_column) FROM (SELECT 1 AS count_column FROM "topics" WHERE "topics"."visible" = 't' AND "topics"."closed" = 'f' AND "topics"."archived" = 'f' AND ("topics"."deleted_at" IS NULL) AND (category_id IS NULL OR category_id IN (
 SELECT c.id FROM categories c
 WHERE NOT c.secure)) AND (created_at > '2013-06-10') AND (topics.archetype <> 'private_message') LIMIT 5) subquery_for_count [0m
  Rendered email/template.html.erb (0.7ms)
Completed 200 OK in 153ms (Views: 0.1ms | ActiveRecord: 4.0ms)


Started GET "/admin/flags/active.json" for 127.0.0.1 at 2013-06-17 08:46:26 -0700
  [1m[35mUser Exists (1.8ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
Processing by Admin::FlagsController#index as JSON
  Parameters: {"filter"=>"active"}
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35m (1.8ms)[0m  SELECT COUNT(DISTINCT posts.id) FROM "post_actions" INNER JOIN "posts" ON "posts"."id" = "post_actions"."post_id" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE "post_actions"."post_action_type_id" IN (3, 4, 7, 8) AND "posts"."deleted_at" IS NULL AND "topics"."deleted_at" IS NULL AND ("post_actions"."deleted_at" IS NULL)
  [1m[36m (1.1ms)[0m  [1mSELECT id FROM "users" WHERE (moderator or admin )[0m
  [1m[35m (1.5ms)[0m  select p.id, t.title, p.cooked, p.user_id, p.topic_id, p.post_number, p.hidden, t.visible topic_visible
 from posts p
 join topics t on t.id = topic_id
 join (
 select
 post_id,
 count(*) as cnt,
 max(created_at) max
 from post_actions
 WHERE (post_action_type_id in (3,4,7,8)) AND (deleted_at is null)
 group by post_id
 ) as a on a.post_id = p.id
 WHERE (p.deleted_at is null and t.deleted_at is null)
 ORDER BY cnt desc, max asc
 limit 100
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 5.7ms)


Started GET "/admin/site_customizations" for 127.0.0.1 at 2013-06-17 08:46:27 -0700
  [1m[36mUser Exists (1.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (1.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::SiteCustomizationsController#index as JSON
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mSiteCustomization Load (1.2ms)[0m  SELECT "site_customizations".* FROM "site_customizations" 
Completed 200 OK in 6ms (Views: 0.5ms | ActiveRecord: 2.6ms)


Started GET "/admin/api" for 127.0.0.1 at 2013-06-17 08:46:35 -0700
  [1m[36mUser Exists (1.8ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (1.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::ApiController#index as JSON
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mUserVisit Load (1.3ms)[0m  SELECT "user_visits".* FROM "user_visits" WHERE "user_visits"."user_id" = 1 AND "user_visits"."visited_at" = '2013-06-17' LIMIT 1
  [1m[36mSQL (2.8ms)[0m  [1mUPDATE "users" SET "last_seen_at" = '2013-06-17 15:46:35' WHERE "users"."id" = 1[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 5.4ms)


Started POST "/admin/api/generate_key" for 127.0.0.1 at 2013-06-17 08:46:40 -0700
  [1m[35mUser Exists (1.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::ApiController#generate_key as */*
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mSiteSetting Load (1.1ms)[0m  [1mSELECT "site_settings".* FROM "site_settings" WHERE "site_settings"."name" = 'api_key' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  BEGIN
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "site_settings" ("created_at", "data_type", "name", "updated_at", "value") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Mon, 17 Jun 2013 11:46:40 EDT -04:00], ["data_type", 1], ["name", :api_key], ["updated_at", Mon, 17 Jun 2013 11:46:40 EDT -04:00], ["value", "f2ee3c12587adf4c6fce6e520a62e1ef903d0b938a29ae8290c099aa2591ba63"]]
  [1m[35m (3.1ms)[0m  COMMIT
  [1m[36mSiteSetting Load (1.2ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
Completed 200 OK in 88ms (Views: 0.2ms | ActiveRecord: 9.1ms)


Started GET "/admin/site_customizations" for 127.0.0.1 at 2013-06-17 08:46:46 -0700
  [1m[35mUser Exists (1.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (1.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::SiteCustomizationsController#index as JSON
  [1m[35mUser Load (1.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mSiteCustomization Load (1.4ms)[0m  [1mSELECT "site_customizations".* FROM "site_customizations" [0m
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 2.9ms)


Started GET "/admin/api" for 127.0.0.1 at 2013-06-17 08:46:48 -0700
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::ApiController#index as JSON
  [1m[35mUser Load (1.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.9ms)


Started GET "/admin/site_customizations" for 127.0.0.1 at 2013-06-17 08:46:51 -0700
  [1m[36mUser Exists (1.4ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (1.4ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::SiteCustomizationsController#index as JSON
  [1m[36mUser Load (1.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mSiteCustomization Load (1.2ms)[0m  SELECT "site_customizations".* FROM "site_customizations" 
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 2.8ms)


Started GET "/admin/flags/active.json" for 127.0.0.1 at 2013-06-17 08:46:51 -0700
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
Processing by Admin::FlagsController#index as JSON
  Parameters: {"filter"=>"active"}
  [1m[35mUser Load (2.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36m (2.6ms)[0m  [1mSELECT COUNT(DISTINCT posts.id) FROM "post_actions" INNER JOIN "posts" ON "posts"."id" = "post_actions"."post_id" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE "post_actions"."post_action_type_id" IN (3, 4, 7, 8) AND "posts"."deleted_at" IS NULL AND "topics"."deleted_at" IS NULL AND ("post_actions"."deleted_at" IS NULL)[0m
  [1m[35m (76.9ms)[0m  SELECT id FROM "users" WHERE (moderator or admin )
  [1m[36m (1.5ms)[0m  [1mselect p.id, t.title, p.cooked, p.user_id, p.topic_id, p.post_number, p.hidden, t.visible topic_visible
 from posts p
 join topics t on t.id = topic_id
 join (
 select
 post_id,
 count(*) as cnt,
 max(created_at) max
 from post_actions
 WHERE (post_action_type_id in (3,4,7,8)) AND (deleted_at is null)
 group by post_id
 ) as a on a.post_id = p.id
 WHERE (p.deleted_at is null and t.deleted_at is null)
 ORDER BY cnt desc, max asc
 limit 100[0m
Completed 200 OK in 91ms (Views: 0.2ms | ActiveRecord: 83.1ms)


Started GET "/admin/email.json" for 127.0.0.1 at 2013-06-17 08:46:53 -0700
  [1m[35mUser Exists (1.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
Processing by Admin::EmailController#index as JSON
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started GET "/admin/site_settings" for 127.0.0.1 at 2013-06-17 08:46:54 -0700
  [1m[35mUser Exists (1.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::SiteSettingsController#index as JSON
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 1.3ms)


Started GET "/admin/dashboard/problems" for 127.0.0.1 at 2013-06-17 08:46:55 -0700
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
Processing by Admin::DashboardController#problems as JSON
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Completed 200 OK in 20ms (Views: 0.2ms | ActiveRecord: 1.2ms)


Started GET "/admin/site_settings" for 127.0.0.1 at 2013-06-17 08:47:06 -0700
  [1m[36mUser Exists (1.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (1.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::SiteSettingsController#index as JSON
  [1m[36mUser Load (2.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 2.1ms)


Started GET "/admin/site_content_types" for 127.0.0.1 at 2013-06-17 08:47:18 -0700
  [1m[35mUser Exists (1.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::SiteContentTypesController#index as JSON
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.4ms)


Started GET "/user_actions?offset=0&username=forumadmin" for 127.0.0.1 at 2013-06-17 08:47:33 -0700
Processing by UserActionsController#index as JSON
  Parameters: {"offset"=>"0", "username"=>"forumadmin"}
  [1m[36mUser Load (1.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
Unpermitted parameters: username
  [1m[35mUser Load (1.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username_lower" = 'forumadmin' LIMIT 1
  [1m[36m (4.4ms)[0m  [1m
SELECT
 t.title, a.action_type, a.created_at, t.id topic_id,
 a.user_id AS target_user_id, au.name AS target_name, au.username AS target_username,
 coalesce(p.post_number, 1) post_number,
 p.reply_to_post_number,
 pu.email ,pu.username, pu.name, pu.id user_id,
 u.email acting_email, u.username acting_username, u.name acting_name, u.id acting_user_id,
 coalesce(p.cooked, p2.cooked) cooked,
 CASE WHEN coalesce(p.deleted_at, p2.deleted_at, t.deleted_at) IS NULL THEN false ELSE true END deleted,
 p.hidden
FROM user_actions as a
JOIN topics t on t.id = a.target_topic_id
LEFT JOIN posts p on p.id = a.target_post_id
JOIN posts p2 on p2.topic_id = a.target_topic_id and p2.post_number = 1
JOIN users u on u.id = a.acting_user_id
JOIN users pu on pu.id = COALESCE(p.user_id, t.user_id)
JOIN users au on au.id = a.user_id
LEFT JOIN categories c on c.id = t.category_id
WHERE (t.archetype != 'private_message') AND (a.user_id = 1)
ORDER BY a.created_at desc
OFFSET 0
LIMIT 60
[0m
Completed 200 OK in 20ms (Views: 0.1ms | ActiveRecord: 7.4ms)


Started GET "/users/forumadmin.json" for 127.0.0.1 at 2013-06-17 08:47:33 -0700
Processing by UsersController#show as JSON
  Parameters: {"username"=>"forumadmin"}
  [1m[35mUser Load (1.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUser Load (2.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username_lower" = 'forumadmin' LIMIT 1[0m
  [1m[35mUserAction Load (1.8ms)[0m  
 SELECT action_type, COUNT(*) count
 FROM user_actions a
 JOIN topics t ON t.id = a.target_topic_id
 LEFT JOIN posts p on p.id = a.target_post_id
 JOIN posts p2 on p2.topic_id = a.target_topic_id and p2.post_number = 1
 LEFT JOIN categories c ON c.id = t.category_id
 WHERE (a.user_id = 1)
 GROUP BY action_type

  [1m[36mInvite Load (1.5ms)[0m  [1mSELECT "invites".* FROM "invites" WHERE "invites"."user_id" = 1 AND ("invites"."deleted_at" IS NULL) AND (redeemed_at is not null) LIMIT 1[0m
Completed 200 OK in 91ms (Views: 0.1ms | ActiveRecord: 7.3ms)


Started GET "/user_actions?offset=4&username=forumadmin" for 127.0.0.1 at 2013-06-17 08:47:35 -0700
Processing by UserActionsController#index as JSON
  Parameters: {"offset"=>"4", "username"=>"forumadmin"}
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Unpermitted parameters: username
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username_lower" = 'forumadmin' LIMIT 1[0m
  [1m[35m (3.1ms)[0m  
SELECT
 t.title, a.action_type, a.created_at, t.id topic_id,
 a.user_id AS target_user_id, au.name AS target_name, au.username AS target_username,
 coalesce(p.post_number, 1) post_number,
 p.reply_to_post_number,
 pu.email ,pu.username, pu.name, pu.id user_id,
 u.email acting_email, u.username acting_username, u.name acting_name, u.id acting_user_id,
 coalesce(p.cooked, p2.cooked) cooked,
 CASE WHEN coalesce(p.deleted_at, p2.deleted_at, t.deleted_at) IS NULL THEN false ELSE true END deleted,
 p.hidden
FROM user_actions as a
JOIN topics t on t.id = a.target_topic_id
LEFT JOIN posts p on p.id = a.target_post_id
JOIN posts p2 on p2.topic_id = a.target_topic_id and p2.post_number = 1
JOIN users u on u.id = a.acting_user_id
JOIN users pu on pu.id = COALESCE(p.user_id, t.user_id)
JOIN users au on au.id = a.user_id
LEFT JOIN categories c on c.id = t.category_id
WHERE (t.archetype != 'private_message') AND (a.user_id = 1)
ORDER BY a.created_at desc
OFFSET 4
LIMIT 60

Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 5.6ms)


Started GET "/admin/users/forumadmin" for 127.0.0.1 at 2013-06-17 08:47:36 -0700
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
Processing by Admin::UsersController#show as JSON
  Parameters: {"id"=>"forumadmin"}
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUserVisit Load (1.8ms)[0m  [1mSELECT "user_visits".* FROM "user_visits" WHERE "user_visits"."user_id" = 1 AND "user_visits"."visited_at" = '2013-06-17' LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  UPDATE "users" SET "last_seen_at" = '2013-06-17 15:47:36' WHERE "users"."id" = 1
  [1m[36mUser Load (1.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username_lower" = 'forumadmin' LIMIT 1[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "user_actions" WHERE "user_actions"."user_id" = 1 AND "user_actions"."action_type" = 2
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "posts" WHERE "posts"."user_id" = 1 AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."user_id" = 1 AND "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL)
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(DISTINCT "posts"."id") FROM "posts" LEFT OUTER JOIN "post_actions" ON "post_actions"."post_id" = "posts"."id" WHERE "posts"."user_id" = 1 AND "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "topics" INNER JOIN "topic_allowed_users" ON "topics"."id" = "topic_allowed_users"."topic_id" WHERE "topic_allowed_users"."user_id" = 1 AND "topics"."archetype" = 'private_message' AND ("topics"."deleted_at" IS NULL)
Completed 200 OK in 47ms (Views: 0.1ms | ActiveRecord: 16.5ms)


Started PUT "/admin/users/1/grant_moderation" for 127.0.0.1 at 2013-06-17 08:47:43 -0700
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::UsersController#grant_moderation as */*
  Parameters: {"user_id"=>"1"}
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35m (1.2ms)[0m  BEGIN
  [1m[36mUser Exists (1.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE ("users"."email" = 'team@discourse.org' AND "users"."id" != 1) LIMIT 1[0m
  [1m[35m (1.6ms)[0m  UPDATE "users" SET "moderator" = 't', "updated_at" = '2013-06-17 15:47:43.636411' WHERE "users"."id" = 1
  [1m[36mGroup Load (1.4ms)[0m  [1mSELECT "groups".* FROM "groups" WHERE "groups"."id" = 1 LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m  INSERT INTO "groups" ("automatic", "created_at", "id", "name", "updated_at", "user_count") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["automatic", true], ["created_at", Mon, 17 Jun 2013 11:47:43 EDT -04:00], ["id", 1], ["name", "admins"], ["updated_at", Mon, 17 Jun 2013 11:47:43 EDT -04:00], ["user_count", 0]]
  [1m[36mSQL (1.6ms)[0m  [1mDELETE FROM "group_users" WHERE "group_users"."group_id" = 1 AND (user_id IN (SELECT users.id FROM "users" INNER JOIN "group_users" ON "users"."id" = "group_users"."user_id" WHERE "group_users"."group_id" = 1 AND (users.id NOT IN (SELECT u.id FROM users u WHERE u.admin))))[0m
  [1m[35mGroupUser Load (1.6ms)[0m  SELECT X.id FROM "group_users" RIGHT JOIN (SELECT u.id FROM users u WHERE u.admin) X ON X.id = user_id AND group_id = 1 WHERE (user_id IS NULL)
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "group_users" ("created_at", "group_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Mon, 17 Jun 2013 11:47:43 EDT -04:00], ["group_id", 1], ["updated_at", Mon, 17 Jun 2013 11:47:43 EDT -04:00], ["user_id", 1]]
  [1m[35mGroup Load (1.9ms)[0m  SELECT "groups".* FROM "groups" WHERE "groups"."id" = 1 LIMIT 1
  [1m[36mSQL (1.7ms)[0m  [1mUPDATE "groups" SET "user_count" = COALESCE("user_count", 0) + 1 WHERE "groups"."id" = 1[0m
  [1m[35mGroup Load (1.2ms)[0m  SELECT "groups".* FROM "groups" WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "group_users" WHERE "group_users"."group_id" = 1[0m
  [1m[35m (1.3ms)[0m  UPDATE "groups" SET "user_count" = 1 WHERE "groups"."id" = 1
  [1m[36mGroup Load (1.4ms)[0m  [1mSELECT "groups".* FROM "groups" WHERE "groups"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "groups" ("automatic", "created_at", "id", "name", "updated_at", "user_count") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["automatic", true], ["created_at", Mon, 17 Jun 2013 11:47:43 EDT -04:00], ["id", 2], ["name", "moderators"], ["updated_at", Mon, 17 Jun 2013 11:47:43 EDT -04:00], ["user_count", 0]]
  [1m[36mSQL (1.6ms)[0m  [1mDELETE FROM "group_users" WHERE "group_users"."group_id" = 2 AND (user_id IN (SELECT users.id FROM "users" INNER JOIN "group_users" ON "users"."id" = "group_users"."user_id" WHERE "group_users"."group_id" = 2 AND (users.id NOT IN (SELECT u.id FROM users u WHERE u.moderator))))[0m
  [1m[35mGroupUser Load (1.4ms)[0m  SELECT X.id FROM "group_users" RIGHT JOIN (SELECT u.id FROM users u WHERE u.moderator) X ON X.id = user_id AND group_id = 2 WHERE (user_id IS NULL)
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "group_users" ("created_at", "group_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Mon, 17 Jun 2013 11:47:43 EDT -04:00], ["group_id", 2], ["updated_at", Mon, 17 Jun 2013 11:47:43 EDT -04:00], ["user_id", 1]]
  [1m[35mGroup Load (1.7ms)[0m  SELECT "groups".* FROM "groups" WHERE "groups"."id" = 2 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mUPDATE "groups" SET "user_count" = COALESCE("user_count", 0) + 1 WHERE "groups"."id" = 2[0m
  [1m[35mGroup Load (1.0ms)[0m  SELECT "groups".* FROM "groups" WHERE "groups"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (71.0ms)[0m  [1mSELECT COUNT(*) FROM "group_users" WHERE "group_users"."group_id" = 2[0m
  [1m[35m (1.3ms)[0m  UPDATE "groups" SET "user_count" = 1 WHERE "groups"."id" = 2
  [1m[36mGroup Load (1.3ms)[0m  [1mSELECT "groups".* FROM "groups" WHERE "groups"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "groups" ("automatic", "created_at", "id", "name", "updated_at", "user_count") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["automatic", true], ["created_at", Mon, 17 Jun 2013 11:47:43 EDT -04:00], ["id", 3], ["name", "staff"], ["updated_at", Mon, 17 Jun 2013 11:47:43 EDT -04:00], ["user_count", 0]]
  [1m[36mSQL (1.6ms)[0m  [1mDELETE FROM "group_users" WHERE "group_users"."group_id" = 3 AND (user_id IN (SELECT users.id FROM "users" INNER JOIN "group_users" ON "users"."id" = "group_users"."user_id" WHERE "group_users"."group_id" = 3 AND (users.id NOT IN (SELECT u.id FROM users u WHERE u.moderator OR u.admin))))[0m
  [1m[35mGroupUser Load (1.4ms)[0m  SELECT X.id FROM "group_users" RIGHT JOIN (SELECT u.id FROM users u WHERE u.moderator OR u.admin) X ON X.id = user_id AND group_id = 3 WHERE (user_id IS NULL)
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "group_users" ("created_at", "group_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Mon, 17 Jun 2013 11:47:43 EDT -04:00], ["group_id", 3], ["updated_at", Mon, 17 Jun 2013 11:47:43 EDT -04:00], ["user_id", 1]]
  [1m[35mGroup Load (1.7ms)[0m  SELECT "groups".* FROM "groups" WHERE "groups"."id" = 3 LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1mUPDATE "groups" SET "user_count" = COALESCE("user_count", 0) + 1 WHERE "groups"."id" = 3[0m
  [1m[35mGroup Load (1.0ms)[0m  SELECT "groups".* FROM "groups" WHERE "groups"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "group_users" WHERE "group_users"."group_id" = 3[0m
  [1m[35m (1.1ms)[0m  UPDATE "groups" SET "user_count" = 1 WHERE "groups"."id" = 3
  [1m[36m (2.5ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 180ms (Views: 0.1ms | ActiveRecord: 124.1ms)
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.5ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
  [1m[35m (0.4ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
  [1m[36m (0.9ms)[0m  [1mSELECT version FROM schema_migrations ORDER BY version[0m
  [1m[35m (121.1ms)[0m  DROP DATABASE IF EXISTS "discourse_test"
  [1m[36m (222.0ms)[0m  [1mCREATE DATABASE "discourse_test" ENCODING = 'utf8'[0m
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.5ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
  [1m[35m (0.3ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Migrating to CreateForumThreads (20120311163914)
Migrating to CreatePosts (20120311164326)
Migrating to CreateUsers (20120311170118)
Migrating to CreateForums (20120311201341)
Migrating to CreateSites (20120311210245)
Migrating to AddReplyToToPosts (20120416201606)
Migrating to AddViewsToForumThreads (20120420183447)
Migrating to AddPostsCountToForumThreads (20120423140906)
Migrating to FixPostIndices (20120423142820)
Migrating to RemoveLastPostId (20120423151548)
Migrating to AddDisplayUsernameToUsers (20120425145456)
Migrating to AddUserIdIndexToPosts (20120427150624)
Migrating to CookedMigration (20120427151452)
Migrating to CreateVestalVersions (20120427154330)
Migrating to AddVersionToPosts (20120427172031)
Migrating to AddCreatedByToForumThreads (20120502183240)
Migrating to AddLastPostUserIdToForumThreads (20120502192121)
Migrating to AddSiteIdToUsers (20120503205521)
Migrating to CreateExpressions (20120507144132)
Migrating to CreateExpressionTypes (20120507144222)
Migrating to AddReplyCountToPosts (20120514144549)
Migrating to AddFlagToExpressionTypes (20120514173920)
Migrating to AddDescriptionToExpressionTypes (20120514204934)
Migrating to AddQuotelessToPost (20120517200130)
Migrating to CreateReadPosts (20120518200115)
Migrating to CreateLastReadPosts (20120519182212)
Migrating to CreateViews (20120523180723)
Migrating to AddRepliesToForumThreads (20120523184307)
Migrating to AddFeaturedToForumThreads (20120523201329)
Migrating to AddAvgTimeToForumThreads (20120525194845)
Migrating to CreateUploads (20120529175956)
Migrating to CreateStars (20120529202707)
Migrating to CreateForumThreadUser (20120530150726)
Migrating to MigratePosted (20120530160745)
Migrating to AddIndexToForumThreads (20120530200724)
Migrating to CreateForumThreadLinks (20120530212912)
Migrating to AddTagsToForumThreads (20120614190726)
Migrating to AddQuoteCountToPosts (20120614202024)
Migrating to CreateBookmarks (20120615180517)
Migrating to AddReplyBelowToPosts (20120618152946)
Migrating to CreatePostTimings (20120618212349)
Migrating to CreateMessageBus (20120618214856)
Migrating to FixPostTimings (20120619150807)
Migrating to DropReadPosts (20120619153349)
Migrating to AddPostNumberToBookmarks (20120619172714)
Migrating to AddSeenPostCountToForumThreadUsers (20120621155351)
Migrating to AddDeletedAtToForumThreads (20120621190310)
Migrating to CreateNotifications (20120622200242)
Migrating to AddSeenNotificationIdToUsers (20120625145714)
Migrating to AddDeletedAtToPosts (20120625162318)
Migrating to AddHighestPostNumberToForumThreads (20120625174544)
Migrating to AddImageUrlToForumThreads (20120625195326)
Migrating to RenameExpressionTypeId (20120629143908)
Migrating to DenormalizeExpressions (20120629150253)
Migrating to MakeExpressionsLessGeneric (20120629151243)
Migrating to CreateIncomingLinks (20120629182637)
Migrating to CreateReplies (20120702211427)
Migrating to AddReflectionToForumThreadLinks (20120703184734)
Migrating to AddIncomingLinkCountToPosts (20120703201312)
Migrating to AddIncomingLinkCountToForumThreads (20120703203623)
Migrating to AddBookmarkCountToPosts (20120703210004)
Migrating to AddAvgTimeToPosts (20120704160659)
Migrating to AddViewCountToPosts (20120704201743)
Migrating to AddUserToVersions (20120705181724)
Migrating to AddLastPostedAtToUsers (20120708210305)
Migrating to CreateCategories (20120712150500)
Migrating to AddCategoryIdToForumThreads (20120712151934)
Migrating to CreateCategoryFeaturedThreads (20120713201324)
Migrating to CreateSiteSettings (20120716020835)
Migrating to AddStatsToCategories (20120716173544)
Migrating to CreateUserOpenIds (20120718044955)
Migrating to AddEmailHashedPasswordNameSaltToUsers (20120719004636)
Migrating to AddUsernameLowerToUsers (20120720013733)
Migrating to AddAuthTokenToUsers (20120720044246)
Migrating to AddForumIdToCategories (20120720162422)
Migrating to AddNotNullsToUserOpenIds (20120723051512)
Migrating to AddLastSeenAtToUsers (20120724234502)
Migrating to AddWebsiteToUsers (20120724234711)
Migrating to AddExcerptToCategories (20120725183347)
Migrating to AddInvisibleToForumThread (20120726201830)
Migrating to AddUserIdToCategories (20120726235129)
Migrating to RemoveExcerptFromCategories (20120727005556)
Migrating to RenameInvisible (20120727150428)
Migrating to AddThreadCountsToCategories (20120727213543)
Migrating to AddIconToExpressionTypes (20120802151210)
Migrating to AddAdminFlagToUsers (20120803191426)
Migrating to AddNewPasswordNewSaltEmailTokenToUsers (20120806030641)
Migrating to RemoveNewPasswordStuffFromUser (20120806062617)
Migrating to CreateActions (20120807223020)
Migrating to RemoveSiteId (20120809020415)
Migrating to RemoveForumId (20120809030647)
Migrating to CorrectIndexingOnPosts (20120809053414)
Migrating to RemoveIndexForNow (20120809154750)
Migrating to CreatePostActions (20120809174649)
Migrating to CreatePostActionTypes (20120809175110)
Migrating to MigrateBookmarksToPostActions (20120809201855)
Migrating to RenameActionsToUserActions (20120810064839)
Migrating to RetireExpressions (20120812235417)
Migrating to RenameExpressionColumnsInForumThread (20120813004347)
Migrating to RenameExpressionColumnsInPosts (20120813042912)
Migrating to CreateForumThreadLinkClicks (20120813201426)
Migrating to AddUniqueIndexToForumThreadLinks (20120815004411)
Migrating to AddPostTypeToPosts (20120815180106)
Migrating to AddModeratorPostsCountToForumThreads (20120815204733)
Migrating to AddUniqueConstraintToUserActions (20120816050526)
Migrating to AddForumThreadStates (20120816205537)
Migrating to AddStarredAtToForumThreadUser (20120816205538)
Migrating to AddSearchIndices (20120820191804)
Migrating to AddBumpedAtToForumThreads (20120821191616)
Migrating to AddSlugToCategories (20120823205956)
Migrating to CreateCategoryFeaturedUsers (20120824171908)
Migrating to CreateOneboxRenders (20120828204209)
Migrating to CreatePostOneboxRenders (20120828204624)
Migrating to AddPreviewToOneboxRenders (20120830182736)
Migrating to RemoveDescriptionFromSiteSettings (20120910171504)
Migrating to RenameViewsToReads (20120918152319)
Migrating to AddSubTagToForumThreads (20120918205931)
Migrating to AddHasBestOfToForumThreads (20120919152846)
Migrating to AddTwitterUserInfo (20120921055428)
Migrating to CreateArchetypes (20120921155050)
Migrating to AddMetaDataToForumThreads (20120921162512)
Migrating to CreateArchetypeOptions (20120921163606)
Migrating to AddHstoreExtension (20120924182000)
Migrating to AddVoteCountToPosts (20120924182031)
Migrating to RemoveEnglishFromPostActionTypes (20120925171620)
Migrating to AddSequenceToPostActionTypes (20120925190802)
Migrating to AddSortOrderToPosts (20120928170023)
Migrating to AddEmailStuffToUsers (20121009161116)
Migrating to CreateEmailLogs (20121011155904)
Migrating to ConvertArchetypes (20121017162924)
Migrating to RenameForumThreadTables (20121018103721)
Migrating to CreateTopicAllowedUsers (20121018133039)
Migrating to FixNotificationData (20121018182709)
Migrating to DropAvatarUrlFromUsers (20121106015500)
Migrating to AddPostActionIdToNotifications (20121108193516)
Migrating to CreateTrustLevels (20121109164630)
Migrating to BioMarkdownSupport (20121113200844)
Migrating to CreateFacebookUserInfos (20121113200845)
Migrating to RenameStickyToPinned (20121115172544)
Migrating to AddMoreEmailSettingsToUser (20121116212424)
Migrating to AddEmailSettingsToUsers (20121119190529)
Migrating to AddEmailDirectToUsers (20121119200843)
Migrating to CreateInvites (20121121202035)
Migrating to CreateTopicInvites (20121121205215)
Migrating to AddMutedAtToTopicUser (20121122033316)
Migrating to MakePostNumberDistinct (20121123054127)
Migrating to CreateUserVisits (20121123063630)
Migrating to CreateEmailTokens (20121129160035)
Migrating to RemoveEmailTokenFromUsers (20121129184948)
Migrating to CreateDrafts (20121130010400)
Migrating to AddLinkPostIdToTopicLinks (20121130191818)
Migrating to AddVisitedAtToTopicUser (20121202225421)
Migrating to RenameSeenNotificaitonId (20121203181719)
Migrating to FixLinkPostId (20121204183855)
Migrating to AddAnotherFeaturedUserToTopics (20121204193747)
Migrating to AddApprovedToUsers (20121205162143)
Migrating to AddNotificationsToTopicUsers (20121207000741)
Migrating to CreateSiteCustomizations (20121211233131)
Migrating to AddOverrideDefaultStyleToSiteCustomization (20121216230719)
Migrating to AddTopicsEnteredToUsers (20121218205642)
Migrating to AddLastEditorIdToPosts (20121224072204)
Migrating to CreateDraftSequence (20121224095139)
Migrating to AddSequenceToDrafts (20121224100650)
Migrating to AddDeletedAtToInvites (20121228192219)
Migrating to AddDigestAfterDaysToUsers (20130107165207)
Migrating to AddPreviousVisitAtToUsers (20130108195847)
Migrating to MergeMuteOptionsOnTopicUsers (20130115012140)
Migrating to CorrectDefaultOnNotificationLevel (20130115021937)
Migrating to OopsUnwatchABoatOfWatchedStuff (20130115043603)
Migrating to RemoveSubTagFromTopics (20130116151829)
Migrating to FixSearch (20130120222728)
Migrating to AddTrackingToTopicUsers (20130121231352)
Migrating to AddAutoTrackTopicsToUser (20130122051134)
Migrating to AddAutoTrackAfterSecondsAndBanningAndDobToUser (20130122232825)
Migrating to AutoTrackAllTopicsRepliedTo (20130123070909)
Migrating to AddHiddenToPosts (20130125002652)
Migrating to AddFieldsToPostAction (20130125030305)
Migrating to CorrectIndexOnPostAction (20130125031122)
Migrating to RemoveTrustLevels (20130127213646)
Migrating to TrustLevelDefaultNull (20130128182013)
Migrating to RemovePmReflections (20130129010625)
Migrating to AddTimeReadToUsers (20130129163244)
Migrating to AddDaysVisitedToUsers (20130129174845)
Migrating to RemoveIndexFromViews (20130130154611)
Migrating to AddCustomFlagCountToTopics (20130131055710)
Migrating to AddColumnSummariesToPostsAndTopics (20130201000828)
Migrating to AddPositionToPostActionType (20130201023409)
Migrating to AddLastVersionAtToPosts (20130203204338)
Migrating to AddIpAddressToUsers (20130204000159)
Migrating to AlterFacebookUserId (20130205021905)
Migrating to AddUserDeletedToPosts (20130207200019)
Migrating to RemoveReplyBelowPostNumberFromPosts (20130208220635)
Migrating to RemoveTopicResponseActions (20130213021450)
Migrating to AddNewTopicDurationMinutesToUsers (20130213203300)
Migrating to AddDescriptionToCategories (20130221215017)
Migrating to AddGithubUserInfo (20130226015336)
Migrating to AddClearedPinnedToTopicUsers (20130306180148)
Migrating to RemoveExtraSpamRecord (20130311181327)
Migrating to AddExternalLinksInNewTabAnDisableQuotingToUser (20130313004922)
Migrating to AddForegroundColorToCategories (20130314093434)
Migrating to EnableTrigramSupport (20130315180637)
Migrating to AddReplyToUserIdToPost (20130319122248)
Migrating to AddUserIndexesToPostsAndTopics (20130320012100)
Migrating to AddModeratorToUser (20130320024345)
Migrating to RemoveOneboxesFromDb (20130321154905)
Migrating to AddPercentRankToPosts (20130322183614)
Migrating to AddHotnessToCategory (20130326210101)
Migrating to UpdateSiteSettingsForHot (20130327185852)
Migrating to CreateHotTopics (20130328162943)
Migrating to AddScoreToTopics (20130328182433)
Migrating to AddValuesToHotTopics (20130402210723)
Migrating to CreateSiteContents (20130404143437)
Migrating to AddUserExtras (20130404232558)
Migrating to CreateAdminLogs (20130411205132)
Migrating to CorrectCountsOnPosts (20130412015502)
Migrating to CorrectCountsOnTopics (20130412020156)
Migrating to CreateGroups (20130416004607)
Migrating to GroupUsers (20130416004933)
Migrating to AddSubtypeToTopics (20130416170855)
Migrating to IncreaseDataLengthOnNotifications (20130419195746)
Migrating to AddRelatedPostIdToPostActions (20130422050626)
Migrating to AddSlugToTopics (20130424015746)
Migrating to AddUserIdToIncomingLinks (20130424055025)
Migrating to AllowNullsInIncomingLinks (20130426044914)
Migrating to AddIncomingIpCurrentUserIdToIncomingLinks (20130426052257)
Migrating to AddUnstarredAtToTopicUsers (20130428194335)
Migrating to AddSecurityToCategories (20130429000101)
Migrating to AddTopicAllowedGroups (20130430052751)
Migrating to FixTopicAllowedGroups (20130501105651)
Migrating to AddAutomaticToGroups (20130506020935)
Migrating to AddAutoCloseAtToTopics (20130506185042)
Migrating to AddUserCountToGroups (20130508040235)
Migrating to UpdateSequenceForGroups (20130509040248)
Migrating to AddUniqueNameToGroups (20130509041351)
Migrating to AddAutoCloseDaysToCategories (20130515193551)
Migrating to CreateCasUserInfos (20130521210140)
Migrating to RenameSearchTables (20130522193615)
Migrating to AddLikeScoreToPosts (20130527152648)
Migrating to AddRankToCategoryFeaturedTopics (20130528174147)
Migrating to AddStaffTookActionToPostActions (20130531210816)
Migrating to AddBlockedToUsers (20130603192412)
Migrating to AddAutoCloseStartedAtToTopics (20130606190601)
Migrating to AddReplyKeyToEmailLogs (20130610201033)
Migrating to CreatePostUploadJoinTable (20130612200846)
Migrating to DropPostsUploads (20130613211700)
Migrating to CreatePostUploads (20130613212230)
Migrating to RemoveTopicIdFromUploads (20130615073305)
Migrating to AddShaToUploads (20130615075557)
Migrating to CreateOptimizedImages (20130616082327)
Migrating to RenameShaAndExtColumns (20130617014127)
  [1m[36m (0.9ms)[0m  [1mSELECT version FROM schema_migrations ORDER BY version[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mPostActionType Load (0.9ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 1 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.3ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 3 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 4 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 5 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 8 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 6 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 7 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.4ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
  [1m[35m (0.4ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
  [1m[36m (0.9ms)[0m  [1mSELECT version FROM schema_migrations ORDER BY version[0m
  [1m[35m (157.0ms)[0m  DROP DATABASE IF EXISTS "discourse_test"
  [1m[36m (222.3ms)[0m  [1mCREATE DATABASE "discourse_test" ENCODING = 'utf8'[0m
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (2.0ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m


Started GET "/" for 127.0.0.1 at 2013-06-17 11:32:02 -0700
Processing by ListController#latest as HTML
  [1m[35mCategory Load (4.2ms)[0m  SELECT "categories".* FROM "categories" WHERE (NOT categories.secure) ORDER BY topic_count desc
  [1m[36mTopic Load (2.5ms)[0m  [1mSELECT id, title, slug FROM "topics" WHERE "topics"."id" IN (2) AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mPostActionType Load (1.7ms)[0m  SELECT "post_action_types".* FROM "post_action_types" ORDER BY position asc
  [1m[36m (1.6ms)[0m  [1mSHOW max_identifier_length[0m
  [1m[35mSQL (9.9ms)[0m  SELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') ORDER BY CASE WHEN topics.category_id IS NULL and (topics.pinned_at IS NOT NULL) THEN 0 ELSE 1 END, topics.bumped_at DESC LIMIT 30
  [1m[36mUser Load (3.1ms)[0m  [1mSELECT id, email, username FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mPost Load (4.2ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mPost Load (1.5ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  Rendered list/list.erb within layouts/application (1.4ms)
  Rendered common/_special_font_face.html.erb (0.9ms)
  [1m[35mSiteCustomization Load (1.6ms)[0m  SELECT "site_customizations".* FROM "site_customizations" WHERE "site_customizations"."enabled" = 't' LIMIT 1
  Rendered common/_discourse_stylesheet.html.erb (2325.6ms)
  Rendered common/_discourse_javascript.html.erb (2760.6ms)
Completed 200 OK in 6176ms (Views: 5103.8ms | ActiveRecord: 61.6ms)


Started GET "/t/1/1.json?track_visit=true" for 127.0.0.1 at 2013-06-17 11:32:25 -0700
Processing by TopicsController#show as JSON
  Parameters: {"track_visit"=>"true", "topic_id"=>"1", "post_number"=>"1"}
  [1m[36mTopic Load (2.4ms)[0m  [1mSELECT "topics".* FROM "topics" WHERE "topics"."id" = 1 AND ("topics"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mPost Load (3.1ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 1 AND ("posts"."deleted_at" IS NULL) ORDER BY @(post_number - 1) LIMIT 1
  [1m[36m (1.5ms)[0m  [1mSELECT id FROM "posts" WHERE "posts"."topic_id" = 1 AND ("posts"."deleted_at" IS NULL) ORDER BY sort_order[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "posts" WHERE "posts"."id" IN (1) AND ("posts"."deleted_at" IS NULL)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "posts" WHERE "posts"."id" IN (1) AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35mPost Load (1.6ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."id" IN (1) AND ("posts"."deleted_at" IS NULL) ORDER BY sort_order
  [1m[36mUser Load (1.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35m (3.4ms)[0m  SELECT
 l.post_id,
 l.url,
 l.clicks,
 t.title,
 l.internal,
 l.reflection
 FROM topic_links l
 LEFT JOIN topics t ON t.id = l.link_topic_id
 LEFT JOIN categories AS c ON c.id = t.category_id
 WHERE (t.deleted_at IS NULL) AND (l.post_id IN (1)) AND (NOT COALESCE(c.secure, false))
 ORDER BY reflection ASC, clicks DESC
  [1m[36mPostAction Load (1.9ms)[0m  [1mSELECT "post_actions".* FROM "post_actions" WHERE "post_actions"."post_id" IN (1) AND "post_actions"."user_id" = 0 AND ("post_actions"."deleted_at" IS NULL)[0m
  [1m[35m (3.1ms)[0m  SELECT MAX("posts"."post_number") AS max_id FROM "posts" WHERE "posts"."topic_id" = 1 AND ("posts"."deleted_at" IS NULL)
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "posts" WHERE "posts"."topic_id" = 1 AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mGroup Load (2.2ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "topic_allowed_groups" ON "groups"."id" = "topic_allowed_groups"."group_id" WHERE "topic_allowed_groups"."topic_id" = 1
  [1m[36m (2.9ms)[0m  [1mSELECT ftl.url,
 ft.title,
 ftl.link_topic_id,
 ftl.reflection,
 ftl.internal,
 MIN(ftl.user_id) AS user_id,
 SUM(clicks) AS clicks
 FROM topic_links AS ftl
 LEFT JOIN topics AS ft ON ftl.link_topic_id = ft.id
 LEFT JOIN categories AS c ON c.id = ft.category_id
 WHERE (ftl.topic_id = 1) AND (ft.deleted_at IS NULL) AND (NOT COALESCE(c.secure, false))
 GROUP BY ftl.url, ft.title, ftl.link_topic_id, ftl.reflection, ftl.internal
 ORDER BY clicks DESC[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) AS count_all, user_id AS user_id FROM "posts" WHERE "posts"."topic_id" = 1 AND ("posts"."deleted_at" IS NULL) GROUP BY user_id ORDER BY count_all desc LIMIT 24
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mSQL (2.9ms)[0m  SELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."closed" = 'f' AND "topics"."archived" = 'f' AND "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') AND (topics.id NOT IN (1)) ORDER BY RANDOM() LIMIT 5
  [1m[36mUser Load (2.2ms)[0m  [1mSELECT id, email, username FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mPost Load (1.8ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mGroup Load (1.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name[0m
  [1m[35mGroup Load (1.3ms)[0m  SELECT "groups".* FROM "groups" ORDER BY name
  [1m[36mPost Load (1.7ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".* FROM "groups" ORDER BY name[0m
Completed 200 OK in 269ms (Views: 0.2ms | ActiveRecord: 54.9ms)


Started GET "/latest.json" for 127.0.0.1 at 2013-06-17 11:32:29 -0700
Processing by ListController#latest as JSON
  [1m[35mSQL (2.3ms)[0m  SELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') ORDER BY CASE WHEN topics.category_id IS NULL and (topics.pinned_at IS NOT NULL) THEN 0 ELSE 1 END, topics.bumped_at DESC LIMIT 30
  [1m[36mUser Load (1.6ms)[0m  [1mSELECT id, email, username FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mPost Load (1.8ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mPost Load (1.8ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 7.5ms)
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.3ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m


Started GET "/" for 127.0.0.1 at 2013-06-17 11:44:55 -0700
Processing by ListController#latest as HTML
  [1m[35mCategory Load (1.6ms)[0m  SELECT "categories".* FROM "categories" WHERE (NOT categories.secure) ORDER BY topic_count desc
  [1m[36mTopic Load (1.7ms)[0m  [1mSELECT id, title, slug FROM "topics" WHERE "topics"."id" IN (2) AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mPostActionType Load (1.3ms)[0m  SELECT "post_action_types".* FROM "post_action_types" ORDER BY position asc
  [1m[36m (60.2ms)[0m  [1mSHOW max_identifier_length[0m
  [1m[35mSQL (3.9ms)[0m  SELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') ORDER BY CASE WHEN topics.category_id IS NULL and (topics.pinned_at IS NOT NULL) THEN 0 ELSE 1 END, topics.bumped_at DESC LIMIT 30
  [1m[36mUser Load (1.6ms)[0m  [1mSELECT id, email, username FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mPost Load (1.9ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mPost Load (2.0ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  Rendered list/list.erb within layouts/application (1.5ms)
  Rendered common/_special_font_face.html.erb (0.9ms)
  [1m[35mSiteCustomization Load (1.6ms)[0m  SELECT "site_customizations".* FROM "site_customizations" WHERE "site_customizations"."enabled" = 't' LIMIT 1
  Rendered common/_discourse_stylesheet.html.erb (145.0ms)
  Rendered common/_discourse_javascript.html.erb (544.4ms)
Completed 200 OK in 2066ms (Views: 699.9ms | ActiveRecord: 458.9ms)


Started GET "/categories.json" for 127.0.0.1 at 2013-06-17 11:45:01 -0700
Processing by CategoriesController#index as JSON
  [1m[36mCategoryFeaturedTopic Load (72.4ms)[0m  [1mSELECT category_id, topic_id FROM "category_featured_topics" ORDER BY rank[0m
  [1m[35mTopic Load (1.6ms)[0m  SELECT "topics".* FROM "topics" WHERE "topics"."id" IN (3, 2) AND ("topics"."deleted_at" IS NULL)
  [1m[36mCategory Load (1.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE (NOT categories.secure) ORDER BY COALESCE(categories.topics_week, 0) DESC, COALESCE(categories.topics_month, 0) DESC, COALESCE(categories.topics_year, 0) DESC[0m
  [1m[35mCategoryFeaturedUser Load (1.9ms)[0m  SELECT "category_featured_users".* FROM "category_featured_users" WHERE "category_featured_users"."category_id" IN (1)
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(count_column) FROM (SELECT 1 AS count_column FROM "topics" WHERE "topics"."category_id" IS NULL AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') LIMIT 6) subquery_for_count [0m
  [1m[35m (2.6ms)[0m  SELECT SUM(CASE WHEN created_at >= (CURRENT_TIMESTAMP - INTERVAL '1 WEEK') THEN 1 ELSE 0 END) as topics_week,
 SUM(CASE WHEN created_at >= (CURRENT_TIMESTAMP - INTERVAL '1 MONTH') THEN 1 ELSE 0 END) as topics_month,
 SUM(CASE WHEN created_at >= (CURRENT_TIMESTAMP - INTERVAL '1 YEAR') THEN 1 ELSE 0 END) as topics_year,
 COUNT(*) AS topic_count
 FROM topics
 WHERE topics.visible
 AND topics.deleted_at IS NULL
 AND topics.category_id IS NULL
 AND topics.archetype <> 'private_message'
  [1m[36mTopic Load (1.5ms)[0m  [1mSELECT "topics".* FROM "topics" WHERE "topics"."category_id" IS NULL AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') ORDER BY topics.bumped_at desc LIMIT 6[0m
  [1m[35mPost Load (1.6ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mPost Load (1.6ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
Completed 200 OK in 163ms (Views: 0.2ms | ActiveRecord: 97.2ms)
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.4ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m


Started GET "/" for 127.0.0.1 at 2013-06-17 19:13:16 -0700
Processing by ListController#latest as HTML
  [1m[35mCategory Load (1.7ms)[0m  SELECT "categories".* FROM "categories" WHERE (NOT categories.secure) ORDER BY topic_count desc
  [1m[36mTopic Load (1.5ms)[0m  [1mSELECT id, title, slug FROM "topics" WHERE "topics"."id" IN (2) AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mPostActionType Load (1.3ms)[0m  SELECT "post_action_types".* FROM "post_action_types" ORDER BY position asc
  [1m[36m (1.4ms)[0m  [1mSHOW max_identifier_length[0m
  [1m[35mSQL (3.7ms)[0m  SELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') ORDER BY CASE WHEN topics.category_id IS NULL and (topics.pinned_at IS NOT NULL) THEN 0 ELSE 1 END, topics.bumped_at DESC LIMIT 30
  [1m[36mUser Load (1.8ms)[0m  [1mSELECT id, email, username FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mPost Load (1.9ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mPost Load (1.6ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  Rendered list/list.erb within layouts/application (1.3ms)
  Rendered common/_special_font_face.html.erb (1.0ms)
  [1m[35mSiteCustomization Load (1.5ms)[0m  SELECT "site_customizations".* FROM "site_customizations" WHERE "site_customizations"."enabled" = 't' LIMIT 1
  Rendered common/_discourse_stylesheet.html.erb (2347.9ms)
  Rendered common/_discourse_javascript.html.erb (2337.7ms)
Completed 200 OK in 5747ms (Views: 4699.0ms | ActiveRecord: 44.0ms)
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.4ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
  [1m[35m (2.8ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Migrating to CreateForumThreads (20120311163914)
Migrating to CreatePosts (20120311164326)
Migrating to CreateUsers (20120311170118)
Migrating to CreateForums (20120311201341)
Migrating to CreateSites (20120311210245)
Migrating to AddReplyToToPosts (20120416201606)
Migrating to AddViewsToForumThreads (20120420183447)
Migrating to AddPostsCountToForumThreads (20120423140906)
Migrating to FixPostIndices (20120423142820)
Migrating to RemoveLastPostId (20120423151548)
Migrating to AddDisplayUsernameToUsers (20120425145456)
Migrating to AddUserIdIndexToPosts (20120427150624)
Migrating to CookedMigration (20120427151452)
Migrating to CreateVestalVersions (20120427154330)
Migrating to AddVersionToPosts (20120427172031)
Migrating to AddCreatedByToForumThreads (20120502183240)
Migrating to AddLastPostUserIdToForumThreads (20120502192121)
Migrating to AddSiteIdToUsers (20120503205521)
Migrating to CreateExpressions (20120507144132)
Migrating to CreateExpressionTypes (20120507144222)
Migrating to AddReplyCountToPosts (20120514144549)
Migrating to AddFlagToExpressionTypes (20120514173920)
Migrating to AddDescriptionToExpressionTypes (20120514204934)
Migrating to AddQuotelessToPost (20120517200130)
Migrating to CreateReadPosts (20120518200115)
Migrating to CreateLastReadPosts (20120519182212)
Migrating to CreateViews (20120523180723)
Migrating to AddRepliesToForumThreads (20120523184307)
Migrating to AddFeaturedToForumThreads (20120523201329)
Migrating to AddAvgTimeToForumThreads (20120525194845)
Migrating to CreateUploads (20120529175956)
Migrating to CreateStars (20120529202707)
Migrating to CreateForumThreadUser (20120530150726)
Migrating to MigratePosted (20120530160745)
Migrating to AddIndexToForumThreads (20120530200724)
Migrating to CreateForumThreadLinks (20120530212912)
Migrating to AddTagsToForumThreads (20120614190726)
Migrating to AddQuoteCountToPosts (20120614202024)
Migrating to CreateBookmarks (20120615180517)
Migrating to AddReplyBelowToPosts (20120618152946)
Migrating to CreatePostTimings (20120618212349)
Migrating to CreateMessageBus (20120618214856)
Migrating to FixPostTimings (20120619150807)
Migrating to DropReadPosts (20120619153349)
Migrating to AddPostNumberToBookmarks (20120619172714)
Migrating to AddSeenPostCountToForumThreadUsers (20120621155351)
Migrating to AddDeletedAtToForumThreads (20120621190310)
Migrating to CreateNotifications (20120622200242)
Migrating to AddSeenNotificationIdToUsers (20120625145714)
Migrating to AddDeletedAtToPosts (20120625162318)
Migrating to AddHighestPostNumberToForumThreads (20120625174544)
Migrating to AddImageUrlToForumThreads (20120625195326)
Migrating to RenameExpressionTypeId (20120629143908)
Migrating to DenormalizeExpressions (20120629150253)
Migrating to MakeExpressionsLessGeneric (20120629151243)
Migrating to CreateIncomingLinks (20120629182637)
Migrating to CreateReplies (20120702211427)
Migrating to AddReflectionToForumThreadLinks (20120703184734)
Migrating to AddIncomingLinkCountToPosts (20120703201312)
Migrating to AddIncomingLinkCountToForumThreads (20120703203623)
Migrating to AddBookmarkCountToPosts (20120703210004)
Migrating to AddAvgTimeToPosts (20120704160659)
Migrating to AddViewCountToPosts (20120704201743)
Migrating to AddUserToVersions (20120705181724)
Migrating to AddLastPostedAtToUsers (20120708210305)
Migrating to CreateCategories (20120712150500)
Migrating to AddCategoryIdToForumThreads (20120712151934)
Migrating to CreateCategoryFeaturedThreads (20120713201324)
Migrating to CreateSiteSettings (20120716020835)
Migrating to AddStatsToCategories (20120716173544)
Migrating to CreateUserOpenIds (20120718044955)
Migrating to AddEmailHashedPasswordNameSaltToUsers (20120719004636)
Migrating to AddUsernameLowerToUsers (20120720013733)
Migrating to AddAuthTokenToUsers (20120720044246)
Migrating to AddForumIdToCategories (20120720162422)
Migrating to AddNotNullsToUserOpenIds (20120723051512)
Migrating to AddLastSeenAtToUsers (20120724234502)
Migrating to AddWebsiteToUsers (20120724234711)
Migrating to AddExcerptToCategories (20120725183347)
Migrating to AddInvisibleToForumThread (20120726201830)
Migrating to AddUserIdToCategories (20120726235129)
Migrating to RemoveExcerptFromCategories (20120727005556)
Migrating to RenameInvisible (20120727150428)
Migrating to AddThreadCountsToCategories (20120727213543)
Migrating to AddIconToExpressionTypes (20120802151210)
Migrating to AddAdminFlagToUsers (20120803191426)
Migrating to AddNewPasswordNewSaltEmailTokenToUsers (20120806030641)
Migrating to RemoveNewPasswordStuffFromUser (20120806062617)
Migrating to CreateActions (20120807223020)
Migrating to RemoveSiteId (20120809020415)
Migrating to RemoveForumId (20120809030647)
Migrating to CorrectIndexingOnPosts (20120809053414)
Migrating to RemoveIndexForNow (20120809154750)
Migrating to CreatePostActions (20120809174649)
Migrating to CreatePostActionTypes (20120809175110)
Migrating to MigrateBookmarksToPostActions (20120809201855)
Migrating to RenameActionsToUserActions (20120810064839)
Migrating to RetireExpressions (20120812235417)
Migrating to RenameExpressionColumnsInForumThread (20120813004347)
Migrating to RenameExpressionColumnsInPosts (20120813042912)
Migrating to CreateForumThreadLinkClicks (20120813201426)
Migrating to AddUniqueIndexToForumThreadLinks (20120815004411)
Migrating to AddPostTypeToPosts (20120815180106)
Migrating to AddModeratorPostsCountToForumThreads (20120815204733)
Migrating to AddUniqueConstraintToUserActions (20120816050526)
Migrating to AddForumThreadStates (20120816205537)
Migrating to AddStarredAtToForumThreadUser (20120816205538)
Migrating to AddSearchIndices (20120820191804)
Migrating to AddBumpedAtToForumThreads (20120821191616)
Migrating to AddSlugToCategories (20120823205956)
Migrating to CreateCategoryFeaturedUsers (20120824171908)
Migrating to CreateOneboxRenders (20120828204209)
Migrating to CreatePostOneboxRenders (20120828204624)
Migrating to AddPreviewToOneboxRenders (20120830182736)
Migrating to RemoveDescriptionFromSiteSettings (20120910171504)
Migrating to RenameViewsToReads (20120918152319)
Migrating to AddSubTagToForumThreads (20120918205931)
Migrating to AddHasBestOfToForumThreads (20120919152846)
Migrating to AddTwitterUserInfo (20120921055428)
Migrating to CreateArchetypes (20120921155050)
Migrating to AddMetaDataToForumThreads (20120921162512)
Migrating to CreateArchetypeOptions (20120921163606)
Migrating to AddHstoreExtension (20120924182000)
Migrating to AddVoteCountToPosts (20120924182031)
Migrating to RemoveEnglishFromPostActionTypes (20120925171620)
Migrating to AddSequenceToPostActionTypes (20120925190802)
Migrating to AddSortOrderToPosts (20120928170023)
Migrating to AddEmailStuffToUsers (20121009161116)
Migrating to CreateEmailLogs (20121011155904)
Migrating to ConvertArchetypes (20121017162924)
Migrating to RenameForumThreadTables (20121018103721)
Migrating to CreateTopicAllowedUsers (20121018133039)
Migrating to FixNotificationData (20121018182709)
Migrating to DropAvatarUrlFromUsers (20121106015500)
Migrating to AddPostActionIdToNotifications (20121108193516)
Migrating to CreateTrustLevels (20121109164630)
Migrating to BioMarkdownSupport (20121113200844)
Migrating to CreateFacebookUserInfos (20121113200845)
Migrating to RenameStickyToPinned (20121115172544)
Migrating to AddMoreEmailSettingsToUser (20121116212424)
Migrating to AddEmailSettingsToUsers (20121119190529)
Migrating to AddEmailDirectToUsers (20121119200843)
Migrating to CreateInvites (20121121202035)
Migrating to CreateTopicInvites (20121121205215)
Migrating to AddMutedAtToTopicUser (20121122033316)
Migrating to MakePostNumberDistinct (20121123054127)
Migrating to CreateUserVisits (20121123063630)
Migrating to CreateEmailTokens (20121129160035)
Migrating to RemoveEmailTokenFromUsers (20121129184948)
Migrating to CreateDrafts (20121130010400)
Migrating to AddLinkPostIdToTopicLinks (20121130191818)
Migrating to AddVisitedAtToTopicUser (20121202225421)
Migrating to RenameSeenNotificaitonId (20121203181719)
Migrating to FixLinkPostId (20121204183855)
Migrating to AddAnotherFeaturedUserToTopics (20121204193747)
Migrating to AddApprovedToUsers (20121205162143)
Migrating to AddNotificationsToTopicUsers (20121207000741)
Migrating to CreateSiteCustomizations (20121211233131)
Migrating to AddOverrideDefaultStyleToSiteCustomization (20121216230719)
Migrating to AddTopicsEnteredToUsers (20121218205642)
Migrating to AddLastEditorIdToPosts (20121224072204)
Migrating to CreateDraftSequence (20121224095139)
Migrating to AddSequenceToDrafts (20121224100650)
Migrating to AddDeletedAtToInvites (20121228192219)
Migrating to AddDigestAfterDaysToUsers (20130107165207)
Migrating to AddPreviousVisitAtToUsers (20130108195847)
Migrating to MergeMuteOptionsOnTopicUsers (20130115012140)
Migrating to CorrectDefaultOnNotificationLevel (20130115021937)
Migrating to OopsUnwatchABoatOfWatchedStuff (20130115043603)
Migrating to RemoveSubTagFromTopics (20130116151829)
Migrating to FixSearch (20130120222728)
Migrating to AddTrackingToTopicUsers (20130121231352)
Migrating to AddAutoTrackTopicsToUser (20130122051134)
Migrating to AddAutoTrackAfterSecondsAndBanningAndDobToUser (20130122232825)
Migrating to AutoTrackAllTopicsRepliedTo (20130123070909)
Migrating to AddHiddenToPosts (20130125002652)
Migrating to AddFieldsToPostAction (20130125030305)
Migrating to CorrectIndexOnPostAction (20130125031122)
Migrating to RemoveTrustLevels (20130127213646)
Migrating to TrustLevelDefaultNull (20130128182013)
Migrating to RemovePmReflections (20130129010625)
Migrating to AddTimeReadToUsers (20130129163244)
Migrating to AddDaysVisitedToUsers (20130129174845)
Migrating to RemoveIndexFromViews (20130130154611)
Migrating to AddCustomFlagCountToTopics (20130131055710)
Migrating to AddColumnSummariesToPostsAndTopics (20130201000828)
Migrating to AddPositionToPostActionType (20130201023409)
Migrating to AddLastVersionAtToPosts (20130203204338)
Migrating to AddIpAddressToUsers (20130204000159)
Migrating to AlterFacebookUserId (20130205021905)
Migrating to AddUserDeletedToPosts (20130207200019)
Migrating to RemoveReplyBelowPostNumberFromPosts (20130208220635)
Migrating to RemoveTopicResponseActions (20130213021450)
Migrating to AddNewTopicDurationMinutesToUsers (20130213203300)
Migrating to AddDescriptionToCategories (20130221215017)
Migrating to AddGithubUserInfo (20130226015336)
Migrating to AddClearedPinnedToTopicUsers (20130306180148)
Migrating to RemoveExtraSpamRecord (20130311181327)
Migrating to AddExternalLinksInNewTabAnDisableQuotingToUser (20130313004922)
Migrating to AddForegroundColorToCategories (20130314093434)
Migrating to EnableTrigramSupport (20130315180637)
Migrating to AddReplyToUserIdToPost (20130319122248)
Migrating to AddUserIndexesToPostsAndTopics (20130320012100)
Migrating to AddModeratorToUser (20130320024345)
Migrating to RemoveOneboxesFromDb (20130321154905)
Migrating to AddPercentRankToPosts (20130322183614)
Migrating to AddHotnessToCategory (20130326210101)
Migrating to UpdateSiteSettingsForHot (20130327185852)
Migrating to CreateHotTopics (20130328162943)
Migrating to AddScoreToTopics (20130328182433)
Migrating to AddValuesToHotTopics (20130402210723)
Migrating to CreateSiteContents (20130404143437)
Migrating to AddUserExtras (20130404232558)
Migrating to CreateAdminLogs (20130411205132)
Migrating to CorrectCountsOnPosts (20130412015502)
Migrating to CorrectCountsOnTopics (20130412020156)
Migrating to CreateGroups (20130416004607)
Migrating to GroupUsers (20130416004933)
Migrating to AddSubtypeToTopics (20130416170855)
Migrating to IncreaseDataLengthOnNotifications (20130419195746)
Migrating to AddRelatedPostIdToPostActions (20130422050626)
Migrating to AddSlugToTopics (20130424015746)
Migrating to AddUserIdToIncomingLinks (20130424055025)
Migrating to AllowNullsInIncomingLinks (20130426044914)
Migrating to AddIncomingIpCurrentUserIdToIncomingLinks (20130426052257)
Migrating to AddUnstarredAtToTopicUsers (20130428194335)
Migrating to AddSecurityToCategories (20130429000101)
Migrating to AddTopicAllowedGroups (20130430052751)
Migrating to FixTopicAllowedGroups (20130501105651)
Migrating to AddAutomaticToGroups (20130506020935)
Migrating to AddAutoCloseAtToTopics (20130506185042)
Migrating to AddUserCountToGroups (20130508040235)
Migrating to UpdateSequenceForGroups (20130509040248)
Migrating to AddUniqueNameToGroups (20130509041351)
Migrating to AddAutoCloseDaysToCategories (20130515193551)
Migrating to CreateCasUserInfos (20130521210140)
Migrating to RenameSearchTables (20130522193615)
Migrating to AddLikeScoreToPosts (20130527152648)
Migrating to AddRankToCategoryFeaturedTopics (20130528174147)
Migrating to AddStaffTookActionToPostActions (20130531210816)
Migrating to AddBlockedToUsers (20130603192412)
Migrating to AddAutoCloseStartedAtToTopics (20130606190601)
Migrating to AddReplyKeyToEmailLogs (20130610201033)
Migrating to CreatePostUploadJoinTable (20130612200846)
Migrating to DropPostsUploads (20130613211700)
Migrating to CreatePostUploads (20130613212230)
Migrating to AddDynamicFaviconPreferenceToUser (20130615064344)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (25.9ms)[0m  ALTER TABLE "users" ADD COLUMN "dynamic_favicon" boolean DEFAULT 'f' NOT NULL
  [1m[36m (1.6ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130615064344')[0m
  [1m[35m (0.6ms)[0m  COMMIT
Migrating to RemoveTopicIdFromUploads (20130615073305)
Migrating to AddShaToUploads (20130615075557)
Migrating to CreateOptimizedImages (20130616082327)
Migrating to RenameShaAndExtColumns (20130617014127)
Migrating to AddPostIdToEmailLogs (20130617181804)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.7ms)[0m  ALTER TABLE "email_logs" ADD COLUMN "post_id" integer
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "email_logs" ADD COLUMN "topic_id" integer[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130617181804')
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (1.8ms)[0m  SELECT version FROM schema_migrations ORDER BY version
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mPostActionType Load (0.5ms)[0m  SELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 1 LIMIT 1
  [1m[36m (1.1ms)[0m  [1mSELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);[0m
  [1m[35mPostActionType Load (0.3ms)[0m  SELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 2 LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);[0m
  [1m[35mPostActionType Load (0.3ms)[0m  SELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 3 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);[0m
  [1m[35mPostActionType Load (0.2ms)[0m  SELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 4 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);[0m
  [1m[35mPostActionType Load (0.2ms)[0m  SELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 5 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);[0m
  [1m[35mPostActionType Load (0.2ms)[0m  SELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 8 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);[0m
  [1m[35mPostActionType Load (0.2ms)[0m  SELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 6 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);[0m
  [1m[35mPostActionType Load (0.2ms)[0m  SELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 7 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);[0m
  [1m[35m (0.3ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.1ms)[0m  COMMIT
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.4ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
  [1m[35m (0.4ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Migrating to CreateForumThreads (20120311163914)
Migrating to CreatePosts (20120311164326)
Migrating to CreateUsers (20120311170118)
Migrating to CreateForums (20120311201341)
Migrating to CreateSites (20120311210245)
Migrating to AddReplyToToPosts (20120416201606)
Migrating to AddViewsToForumThreads (20120420183447)
Migrating to AddPostsCountToForumThreads (20120423140906)
Migrating to FixPostIndices (20120423142820)
Migrating to RemoveLastPostId (20120423151548)
Migrating to AddDisplayUsernameToUsers (20120425145456)
Migrating to AddUserIdIndexToPosts (20120427150624)
Migrating to CookedMigration (20120427151452)
Migrating to CreateVestalVersions (20120427154330)
Migrating to AddVersionToPosts (20120427172031)
Migrating to AddCreatedByToForumThreads (20120502183240)
Migrating to AddLastPostUserIdToForumThreads (20120502192121)
Migrating to AddSiteIdToUsers (20120503205521)
Migrating to CreateExpressions (20120507144132)
Migrating to CreateExpressionTypes (20120507144222)
Migrating to AddReplyCountToPosts (20120514144549)
Migrating to AddFlagToExpressionTypes (20120514173920)
Migrating to AddDescriptionToExpressionTypes (20120514204934)
Migrating to AddQuotelessToPost (20120517200130)
Migrating to CreateReadPosts (20120518200115)
Migrating to CreateLastReadPosts (20120519182212)
Migrating to CreateViews (20120523180723)
Migrating to AddRepliesToForumThreads (20120523184307)
Migrating to AddFeaturedToForumThreads (20120523201329)
Migrating to AddAvgTimeToForumThreads (20120525194845)
Migrating to CreateUploads (20120529175956)
Migrating to CreateStars (20120529202707)
Migrating to CreateForumThreadUser (20120530150726)
Migrating to MigratePosted (20120530160745)
Migrating to AddIndexToForumThreads (20120530200724)
Migrating to CreateForumThreadLinks (20120530212912)
Migrating to AddTagsToForumThreads (20120614190726)
Migrating to AddQuoteCountToPosts (20120614202024)
Migrating to CreateBookmarks (20120615180517)
Migrating to AddReplyBelowToPosts (20120618152946)
Migrating to CreatePostTimings (20120618212349)
Migrating to CreateMessageBus (20120618214856)
Migrating to FixPostTimings (20120619150807)
Migrating to DropReadPosts (20120619153349)
Migrating to AddPostNumberToBookmarks (20120619172714)
Migrating to AddSeenPostCountToForumThreadUsers (20120621155351)
Migrating to AddDeletedAtToForumThreads (20120621190310)
Migrating to CreateNotifications (20120622200242)
Migrating to AddSeenNotificationIdToUsers (20120625145714)
Migrating to AddDeletedAtToPosts (20120625162318)
Migrating to AddHighestPostNumberToForumThreads (20120625174544)
Migrating to AddImageUrlToForumThreads (20120625195326)
Migrating to RenameExpressionTypeId (20120629143908)
Migrating to DenormalizeExpressions (20120629150253)
Migrating to MakeExpressionsLessGeneric (20120629151243)
Migrating to CreateIncomingLinks (20120629182637)
Migrating to CreateReplies (20120702211427)
Migrating to AddReflectionToForumThreadLinks (20120703184734)
Migrating to AddIncomingLinkCountToPosts (20120703201312)
Migrating to AddIncomingLinkCountToForumThreads (20120703203623)
Migrating to AddBookmarkCountToPosts (20120703210004)
Migrating to AddAvgTimeToPosts (20120704160659)
Migrating to AddViewCountToPosts (20120704201743)
Migrating to AddUserToVersions (20120705181724)
Migrating to AddLastPostedAtToUsers (20120708210305)
Migrating to CreateCategories (20120712150500)
Migrating to AddCategoryIdToForumThreads (20120712151934)
Migrating to CreateCategoryFeaturedThreads (20120713201324)
Migrating to CreateSiteSettings (20120716020835)
Migrating to AddStatsToCategories (20120716173544)
Migrating to CreateUserOpenIds (20120718044955)
Migrating to AddEmailHashedPasswordNameSaltToUsers (20120719004636)
Migrating to AddUsernameLowerToUsers (20120720013733)
Migrating to AddAuthTokenToUsers (20120720044246)
Migrating to AddForumIdToCategories (20120720162422)
Migrating to AddNotNullsToUserOpenIds (20120723051512)
Migrating to AddLastSeenAtToUsers (20120724234502)
Migrating to AddWebsiteToUsers (20120724234711)
Migrating to AddExcerptToCategories (20120725183347)
Migrating to AddInvisibleToForumThread (20120726201830)
Migrating to AddUserIdToCategories (20120726235129)
Migrating to RemoveExcerptFromCategories (20120727005556)
Migrating to RenameInvisible (20120727150428)
Migrating to AddThreadCountsToCategories (20120727213543)
Migrating to AddIconToExpressionTypes (20120802151210)
Migrating to AddAdminFlagToUsers (20120803191426)
Migrating to AddNewPasswordNewSaltEmailTokenToUsers (20120806030641)
Migrating to RemoveNewPasswordStuffFromUser (20120806062617)
Migrating to CreateActions (20120807223020)
Migrating to RemoveSiteId (20120809020415)
Migrating to RemoveForumId (20120809030647)
Migrating to CorrectIndexingOnPosts (20120809053414)
Migrating to RemoveIndexForNow (20120809154750)
Migrating to CreatePostActions (20120809174649)
Migrating to CreatePostActionTypes (20120809175110)
Migrating to MigrateBookmarksToPostActions (20120809201855)
Migrating to RenameActionsToUserActions (20120810064839)
Migrating to RetireExpressions (20120812235417)
Migrating to RenameExpressionColumnsInForumThread (20120813004347)
Migrating to RenameExpressionColumnsInPosts (20120813042912)
Migrating to CreateForumThreadLinkClicks (20120813201426)
Migrating to AddUniqueIndexToForumThreadLinks (20120815004411)
Migrating to AddPostTypeToPosts (20120815180106)
Migrating to AddModeratorPostsCountToForumThreads (20120815204733)
Migrating to AddUniqueConstraintToUserActions (20120816050526)
Migrating to AddForumThreadStates (20120816205537)
Migrating to AddStarredAtToForumThreadUser (20120816205538)
Migrating to AddSearchIndices (20120820191804)
Migrating to AddBumpedAtToForumThreads (20120821191616)
Migrating to AddSlugToCategories (20120823205956)
Migrating to CreateCategoryFeaturedUsers (20120824171908)
Migrating to CreateOneboxRenders (20120828204209)
Migrating to CreatePostOneboxRenders (20120828204624)
Migrating to AddPreviewToOneboxRenders (20120830182736)
Migrating to RemoveDescriptionFromSiteSettings (20120910171504)
Migrating to RenameViewsToReads (20120918152319)
Migrating to AddSubTagToForumThreads (20120918205931)
Migrating to AddHasBestOfToForumThreads (20120919152846)
Migrating to AddTwitterUserInfo (20120921055428)
Migrating to CreateArchetypes (20120921155050)
Migrating to AddMetaDataToForumThreads (20120921162512)
Migrating to CreateArchetypeOptions (20120921163606)
Migrating to AddHstoreExtension (20120924182000)
Migrating to AddVoteCountToPosts (20120924182031)
Migrating to RemoveEnglishFromPostActionTypes (20120925171620)
Migrating to AddSequenceToPostActionTypes (20120925190802)
Migrating to AddSortOrderToPosts (20120928170023)
Migrating to AddEmailStuffToUsers (20121009161116)
Migrating to CreateEmailLogs (20121011155904)
Migrating to ConvertArchetypes (20121017162924)
Migrating to RenameForumThreadTables (20121018103721)
Migrating to CreateTopicAllowedUsers (20121018133039)
Migrating to FixNotificationData (20121018182709)
Migrating to DropAvatarUrlFromUsers (20121106015500)
Migrating to AddPostActionIdToNotifications (20121108193516)
Migrating to CreateTrustLevels (20121109164630)
Migrating to BioMarkdownSupport (20121113200844)
Migrating to CreateFacebookUserInfos (20121113200845)
Migrating to RenameStickyToPinned (20121115172544)
Migrating to AddMoreEmailSettingsToUser (20121116212424)
Migrating to AddEmailSettingsToUsers (20121119190529)
Migrating to AddEmailDirectToUsers (20121119200843)
Migrating to CreateInvites (20121121202035)
Migrating to CreateTopicInvites (20121121205215)
Migrating to AddMutedAtToTopicUser (20121122033316)
Migrating to MakePostNumberDistinct (20121123054127)
Migrating to CreateUserVisits (20121123063630)
Migrating to CreateEmailTokens (20121129160035)
Migrating to RemoveEmailTokenFromUsers (20121129184948)
Migrating to CreateDrafts (20121130010400)
Migrating to AddLinkPostIdToTopicLinks (20121130191818)
Migrating to AddVisitedAtToTopicUser (20121202225421)
Migrating to RenameSeenNotificaitonId (20121203181719)
Migrating to FixLinkPostId (20121204183855)
Migrating to AddAnotherFeaturedUserToTopics (20121204193747)
Migrating to AddApprovedToUsers (20121205162143)
Migrating to AddNotificationsToTopicUsers (20121207000741)
Migrating to CreateSiteCustomizations (20121211233131)
Migrating to AddOverrideDefaultStyleToSiteCustomization (20121216230719)
Migrating to AddTopicsEnteredToUsers (20121218205642)
Migrating to AddLastEditorIdToPosts (20121224072204)
Migrating to CreateDraftSequence (20121224095139)
Migrating to AddSequenceToDrafts (20121224100650)
Migrating to AddDeletedAtToInvites (20121228192219)
Migrating to AddDigestAfterDaysToUsers (20130107165207)
Migrating to AddPreviousVisitAtToUsers (20130108195847)
Migrating to MergeMuteOptionsOnTopicUsers (20130115012140)
Migrating to CorrectDefaultOnNotificationLevel (20130115021937)
Migrating to OopsUnwatchABoatOfWatchedStuff (20130115043603)
Migrating to RemoveSubTagFromTopics (20130116151829)
Migrating to FixSearch (20130120222728)
Migrating to AddTrackingToTopicUsers (20130121231352)
Migrating to AddAutoTrackTopicsToUser (20130122051134)
Migrating to AddAutoTrackAfterSecondsAndBanningAndDobToUser (20130122232825)
Migrating to AutoTrackAllTopicsRepliedTo (20130123070909)
Migrating to AddHiddenToPosts (20130125002652)
Migrating to AddFieldsToPostAction (20130125030305)
Migrating to CorrectIndexOnPostAction (20130125031122)
Migrating to RemoveTrustLevels (20130127213646)
Migrating to TrustLevelDefaultNull (20130128182013)
Migrating to RemovePmReflections (20130129010625)
Migrating to AddTimeReadToUsers (20130129163244)
Migrating to AddDaysVisitedToUsers (20130129174845)
Migrating to RemoveIndexFromViews (20130130154611)
Migrating to AddCustomFlagCountToTopics (20130131055710)
Migrating to AddColumnSummariesToPostsAndTopics (20130201000828)
Migrating to AddPositionToPostActionType (20130201023409)
Migrating to AddLastVersionAtToPosts (20130203204338)
Migrating to AddIpAddressToUsers (20130204000159)
Migrating to AlterFacebookUserId (20130205021905)
Migrating to AddUserDeletedToPosts (20130207200019)
Migrating to RemoveReplyBelowPostNumberFromPosts (20130208220635)
Migrating to RemoveTopicResponseActions (20130213021450)
Migrating to AddNewTopicDurationMinutesToUsers (20130213203300)
Migrating to AddDescriptionToCategories (20130221215017)
Migrating to AddGithubUserInfo (20130226015336)
Migrating to AddClearedPinnedToTopicUsers (20130306180148)
Migrating to RemoveExtraSpamRecord (20130311181327)
Migrating to AddExternalLinksInNewTabAnDisableQuotingToUser (20130313004922)
Migrating to AddForegroundColorToCategories (20130314093434)
Migrating to EnableTrigramSupport (20130315180637)
Migrating to AddReplyToUserIdToPost (20130319122248)
Migrating to AddUserIndexesToPostsAndTopics (20130320012100)
Migrating to AddModeratorToUser (20130320024345)
Migrating to RemoveOneboxesFromDb (20130321154905)
Migrating to AddPercentRankToPosts (20130322183614)
Migrating to AddHotnessToCategory (20130326210101)
Migrating to UpdateSiteSettingsForHot (20130327185852)
Migrating to CreateHotTopics (20130328162943)
Migrating to AddScoreToTopics (20130328182433)
Migrating to AddValuesToHotTopics (20130402210723)
Migrating to CreateSiteContents (20130404143437)
Migrating to AddUserExtras (20130404232558)
Migrating to CreateAdminLogs (20130411205132)
Migrating to CorrectCountsOnPosts (20130412015502)
Migrating to CorrectCountsOnTopics (20130412020156)
Migrating to CreateGroups (20130416004607)
Migrating to GroupUsers (20130416004933)
Migrating to AddSubtypeToTopics (20130416170855)
Migrating to IncreaseDataLengthOnNotifications (20130419195746)
Migrating to AddRelatedPostIdToPostActions (20130422050626)
Migrating to AddSlugToTopics (20130424015746)
Migrating to AddUserIdToIncomingLinks (20130424055025)
Migrating to AllowNullsInIncomingLinks (20130426044914)
Migrating to AddIncomingIpCurrentUserIdToIncomingLinks (20130426052257)
Migrating to AddUnstarredAtToTopicUsers (20130428194335)
Migrating to AddSecurityToCategories (20130429000101)
Migrating to AddTopicAllowedGroups (20130430052751)
Migrating to FixTopicAllowedGroups (20130501105651)
Migrating to AddAutomaticToGroups (20130506020935)
Migrating to AddAutoCloseAtToTopics (20130506185042)
Migrating to AddUserCountToGroups (20130508040235)
Migrating to UpdateSequenceForGroups (20130509040248)
Migrating to AddUniqueNameToGroups (20130509041351)
Migrating to AddAutoCloseDaysToCategories (20130515193551)
Migrating to CreateCasUserInfos (20130521210140)
Migrating to RenameSearchTables (20130522193615)
Migrating to AddLikeScoreToPosts (20130527152648)
Migrating to AddRankToCategoryFeaturedTopics (20130528174147)
Migrating to AddStaffTookActionToPostActions (20130531210816)
Migrating to AddBlockedToUsers (20130603192412)
Migrating to AddAutoCloseStartedAtToTopics (20130606190601)
Migrating to AddReplyKeyToEmailLogs (20130610201033)
Migrating to CreatePostUploadJoinTable (20130612200846)
Migrating to DropPostsUploads (20130613211700)
Migrating to CreatePostUploads (20130613212230)
Migrating to AddDynamicFaviconPreferenceToUser (20130615064344)
Migrating to RemoveTopicIdFromUploads (20130615073305)
Migrating to AddShaToUploads (20130615075557)
Migrating to CreateOptimizedImages (20130616082327)
Migrating to RenameShaAndExtColumns (20130617014127)
Migrating to AddPostIdToEmailLogs (20130617181804)
  [1m[36m (1.8ms)[0m  [1mSELECT version FROM schema_migrations ORDER BY version[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mPostActionType Load (0.6ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 1 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.3ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 4 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 5 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 8 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 6 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 7 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.4ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m


Started GET "/" for 127.0.0.1 at 2013-06-17 20:54:05 -0700
Processing by ListController#latest as HTML
  [1m[35mCategory Load (1.7ms)[0m  SELECT "categories".* FROM "categories" WHERE (NOT categories.secure) ORDER BY topic_count desc
  [1m[36mTopic Load (1.7ms)[0m  [1mSELECT id, title, slug FROM "topics" WHERE "topics"."id" IN (2) AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mPostActionType Load (1.3ms)[0m  SELECT "post_action_types".* FROM "post_action_types" ORDER BY position asc
  [1m[36m (1.3ms)[0m  [1mSHOW max_identifier_length[0m
  [1m[35mSQL (3.8ms)[0m  SELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') ORDER BY CASE WHEN topics.category_id IS NULL and (topics.pinned_at IS NOT NULL) THEN 0 ELSE 1 END, topics.bumped_at DESC LIMIT 30
  [1m[36mUser Load (1.7ms)[0m  [1mSELECT id, email, username FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mPost Load (1.9ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mPost Load (1.7ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  Rendered list/list.erb within layouts/application (1.4ms)
  Rendered common/_special_font_face.html.erb (0.9ms)
  [1m[35mSiteCustomization Load (1.6ms)[0m  SELECT "site_customizations".* FROM "site_customizations" WHERE "site_customizations"."enabled" = 't' LIMIT 1
  Rendered common/_discourse_stylesheet.html.erb (2542.3ms)
  Rendered common/_discourse_javascript.html.erb (3317.0ms)
Completed 200 OK in 6932ms (Views: 5873.2ms | ActiveRecord: 46.4ms)


Started GET "/t/1/1.json?track_visit=true" for 127.0.0.1 at 2013-06-17 20:54:35 -0700
Processing by TopicsController#show as JSON
  Parameters: {"track_visit"=>"true", "topic_id"=>"1", "post_number"=>"1"}
  [1m[36mTopic Load (1.6ms)[0m  [1mSELECT "topics".* FROM "topics" WHERE "topics"."id" = 1 AND ("topics"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mPost Load (4.3ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 1 AND ("posts"."deleted_at" IS NULL) ORDER BY @(post_number - 1) LIMIT 1
  [1m[36m (2.2ms)[0m  [1mSELECT id FROM "posts" WHERE "posts"."topic_id" = 1 AND ("posts"."deleted_at" IS NULL) ORDER BY sort_order[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "posts" WHERE "posts"."id" IN (1) AND ("posts"."deleted_at" IS NULL)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "posts" WHERE "posts"."id" IN (1) AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35mPost Load (1.9ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."id" IN (1) AND ("posts"."deleted_at" IS NULL) ORDER BY sort_order
  [1m[36mUser Load (2.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35m (3.1ms)[0m  SELECT
 l.post_id,
 l.url,
 l.clicks,
 t.title,
 l.internal,
 l.reflection
 FROM topic_links l
 LEFT JOIN topics t ON t.id = l.link_topic_id
 LEFT JOIN categories AS c ON c.id = t.category_id
 WHERE (t.deleted_at IS NULL) AND (l.post_id IN (1)) AND (NOT COALESCE(c.secure, false))
 ORDER BY reflection ASC, clicks DESC
  [1m[36mPostAction Load (2.0ms)[0m  [1mSELECT "post_actions".* FROM "post_actions" WHERE "post_actions"."post_id" IN (1) AND "post_actions"."user_id" = 0 AND ("post_actions"."deleted_at" IS NULL)[0m
  [1m[35m (1.7ms)[0m  SELECT MAX("posts"."post_number") AS max_id FROM "posts" WHERE "posts"."topic_id" = 1 AND ("posts"."deleted_at" IS NULL)
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "posts" WHERE "posts"."topic_id" = 1 AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35mUser Load (4.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mGroup Load (2.4ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "topic_allowed_groups" ON "groups"."id" = "topic_allowed_groups"."group_id" WHERE "topic_allowed_groups"."topic_id" = 1
  [1m[36m (2.3ms)[0m  [1mSELECT ftl.url,
 ft.title,
 ftl.link_topic_id,
 ftl.reflection,
 ftl.internal,
 MIN(ftl.user_id) AS user_id,
 SUM(clicks) AS clicks
 FROM topic_links AS ftl
 LEFT JOIN topics AS ft ON ftl.link_topic_id = ft.id
 LEFT JOIN categories AS c ON c.id = ft.category_id
 WHERE (ftl.topic_id = 1) AND (ft.deleted_at IS NULL) AND (NOT COALESCE(c.secure, false))
 GROUP BY ftl.url, ft.title, ftl.link_topic_id, ftl.reflection, ftl.internal
 ORDER BY clicks DESC[0m
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) AS count_all, user_id AS user_id FROM "posts" WHERE "posts"."topic_id" = 1 AND ("posts"."deleted_at" IS NULL) GROUP BY user_id ORDER BY count_all desc LIMIT 24
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mSQL (2.5ms)[0m  SELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."closed" = 'f' AND "topics"."archived" = 'f' AND "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') AND (topics.id NOT IN (1)) ORDER BY RANDOM() LIMIT 5
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT id, email, username FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mPost Load (1.6ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mGroup Load (1.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name[0m
  [1m[35mGroup Load (1.4ms)[0m  SELECT "groups".* FROM "groups" ORDER BY name
  [1m[36mPost Load (1.7ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".* FROM "groups" ORDER BY name[0m
Completed 200 OK in 268ms (Views: 0.2ms | ActiveRecord: 56.8ms)
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.9ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mPostActionType Load (0.7ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 1 LIMIT 1[0m
  [1m[35m (0.8ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 2 LIMIT 1[0m
  [1m[35m (0.6ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.5ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 3 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 4 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 5 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 8 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.4ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 6 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.5ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 7 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (0.1ms)[0m  [1mCOMMIT[0m
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.4ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.3ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m


Started GET "/" for 127.0.0.1 at 2013-06-18 01:28:38 -0700
Processing by ListController#latest as HTML
  [1m[35mCategory Load (1.9ms)[0m  SELECT "categories".* FROM "categories" WHERE (NOT categories.secure) ORDER BY topic_count desc
  [1m[36mTopic Load (1.8ms)[0m  [1mSELECT id, title, slug FROM "topics" WHERE "topics"."id" IN (2, 4) AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mPostActionType Load (1.4ms)[0m  SELECT "post_action_types".* FROM "post_action_types" ORDER BY position asc
  [1m[36m (1.4ms)[0m  [1mSHOW max_identifier_length[0m
  [1m[35mSQL (3.8ms)[0m  SELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') ORDER BY CASE WHEN topics.category_id IS NULL and (topics.pinned_at IS NOT NULL) THEN 0 ELSE 1 END, topics.bumped_at DESC LIMIT 30
  [1m[36mUser Load (1.5ms)[0m  [1mSELECT id, email, username FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mPost Load (1.7ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mPost Load (1.8ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mPost Load (1.6ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  Rendered list/list.erb within layouts/application (1.5ms)
  Rendered common/_special_font_face.html.erb (0.9ms)
  [1m[36mSiteCustomization Load (1.7ms)[0m  [1mSELECT "site_customizations".* FROM "site_customizations" WHERE "site_customizations"."enabled" = 't' LIMIT 1[0m
  Rendered common/_discourse_stylesheet.html.erb (217.4ms)
  Rendered common/_discourse_javascript.html.erb (672.2ms)
Completed 200 OK in 2002ms (Views: 904.6ms | ActiveRecord: 45.4ms)


Started GET "/users/hp.json" for 127.0.0.1 at 2013-06-18 01:28:52 -0700
Processing by UsersController#get_honeypot_value as JSON
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.0ms)


Started GET "/users/check_username?username=Cata&email=18deltamedic%40gmail.com" for 127.0.0.1 at 2013-06-18 01:29:09 -0700
Processing by UsersController#check_username as JSON
  Parameters: {"username"=>"Cata", "email"=>"18deltamedic@gmail.com"}
  [1m[35m (1.7ms)[0m  SELECT COUNT(*) FROM "users" WHERE "users"."username_lower" = 'cata'
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."username_lower" = 'cata'[0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM "users" WHERE "users"."username_lower" = 'cata1'
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 2.9ms)


Started POST "/session" for 127.0.0.1 at 2013-06-18 01:29:22 -0700
Processing by SessionController#create as */*
  Parameters: {"login"=>"forumadmin", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username_lower" = 'forumadmin' LIMIT 1[0m
Completed 200 OK in 159ms (Views: 0.2ms | ActiveRecord: 1.7ms)


Started POST "/session" for 127.0.0.1 at 2013-06-18 01:29:28 -0700
Processing by SessionController#create as */*
  Parameters: {"login"=>"forumadmin", "password"=>"[FILTERED]"}
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username_lower" = 'forumadmin' LIMIT 1
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "email_tokens" WHERE "email_tokens"."user_id" = 1 AND "email_tokens"."email" = 'team@discourse.org' AND "email_tokens"."confirmed" = 't'[0m
  [1m[35mUserAction Load (2.4ms)[0m  
 SELECT action_type, COUNT(*) count
 FROM user_actions a
 JOIN topics t ON t.id = a.target_topic_id
 LEFT JOIN posts p on p.id = a.target_post_id
 JOIN posts p2 on p2.topic_id = a.target_topic_id and p2.post_number = 1
 LEFT JOIN categories c ON c.id = t.category_id
 WHERE (a.user_id = 1) AND (p.deleted_at is null and p2.deleted_at is null and t.deleted_at is null) AND (a.action_type not in (3)) AND (t.archetype != 'private_message') AND ((c.secure IS NULL OR c.secure = 'f'))
 GROUP BY action_type

  [1m[36mInvite Load (1.5ms)[0m  [1mSELECT "invites".* FROM "invites" WHERE "invites"."user_id" = 1 AND ("invites"."deleted_at" IS NULL) AND (redeemed_at is not null) LIMIT 1[0m
Completed 200 OK in 294ms (Views: 0.1ms | ActiveRecord: 21.5ms)


Started POST "/login" for 127.0.0.1 at 2013-06-18 01:29:28 -0700
Processing by StaticController#enter as HTML
  Parameters: {"username"=>"forumadmin", "password"=>"[FILTERED]", "redirect"=>"http://0.0.0.0:3000/", "authenticity_token"=>""}
WARNING: Can't verify CSRF token authenticity
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."auth_token" = '8102fd64abe0a669dc300e5141b0ce55' LIMIT 1
  [1m[36mUserVisit Load (1.2ms)[0m  [1mSELECT "user_visits".* FROM "user_visits" WHERE "user_visits"."user_id" = 1 AND "user_visits"."visited_at" = '2013-06-18' LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  UPDATE "users" SET "last_seen_at" = '2013-06-18 08:29:28' WHERE "users"."id" = 1
  [1m[36mCategory Load (1.2ms)[0m  [1mSELECT id FROM "categories" WHERE "categories"."secure" = 't'[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT id FROM "categories" WHERE "categories"."secure" = 't'
  [1m[36mCategory Load (1.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE (NOT categories.secure) ORDER BY topic_count desc[0m
  [1m[35mTopic Load (1.3ms)[0m  SELECT id, title, slug FROM "topics" WHERE "topics"."id" IN (2, 4) AND ("topics"."deleted_at" IS NULL)
  [1m[36mPostActionType Load (1.1ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" ORDER BY position asc[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) AS count_all, notification_type AS notification_type FROM "notifications" WHERE "notifications"."user_id" = 1 AND (id > 0 and read = false) GROUP BY notification_type
  [1m[36m (68.9ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."user_id" = 1 AND (read = false AND notification_type = 6)[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "topics" WHERE "topics"."user_id" = 1 AND ("topics"."deleted_at" IS NULL)
  [1m[36m (2.8ms)[0m  [1m SELECT u.id AS user_id, topics.id AS topic_id, topics.created_at, highest_post_number, last_read_post_number, c.name AS category_name
 FROM users u
 FULL OUTER JOIN topics ON 1=1
 LEFT JOIN topic_users tu ON tu.topic_id = topics.id AND tu.user_id = u.id
 LEFT JOIN categories c ON c.id = topics.category_id
 WHERE u.id IN (1) AND
 topics.archetype <> 'private_message' AND
 ((tu.last_read_post_number < topics.highest_post_number AND COALESCE(tu.notification_level, 1) >= 2) OR (topics.created_at >= CASE
 WHEN COALESCE(u.new_topic_duration_minutes, 2880) = -1 THEN u.created_at
 WHEN COALESCE(u.new_topic_duration_minutes, 2880) = -2 THEN COALESCE(u.previous_visit_at,u.created_at)
 ELSE ('2013-06-18 08:29:28'::timestamp - INTERVAL '1 MINUTE' * COALESCE(u.new_topic_duration_minutes, 2880))
 END AND tu.last_read_post_number IS NULL AND COALESCE(tu.notification_level, 2) >= 2)) AND
 (topics.visible OR u.admin OR u.moderator) AND
 topics.deleted_at IS NULL AND
 ( category_id IS NULL OR NOT c.secure OR category_id IN (
 SELECT c2.id FROM categories c2
 JOIN category_groups cg ON cg.category_id = c2.id
 JOIN group_users gu ON gu.user_id = u.id AND cg.group_id = gu.group_id
 WHERE c2.secure )
 )

[0m
Redirected to http://0.0.0.0:3000/
Completed 302 Found in 131ms (ActiveRecord: 92.3ms)


Started GET "/" for 127.0.0.1 at 2013-06-18 01:29:28 -0700
Processing by ListController#latest as HTML
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mCategory Load (1.1ms)[0m  [1mSELECT id FROM "categories" WHERE "categories"."secure" = 't'[0m
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) AS count_all, notification_type AS notification_type FROM "notifications" WHERE "notifications"."user_id" = 1 AND (id > 0 and read = false) GROUP BY notification_type
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."user_id" = 1 AND (read = false AND notification_type = 6)[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "topics" WHERE "topics"."user_id" = 1 AND ("topics"."deleted_at" IS NULL)
  [1m[36m (1.8ms)[0m  [1m SELECT u.id AS user_id, topics.id AS topic_id, topics.created_at, highest_post_number, last_read_post_number, c.name AS category_name
 FROM users u
 FULL OUTER JOIN topics ON 1=1
 LEFT JOIN topic_users tu ON tu.topic_id = topics.id AND tu.user_id = u.id
 LEFT JOIN categories c ON c.id = topics.category_id
 WHERE u.id IN (1) AND
 topics.archetype <> 'private_message' AND
 ((tu.last_read_post_number < topics.highest_post_number AND COALESCE(tu.notification_level, 1) >= 2) OR (topics.created_at >= CASE
 WHEN COALESCE(u.new_topic_duration_minutes, 2880) = -1 THEN u.created_at
 WHEN COALESCE(u.new_topic_duration_minutes, 2880) = -2 THEN COALESCE(u.previous_visit_at,u.created_at)
 ELSE ('2013-06-18 08:29:28'::timestamp - INTERVAL '1 MINUTE' * COALESCE(u.new_topic_duration_minutes, 2880))
 END AND tu.last_read_post_number IS NULL AND COALESCE(tu.notification_level, 2) >= 2)) AND
 (topics.visible OR u.admin OR u.moderator) AND
 topics.deleted_at IS NULL AND
 ( category_id IS NULL OR NOT c.secure OR category_id IN (
 SELECT c2.id FROM categories c2
 JOIN category_groups cg ON cg.category_id = c2.id
 JOIN group_users gu ON gu.user_id = u.id AND cg.group_id = gu.group_id
 WHERE c2.secure )
 )

[0m
  [1m[35m (1.2ms)[0m  select sequence from draft_sequences where user_id = 1 and draft_key = 'new_topic'
  [1m[36mDraft Load (1.5ms)[0m  [1mSELECT "drafts".* FROM "drafts" WHERE "drafts"."user_id" = 1 AND "drafts"."draft_key" = 'new_topic' LIMIT 1[0m
  [1m[35mTopic Load (1.9ms)[0m  SELECT "topics".* FROM "topics" LEFT OUTER JOIN topic_users AS tu ON (topics.id = tu.topic_id AND tu.user_id = 1) WHERE ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') ORDER BY CASE
 WHEN topics.category_id IS NULL and (COALESCE(topics.pinned_at, '2010-01-01') > COALESCE(tu.cleared_pinned_at, '2010-01-01'))
 THEN '3000-01-01'
 ELSE topics.bumped_at
 END DESC LIMIT 30
  [1m[36mCategory Load (1.5ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."id" IN (1, 2)[0m
  [1m[35mTopic Load (1.4ms)[0m  SELECT id, title, slug FROM "topics" WHERE "topics"."id" IN (2, 4) AND ("topics"."deleted_at" IS NULL)
  [1m[36mTopicUser Load (1.2ms)[0m  [1mSELECT "topic_users".* FROM "topic_users" WHERE "topic_users"."topic_id" IN (5, 4, 3, 2, 1) AND "topic_users"."user_id" = 1[0m
  [1m[35mUser Load (1.4ms)[0m  SELECT id, email, username FROM "users" WHERE "users"."id" IN (1)
  [1m[36mPost Load (1.4ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mPost Load (1.5ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mPost Load (1.6ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  Rendered list/list.erb within layouts/application (0.5ms)
  Rendered common/_special_font_face.html.erb (0.3ms)
  Rendered common/_discourse_stylesheet.html.erb (401.7ms)
  Rendered common/_discourse_javascript.html.erb (875.3ms)
Completed 200 OK in 1356ms (Views: 1281.6ms | ActiveRecord: 32.1ms)


Started GET "/user_actions?offset=0&username=forumadmin" for 127.0.0.1 at 2013-06-18 01:29:33 -0700
Processing by UserActionsController#index as JSON
  Parameters: {"offset"=>"0", "username"=>"forumadmin"}
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Unpermitted parameters: username
  [1m[36mUser Load (1.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username_lower" = 'forumadmin' LIMIT 1[0m
  [1m[35m (3.9ms)[0m  
SELECT
 t.title, a.action_type, a.created_at, t.id topic_id,
 a.user_id AS target_user_id, au.name AS target_name, au.username AS target_username,
 coalesce(p.post_number, 1) post_number,
 p.reply_to_post_number,
 pu.email ,pu.username, pu.name, pu.id user_id,
 u.email acting_email, u.username acting_username, u.name acting_name, u.id acting_user_id,
 coalesce(p.cooked, p2.cooked) cooked,
 CASE WHEN coalesce(p.deleted_at, p2.deleted_at, t.deleted_at) IS NULL THEN false ELSE true END deleted,
 p.hidden
FROM user_actions as a
JOIN topics t on t.id = a.target_topic_id
LEFT JOIN posts p on p.id = a.target_post_id
JOIN posts p2 on p2.topic_id = a.target_topic_id and p2.post_number = 1
JOIN users u on u.id = a.acting_user_id
JOIN users pu on pu.id = COALESCE(p.user_id, t.user_id)
JOIN users au on au.id = a.user_id
LEFT JOIN categories c on c.id = t.category_id
WHERE (t.archetype != 'private_message') AND (a.user_id = 1)
ORDER BY a.created_at desc
OFFSET 0
LIMIT 60

Completed 200 OK in 99ms (Views: 0.1ms | ActiveRecord: 6.8ms)


Started GET "/users/forumadmin.json" for 127.0.0.1 at 2013-06-18 01:29:33 -0700
Processing by UsersController#show as JSON
  Parameters: {"username"=>"forumadmin"}
  [1m[36mUser Load (1.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username_lower" = 'forumadmin' LIMIT 1
  [1m[36mUserAction Load (1.8ms)[0m  [1m
 SELECT action_type, COUNT(*) count
 FROM user_actions a
 JOIN topics t ON t.id = a.target_topic_id
 LEFT JOIN posts p on p.id = a.target_post_id
 JOIN posts p2 on p2.topic_id = a.target_topic_id and p2.post_number = 1
 LEFT JOIN categories c ON c.id = t.category_id
 WHERE (a.user_id = 1)
 GROUP BY action_type
[0m
  [1m[35mInvite Load (2.0ms)[0m  SELECT "invites".* FROM "invites" WHERE "invites"."user_id" = 1 AND ("invites"."deleted_at" IS NULL) AND (redeemed_at is not null) LIMIT 1
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 6.6ms)


Started POST "/session/forgot_password" for 127.0.0.1 at 2013-06-18 01:29:39 -0700
Processing by SessionController#forgot_password as JSON
  Parameters: {"login"=>"forumadmin"}
  [1m[36mUser Load (1.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mUser Load (1.5ms)[0m  SELECT "users".* FROM "users" WHERE (username_lower = 'forumadmin' or email = 'forumadmin') LIMIT 1
  [1m[36m (0.9ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (3.3ms)[0m  INSERT INTO "email_tokens" ("confirmed", "created_at", "email", "expired", "token", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["confirmed", false], ["created_at", Tue, 18 Jun 2013 04:29:39 EDT -04:00], ["email", "team@discourse.org"], ["expired", false], ["token", "630916397c7d8b4b6b2a59e7b0761f08"], ["updated_at", Tue, 18 Jun 2013 04:29:39 EDT -04:00], ["user_id", 1]]
  [1m[36mSQL (1.5ms)[0m  [1mUPDATE "email_tokens" SET expired = true WHERE (user_id = 1 and id != 5)[0m
  [1m[35m (3.1ms)[0m  COMMIT
Completed 200 OK in 30ms (Views: 0.2ms | ActiveRecord: 13.3ms)


Started PUT "/users/forumadmin/preferences/email" for 127.0.0.1 at 2013-06-18 01:30:10 -0700
Processing by UsersController#change_email as */*
  Parameters: {"email"=>"pensivearchitect@gmail.com", "username"=>"forumadmin"}
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username_lower" = 'forumadmin' LIMIT 1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE (email = 'pensivearchitect@gmail.com') LIMIT 1[0m
Completed 500 Internal Server Error in 20ms

Discourse::InvalidParameters - email:
  app/controllers/users_controller.rb:262:in `change_email'
  (gem) actionpack-3.2.12/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  (gem) actionpack-3.2.12/lib/abstract_controller/base.rb:167:in `process_action'
  (gem) actionpack-3.2.12/lib/action_controller/metal/rendering.rb:10:in `process_action'
  (gem) actionpack-3.2.12/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:524:in `_run__2895860335451048425__process_action__4164456529106162478__callbacks'
  (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'
  (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'
  (gem) actionpack-3.2.12/lib/abstract_controller/callbacks.rb:17:in `process_action'
  (gem) actionpack-3.2.12/lib/action_controller/metal/rescue.rb:29:in `process_action'
  (gem) actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  (gem) activesupport-3.2.12/lib/active_support/notifications.rb:123:in `block in instrument'
  (gem) activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  (gem) activesupport-3.2.12/lib/active_support/notifications.rb:123:in `instrument'
  (gem) actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  (gem) actionpack-3.2.12/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  (gem) activerecord-3.2.12/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  (gem) actionpack-3.2.12/lib/abstract_controller/base.rb:121:in `process'
  (gem) actionpack-3.2.12/lib/abstract_controller/rendering.rb:45:in `process'
  (gem) rack-mini-profiler-0.1.26/Ruby/lib/mini_profiler/profiling_methods.rb:90:in `block in profile_method'
  (gem) actionpack-3.2.12/lib/action_controller/metal.rb:203:in `dispatch'
  (gem) actionpack-3.2.12/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  (gem) actionpack-3.2.12/lib/action_controller/metal.rb:246:in `block in action'
  (gem) actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  (gem) actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:36:in `call'
  (gem) journey-1.0.4/lib/journey/router.rb:68:in `block in call'
  (gem) journey-1.0.4/lib/journey/router.rb:56:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:601:in `call'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:401:in `call_app!'
  vendor/cache/omniauth-browserid-af62d667626c/lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:183:in `call!'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
  (gem) omniauth-1.1.4/lib/omniauth/builder.rb:49:in `call'
  vendor/cache/message_bus-9c16e7ebaafa/lib/message_bus/rack/middleware.rb:42:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  (gem) rack-1.4.5/lib/rack/etag.rb:23:in `call'
  (gem) rack-1.4.5/lib/rack/conditionalget.rb:35:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/head.rb:14:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/flash.rb:242:in `call'
  (gem) rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
  (gem) rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/cookies.rb:341:in `call'
  (gem) activerecord-3.2.12/lib/active_record/query_cache.rb:64:in `call'
  (gem) activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `_run__2193545145691488009__call__1077681511820080467__callbacks'
  (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'
  (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/reloader.rb:65:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  (gem) better_errors-0.8.0/lib/better_errors/middleware.rb:84:in `protected_app_call'
  (gem) better_errors-0.8.0/lib/better_errors/middleware.rb:79:in `better_errors_call'
  (gem) better_errors-0.8.0/lib/better_errors/middleware.rb:56:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  (gem) railties-3.2.12/lib/rails/rack/logger.rb:32:in `call_app'
  (gem) railties-3.2.12/lib/rails/rack/logger.rb:16:in `block in call'
  (gem) activesupport-3.2.12/lib/active_support/tagged_logging.rb:22:in `tagged'
  (gem) railties-3.2.12/lib/rails/rack/logger.rb:16:in `call'
  config/initializers/quiet_logger.rb:10:in `call_with_quiet_assets'
  config/initializers/silence_logger.rb:19:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/request_id.rb:22:in `call'
  (gem) rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
  (gem) rack-1.4.5/lib/rack/runtime.rb:17:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/static.rb:62:in `call'
  lib/middleware/turbo_dev.rb:19:in `call'
  (gem) rack-mini-profiler-0.1.26/Ruby/lib/mini_profiler/profiler.rb:278:in `call'
  (gem) railties-3.2.12/lib/rails/engine.rb:479:in `call'
  (gem) railties-3.2.12/lib/rails/application.rb:223:in `call'
  (gem) railties-3.2.12/lib/rails/railtie/configurable.rb:30:in `method_missing'
  (gem) rack-1.4.5/lib/rack/builder.rb:134:in `call'
  (gem) rack-1.4.5/lib/rack/urlmap.rb:64:in `block in call'
  (gem) rack-1.4.5/lib/rack/urlmap.rb:49:in `call'
  (gem) rack-1.4.5/lib/rack/content_length.rb:14:in `call'
  (gem) railties-3.2.12/lib/rails/rack/log_tailer.rb:17:in `call'
  (gem) thin-1.5.1/lib/thin/connection.rb:81:in `block in pre_process'
  (gem) thin-1.5.1/lib/thin/connection.rb:79:in `pre_process'
  (gem) thin-1.5.1/lib/thin/connection.rb:54:in `process'
  (gem) thin-1.5.1/lib/thin/connection.rb:39:in `receive_data'
  (gem) eventmachine-1.0.3/lib/eventmachine.rb:187:in `run'
  (gem) thin-1.5.1/lib/thin/backends/base.rb:63:in `start'
  (gem) thin-1.5.1/lib/thin/server.rb:159:in `start'
  (gem) rack-1.4.5/lib/rack/handler/thin.rb:13:in `run'
  (gem) rack-1.4.5/lib/rack/server.rb:268:in `start'
  (gem) railties-3.2.12/lib/rails/commands/server.rb:70:in `start'
  (gem) railties-3.2.12/lib/rails/commands.rb:55:in `block in <top (required)>'
  (gem) railties-3.2.12/lib/rails/commands.rb:50:in `<top (required)>'
  script/rails:6:in `<main>'



Started PUT "/users/forumadmin/preferences/email" for 127.0.0.1 at 2013-06-18 01:30:10 -0700
Processing by UsersController#change_email as */*
  Parameters: {"email"=>"pensivearchitect@gmail.com", "username"=>"forumadmin"}
  [1m[35mUser Load (1.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username_lower" = 'forumadmin' LIMIT 1[0m
  [1m[35mUser Exists (1.2ms)[0m  SELECT 1 AS one FROM "users" WHERE (email = 'pensivearchitect@gmail.com') LIMIT 1
Completed 500 Internal Server Error in 8ms

Discourse::InvalidParameters - email:
  app/controllers/users_controller.rb:262:in `change_email'
  (gem) actionpack-3.2.12/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  (gem) actionpack-3.2.12/lib/abstract_controller/base.rb:167:in `process_action'
  (gem) actionpack-3.2.12/lib/action_controller/metal/rendering.rb:10:in `process_action'
  (gem) actionpack-3.2.12/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:524:in `_run__2895860335451048425__process_action__4164456529106162478__callbacks'
  (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'
  (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'
  (gem) actionpack-3.2.12/lib/abstract_controller/callbacks.rb:17:in `process_action'
  (gem) actionpack-3.2.12/lib/action_controller/metal/rescue.rb:29:in `process_action'
  (gem) actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  (gem) activesupport-3.2.12/lib/active_support/notifications.rb:123:in `block in instrument'
  (gem) activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  (gem) activesupport-3.2.12/lib/active_support/notifications.rb:123:in `instrument'
  (gem) actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  (gem) actionpack-3.2.12/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  (gem) activerecord-3.2.12/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  (gem) actionpack-3.2.12/lib/abstract_controller/base.rb:121:in `process'
  (gem) actionpack-3.2.12/lib/abstract_controller/rendering.rb:45:in `process'
  (gem) rack-mini-profiler-0.1.26/Ruby/lib/mini_profiler/profiling_methods.rb:90:in `block in profile_method'
  (gem) actionpack-3.2.12/lib/action_controller/metal.rb:203:in `dispatch'
  (gem) actionpack-3.2.12/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  (gem) actionpack-3.2.12/lib/action_controller/metal.rb:246:in `block in action'
  (gem) actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  (gem) actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:36:in `call'
  (gem) journey-1.0.4/lib/journey/router.rb:68:in `block in call'
  (gem) journey-1.0.4/lib/journey/router.rb:56:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:601:in `call'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:401:in `call_app!'
  vendor/cache/omniauth-browserid-af62d667626c/lib/omniauth/strategies/browser_id.rb:19:in `other_phase'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:183:in `call!'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:184:in `call!'
  (gem) omniauth-1.1.4/lib/omniauth/strategy.rb:164:in `call'
  (gem) omniauth-1.1.4/lib/omniauth/builder.rb:49:in `call'
  vendor/cache/message_bus-9c16e7ebaafa/lib/message_bus/rack/middleware.rb:42:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  (gem) rack-1.4.5/lib/rack/etag.rb:23:in `call'
  (gem) rack-1.4.5/lib/rack/conditionalget.rb:35:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/head.rb:14:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/flash.rb:242:in `call'
  (gem) rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
  (gem) rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/cookies.rb:341:in `call'
  (gem) activerecord-3.2.12/lib/active_record/query_cache.rb:64:in `call'
  (gem) activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `_run__2193545145691488009__call__1077681511820080467__callbacks'
  (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'
  (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/reloader.rb:65:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  (gem) better_errors-0.8.0/lib/better_errors/middleware.rb:84:in `protected_app_call'
  (gem) better_errors-0.8.0/lib/better_errors/middleware.rb:79:in `better_errors_call'
  (gem) better_errors-0.8.0/lib/better_errors/middleware.rb:56:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  (gem) railties-3.2.12/lib/rails/rack/logger.rb:32:in `call_app'
  (gem) railties-3.2.12/lib/rails/rack/logger.rb:16:in `block in call'
  (gem) activesupport-3.2.12/lib/active_support/tagged_logging.rb:22:in `tagged'
  (gem) railties-3.2.12/lib/rails/rack/logger.rb:16:in `call'
  config/initializers/quiet_logger.rb:10:in `call_with_quiet_assets'
  config/initializers/silence_logger.rb:19:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/request_id.rb:22:in `call'
  (gem) rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
  (gem) rack-1.4.5/lib/rack/runtime.rb:17:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/static.rb:62:in `call'
  lib/middleware/turbo_dev.rb:19:in `call'
  (gem) rack-mini-profiler-0.1.26/Ruby/lib/mini_profiler/profiler.rb:278:in `call'
  (gem) railties-3.2.12/lib/rails/engine.rb:479:in `call'
  (gem) railties-3.2.12/lib/rails/application.rb:223:in `call'
  (gem) railties-3.2.12/lib/rails/railtie/configurable.rb:30:in `method_missing'
  (gem) rack-1.4.5/lib/rack/builder.rb:134:in `call'
  (gem) rack-1.4.5/lib/rack/urlmap.rb:64:in `block in call'
  (gem) rack-1.4.5/lib/rack/urlmap.rb:49:in `call'
  (gem) rack-1.4.5/lib/rack/content_length.rb:14:in `call'
  (gem) railties-3.2.12/lib/rails/rack/log_tailer.rb:17:in `call'
  (gem) thin-1.5.1/lib/thin/connection.rb:81:in `block in pre_process'
  (gem) thin-1.5.1/lib/thin/connection.rb:79:in `pre_process'
  (gem) thin-1.5.1/lib/thin/connection.rb:54:in `process'
  (gem) thin-1.5.1/lib/thin/connection.rb:39:in `receive_data'
  (gem) eventmachine-1.0.3/lib/eventmachine.rb:187:in `run'
  (gem) thin-1.5.1/lib/thin/backends/base.rb:63:in `start'
  (gem) thin-1.5.1/lib/thin/server.rb:159:in `start'
  (gem) rack-1.4.5/lib/rack/handler/thin.rb:13:in `run'
  (gem) rack-1.4.5/lib/rack/server.rb:268:in `start'
  (gem) railties-3.2.12/lib/rails/commands/server.rb:70:in `start'
  (gem) railties-3.2.12/lib/rails/commands.rb:55:in `block in <top (required)>'
  (gem) railties-3.2.12/lib/rails/commands.rb:50:in `<top (required)>'
  script/rails:6:in `<main>'



Started GET "/admin/users/forumadmin" for 127.0.0.1 at 2013-06-18 01:30:31 -0700
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
Processing by Admin::UsersController#show as JSON
  Parameters: {"id"=>"forumadmin"}
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUserVisit Load (72.1ms)[0m  [1mSELECT "user_visits".* FROM "user_visits" WHERE "user_visits"."user_id" = 1 AND "user_visits"."visited_at" = '2013-06-18' LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m  UPDATE "users" SET "last_seen_at" = '2013-06-18 08:30:31' WHERE "users"."id" = 1
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username_lower" = 'forumadmin' LIMIT 1[0m
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "user_actions" WHERE "user_actions"."user_id" = 1 AND "user_actions"."action_type" = 2
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "posts" WHERE "posts"."user_id" = 1 AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."user_id" = 1 AND "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL)
  [1m[36m (1.7ms)[0m  [1mSELECT COUNT(DISTINCT "posts"."id") FROM "posts" LEFT OUTER JOIN "post_actions" ON "post_actions"."post_id" = "posts"."id" WHERE "posts"."user_id" = 1 AND "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "topics" INNER JOIN "topic_allowed_users" ON "topics"."id" = "topic_allowed_users"."topic_id" WHERE "topic_allowed_users"."user_id" = 1 AND "topics"."archetype" = 'private_message' AND ("topics"."deleted_at" IS NULL)
Completed 200 OK in 121ms (Views: 0.1ms | ActiveRecord: 89.0ms)


Started GET "/admin/groups.json" for 127.0.0.1 at 2013-06-18 01:30:33 -0700
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::GroupsController#index as JSON
  [1m[36mUser Load (1.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mGroup Load (1.4ms)[0m  SELECT "groups".* FROM "groups" ORDER BY name
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 2.9ms)


Started GET "/admin/users/list/active.json?filter=" for 127.0.0.1 at 2013-06-18 01:30:34 -0700
  [1m[36mUser Exists (1.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
Processing by Admin::UsersController#index as JSON
  Parameters: {"filter"=>"", "query"=>"active"}
  [1m[35mUser Load (2.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUser Load (4.1ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY COALESCE(last_seen_at, to_date('1970-01-01', 'YYYY-MM-DD')) DESC, username[0m
Completed 200 OK in 14ms (Views: 0.1ms | ActiveRecord: 6.4ms)


Started GET "/admin/users/cata" for 127.0.0.1 at 2013-06-18 01:30:38 -0700
  [1m[35mUser Exists (1.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
Processing by Admin::UsersController#show as JSON
  Parameters: {"id"=>"cata"}
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username_lower" = 'cata' LIMIT 1
  [1m[36m (1.9ms)[0m  [1mSELECT COUNT(*) FROM "user_actions" WHERE "user_actions"."user_id" = 2 AND "user_actions"."action_type" = 2[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "posts" WHERE "posts"."user_id" = 2 AND ("posts"."deleted_at" IS NULL)
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."user_id" = 2 AND "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL)[0m
  [1m[35m (1.6ms)[0m  SELECT COUNT(DISTINCT "posts"."id") FROM "posts" LEFT OUTER JOIN "post_actions" ON "post_actions"."post_id" = "posts"."id" WHERE "posts"."user_id" = 2 AND "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("posts"."deleted_at" IS NULL)
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "topics" INNER JOIN "topic_allowed_users" ON "topics"."id" = "topic_allowed_users"."topic_id" WHERE "topic_allowed_users"."user_id" = 2 AND "topics"."archetype" = 'private_message' AND ("topics"."deleted_at" IS NULL)[0m
Completed 200 OK in 23ms (Views: 0.1ms | ActiveRecord: 11.3ms)


Started GET "/admin/users/list/active.json?filter=" for 127.0.0.1 at 2013-06-18 01:30:45 -0700
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
Processing by Admin::UsersController#index as JSON
  Parameters: {"filter"=>"", "query"=>"active"}
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mUser Load (1.9ms)[0m  SELECT "users".* FROM "users" ORDER BY COALESCE(last_seen_at, to_date('1970-01-01', 'YYYY-MM-DD')) DESC, username
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 3.3ms)


Started GET "/admin/users/cata" for 127.0.0.1 at 2013-06-18 01:30:53 -0700
  [1m[36mUser Exists (1.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
Processing by Admin::UsersController#show as JSON
  Parameters: {"id"=>"cata"}
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username_lower" = 'cata' LIMIT 1[0m
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "user_actions" WHERE "user_actions"."user_id" = 2 AND "user_actions"."action_type" = 2
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "posts" WHERE "posts"."user_id" = 2 AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35m (2.1ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."user_id" = 2 AND "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL)
  [1m[36m (1.9ms)[0m  [1mSELECT COUNT(DISTINCT "posts"."id") FROM "posts" LEFT OUTER JOIN "post_actions" ON "post_actions"."post_id" = "posts"."id" WHERE "posts"."user_id" = 2 AND "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35m (1.8ms)[0m  SELECT COUNT(*) FROM "topics" INNER JOIN "topic_allowed_users" ON "topics"."id" = "topic_allowed_users"."topic_id" WHERE "topic_allowed_users"."user_id" = 2 AND "topics"."archetype" = 'private_message' AND ("topics"."deleted_at" IS NULL)
Completed 200 OK in 23ms (Views: 0.2ms | ActiveRecord: 11.4ms)


Started POST "/admin/impersonate" for 127.0.0.1 at 2013-06-18 01:31:15 -0700
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::ImpersonateController#create as */*
  Parameters: {"username_or_email"=>"Cata"}
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mUser Load (73.5ms)[0m  SELECT "users".* FROM "users" WHERE (username_lower = 'cata' or lower(username) = 'cata' or email = 'Cata' or lower(name) = 'cata') LIMIT 1
  [1m[36m (0.9ms)[0m  [1mBEGIN[0m
  [1m[35mUser Exists (1.6ms)[0m  SELECT 1 AS one FROM "users" WHERE ("users"."email" = 'pensivearchitect@gmail.com' AND "users"."id" != 2) LIMIT 1
  [1m[36m (1.5ms)[0m  [1mUPDATE "users" SET "auth_token" = '782a26104bf6f05fc0eac4321712dee8', "updated_at" = '2013-06-18 08:31:15.670936' WHERE "users"."id" = 2[0m
  [1m[35m (2.6ms)[0m  COMMIT
  Rendered text template (0.0ms)
Completed 200 OK in 92ms (Views: 1.1ms | ActiveRecord: 81.6ms)


Started POST "/admin/impersonate" for 127.0.0.1 at 2013-06-18 01:31:15 -0700
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::ImpersonateController#create as */*
  Parameters: {"username_or_email"=>"Cata"}
  [1m[36mUser Load (1.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mUser Load (1.5ms)[0m  SELECT "users".* FROM "users" WHERE (username_lower = 'cata' or lower(username) = 'cata' or email = 'Cata' or lower(name) = 'cata') LIMIT 1
  Rendered text template (0.0ms)
Completed 200 OK in 8ms (Views: 0.4ms | ActiveRecord: 3.2ms)


Started GET "/" for 127.0.0.1 at 2013-06-18 01:31:15 -0700
Processing by ListController#latest as HTML
  [1m[36mUser Load (1.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
  [1m[35mUserVisit Load (1.5ms)[0m  SELECT "user_visits".* FROM "user_visits" WHERE "user_visits"."user_id" = 2 AND "user_visits"."visited_at" = '2013-06-18' LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mUPDATE "users" SET "days_visited" = 1 WHERE "users"."id" = 2[0m
  [1m[35m (1.0ms)[0m  BEGIN
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "user_visits" ("user_id", "visited_at") VALUES ($1, $2) RETURNING "id"[0m  [["user_id", 2], ["visited_at", Tue, 18 Jun 2013]]
  [1m[35m (1.4ms)[0m  COMMIT
  [1m[36mSQL (1.8ms)[0m  [1mUPDATE "users" SET "last_seen_at" = '2013-06-18 08:31:15' WHERE "users"."id" = 2[0m
  [1m[35mSQL (1.8ms)[0m  UPDATE "users" SET "ip_address" = '127.0.0.1' WHERE "users"."id" = 2
  [1m[36mCategory Load (1.4ms)[0m  [1mSELECT categories.id FROM "categories" INNER JOIN "category_groups" ON "categories"."id" = "category_groups"."category_id" INNER JOIN "groups" ON "category_groups"."group_id" = "groups"."id" INNER JOIN "group_users" ON "groups"."id" = "group_users"."group_id" WHERE "group_users"."user_id" = 2[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT categories.id FROM "categories" INNER JOIN "category_groups" ON "categories"."id" = "category_groups"."category_id" INNER JOIN "groups" ON "category_groups"."group_id" = "groups"."id" INNER JOIN "group_users" ON "groups"."id" = "group_users"."group_id" WHERE "group_users"."user_id" = 2
  [1m[36mCategory Load (1.2ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE (NOT categories.secure) ORDER BY topic_count desc[0m
  [1m[35mTopic Load (1.3ms)[0m  SELECT id, title, slug FROM "topics" WHERE "topics"."id" IN (2, 4) AND ("topics"."deleted_at" IS NULL)
  [1m[36mPostActionType Load (1.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" ORDER BY position asc[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) AS count_all, notification_type AS notification_type FROM "notifications" WHERE "notifications"."user_id" = 2 AND (id > 0 and read = false) GROUP BY notification_type
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."user_id" = 2 AND (read = false AND notification_type = 6)[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "topics" WHERE "topics"."user_id" = 2 AND ("topics"."deleted_at" IS NULL)
  [1m[36m (1.7ms)[0m  [1m SELECT u.id AS user_id, topics.id AS topic_id, topics.created_at, highest_post_number, last_read_post_number, c.name AS category_name
 FROM users u
 FULL OUTER JOIN topics ON 1=1
 LEFT JOIN topic_users tu ON tu.topic_id = topics.id AND tu.user_id = u.id
 LEFT JOIN categories c ON c.id = topics.category_id
 WHERE u.id IN (2) AND
 topics.archetype <> 'private_message' AND
 ((tu.last_read_post_number < topics.highest_post_number AND COALESCE(tu.notification_level, 1) >= 2) OR (topics.created_at >= CASE
 WHEN COALESCE(u.new_topic_duration_minutes, 2880) = -1 THEN u.created_at
 WHEN COALESCE(u.new_topic_duration_minutes, 2880) = -2 THEN COALESCE(u.previous_visit_at,u.created_at)
 ELSE ('2013-06-18 08:31:15'::timestamp - INTERVAL '1 MINUTE' * COALESCE(u.new_topic_duration_minutes, 2880))
 END AND tu.last_read_post_number IS NULL AND COALESCE(tu.notification_level, 2) >= 2)) AND
 (topics.visible OR u.admin OR u.moderator) AND
 topics.deleted_at IS NULL AND
 ( category_id IS NULL OR NOT c.secure OR category_id IN (
 SELECT c2.id FROM categories c2
 JOIN category_groups cg ON cg.category_id = c2.id
 JOIN group_users gu ON gu.user_id = u.id AND cg.group_id = gu.group_id
 WHERE c2.secure )
 )

[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT categories.id FROM "categories" INNER JOIN "category_groups" ON "categories"."id" = "category_groups"."category_id" INNER JOIN "groups" ON "category_groups"."group_id" = "groups"."id" INNER JOIN "group_users" ON "groups"."id" = "group_users"."group_id" WHERE "group_users"."user_id" = 2
  [1m[36m (1.0ms)[0m  [1mselect sequence from draft_sequences where user_id = 2 and draft_key = 'new_topic'[0m
  [1m[35mDraft Load (1.0ms)[0m  SELECT "drafts".* FROM "drafts" WHERE "drafts"."user_id" = 2 AND "drafts"."draft_key" = 'new_topic' LIMIT 1
  [1m[36m (1.3ms)[0m  [1mSELECT SUM("posts"."spam_count") AS sum_id FROM "posts" WHERE "posts"."user_id" = 2 AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35mSQL (2.4ms)[0m  SELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" LEFT OUTER JOIN topic_users AS tu ON (topics.id = tu.topic_id AND tu.user_id = 2) WHERE "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') ORDER BY CASE
 WHEN topics.category_id IS NULL and (COALESCE(topics.pinned_at, '2010-01-01') > COALESCE(tu.cleared_pinned_at, '2010-01-01'))
 THEN '3000-01-01'
 ELSE topics.bumped_at
 END DESC LIMIT 30
  [1m[36mTopicUser Load (1.3ms)[0m  [1mSELECT "topic_users".* FROM "topic_users" WHERE "topic_users"."topic_id" IN (5, 4, 3, 2, 1) AND "topic_users"."user_id" = 2[0m
  [1m[35mUser Load (1.3ms)[0m  SELECT id, email, username FROM "users" WHERE "users"."id" IN (1)
  [1m[36mPost Load (1.5ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mPost Load (1.5ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mPost Load (1.5ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  Rendered list/list.erb within layouts/application (0.4ms)
  Rendered common/_special_font_face.html.erb (0.3ms)
  Rendered common/_discourse_stylesheet.html.erb (4.6ms)
  Rendered common/_discourse_javascript.html.erb (97.0ms)
Completed 200 OK in 189ms (Views: 105.7ms | ActiveRecord: 38.6ms)


Started GET "/user_actions?offset=0&username=cata" for 127.0.0.1 at 2013-06-18 01:31:21 -0700
Processing by UserActionsController#index as JSON
  Parameters: {"offset"=>"0", "username"=>"cata"}
  [1m[35mUser Load (2.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
Unpermitted parameters: username
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username_lower" = 'cata' LIMIT 1[0m
  [1m[35mCategory Load (1.5ms)[0m  SELECT categories.id FROM "categories" INNER JOIN "category_groups" ON "categories"."id" = "category_groups"."category_id" INNER JOIN "groups" ON "category_groups"."group_id" = "groups"."id" INNER JOIN "group_users" ON "groups"."id" = "group_users"."group_id" WHERE "group_users"."user_id" = 2
  [1m[36m (3.9ms)[0m  [1m
SELECT
 t.title, a.action_type, a.created_at, t.id topic_id,
 a.user_id AS target_user_id, au.name AS target_name, au.username AS target_username,
 coalesce(p.post_number, 1) post_number,
 p.reply_to_post_number,
 pu.email ,pu.username, pu.name, pu.id user_id,
 u.email acting_email, u.username acting_username, u.name acting_name, u.id acting_user_id,
 coalesce(p.cooked, p2.cooked) cooked,
 CASE WHEN coalesce(p.deleted_at, p2.deleted_at, t.deleted_at) IS NULL THEN false ELSE true END deleted,
 p.hidden
FROM user_actions as a
JOIN topics t on t.id = a.target_topic_id
LEFT JOIN posts p on p.id = a.target_post_id
JOIN posts p2 on p2.topic_id = a.target_topic_id and p2.post_number = 1
JOIN users u on u.id = a.acting_user_id
JOIN users pu on pu.id = COALESCE(p.user_id, t.user_id)
JOIN users au on au.id = a.user_id
LEFT JOIN categories c on c.id = t.category_id
WHERE (p.deleted_at is null and p2.deleted_at is null and t.deleted_at is null) AND (t.archetype != 'private_message') AND ((c.secure IS NULL OR c.secure = 'f')) AND (a.user_id = 2)
ORDER BY a.created_at desc
OFFSET 0
LIMIT 60
[0m
Completed 200 OK in 15ms (Views: 0.1ms | ActiveRecord: 8.9ms)


Started GET "/users/Cata.json" for 127.0.0.1 at 2013-06-18 01:31:21 -0700
Processing by UsersController#show as JSON
  Parameters: {"username"=>"Cata"}
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username_lower" = 'cata' LIMIT 1[0m
  [1m[35mCategory Load (1.6ms)[0m  SELECT categories.id FROM "categories" INNER JOIN "category_groups" ON "categories"."id" = "category_groups"."category_id" INNER JOIN "groups" ON "category_groups"."group_id" = "groups"."id" INNER JOIN "group_users" ON "groups"."id" = "group_users"."group_id" WHERE "group_users"."user_id" = 2
  [1m[36mUserAction Load (1.8ms)[0m  [1m
 SELECT action_type, COUNT(*) count
 FROM user_actions a
 JOIN topics t ON t.id = a.target_topic_id
 LEFT JOIN posts p on p.id = a.target_post_id
 JOIN posts p2 on p2.topic_id = a.target_topic_id and p2.post_number = 1
 LEFT JOIN categories c ON c.id = t.category_id
 WHERE (a.user_id = 2) AND (p.deleted_at is null and p2.deleted_at is null and t.deleted_at is null) AND ((c.secure IS NULL OR c.secure = 'f'))
 GROUP BY action_type
[0m
  [1m[35mInvite Load (1.4ms)[0m  SELECT "invites".* FROM "invites" WHERE "invites"."user_id" = 2 AND ("invites"."deleted_at" IS NULL) AND (redeemed_at is not null) LIMIT 1
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 7.5ms)


Started PUT "/users/cata/preferences/email" for 127.0.0.1 at 2013-06-18 01:31:32 -0700
Processing by UsersController#change_email as */*
  Parameters: {"email"=>"18deltamedic@gmail.com", "username"=>"cata"}
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username_lower" = 'cata' LIMIT 1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE (email = '18deltamedic@gmail.com') LIMIT 1[0m
  [1m[35m (1.1ms)[0m  BEGIN
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "email_tokens" ("confirmed", "created_at", "email", "expired", "token", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["confirmed", false], ["created_at", Tue, 18 Jun 2013 04:31:32 EDT -04:00], ["email", "18deltamedic@gmail.com"], ["expired", false], ["token", "e5a15293232376b253c38f72765c563e"], ["updated_at", Tue, 18 Jun 2013 04:31:32 EDT -04:00], ["user_id", 2]]
  [1m[35mSQL (1.3ms)[0m  UPDATE "email_tokens" SET expired = true WHERE (user_id = 2 and id != 6)
  [1m[36m (2.8ms)[0m  [1mCOMMIT[0m
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 1.1ms | ActiveRecord: 10.3ms)


Started PUT "/users/cata/preferences/email" for 127.0.0.1 at 2013-06-18 01:31:32 -0700
Processing by UsersController#change_email as */*
  Parameters: {"email"=>"18deltamedic@gmail.com", "username"=>"cata"}
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username_lower" = 'cata' LIMIT 1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE (email = '18deltamedic@gmail.com') LIMIT 1
  [1m[36m (0.9ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "email_tokens" ("confirmed", "created_at", "email", "expired", "token", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["confirmed", false], ["created_at", Tue, 18 Jun 2013 04:31:32 EDT -04:00], ["email", "18deltamedic@gmail.com"], ["expired", false], ["token", "50baad0f380ee36cb4f0022587e97c5d"], ["updated_at", Tue, 18 Jun 2013 04:31:32 EDT -04:00], ["user_id", 2]]
  [1m[36mSQL (1.3ms)[0m  [1mUPDATE "email_tokens" SET expired = true WHERE (user_id = 2 and id != 7)[0m
  [1m[35m (1.4ms)[0m  COMMIT
  Rendered text template (0.0ms)
Completed 200 OK in 16ms (Views: 0.4ms | ActiveRecord: 8.6ms)


Started DELETE "/session/Cata" for 127.0.0.1 at 2013-06-18 01:31:35 -0700
Processing by SessionController#destroy as */*
  Parameters: {"id"=>"Cata"}
  [1m[36mUser Load (1.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
  Rendered text template (0.0ms)
Completed 200 OK in 5ms (Views: 1.0ms | ActiveRecord: 1.7ms)


Started GET "/users/cata/preferences/email" for 127.0.0.1 at 2013-06-18 01:31:35 -0700
Processing by UsersController#preferences as HTML
  Parameters: {"username"=>"cata"}
  [1m[35mCategory Load (2.0ms)[0m  SELECT "categories".* FROM "categories" WHERE (NOT categories.secure) ORDER BY topic_count desc
  [1m[36mTopic Load (1.3ms)[0m  [1mSELECT id, title, slug FROM "topics" WHERE "topics"."id" IN (2, 4) AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mPostActionType Load (1.2ms)[0m  SELECT "post_action_types".* FROM "post_action_types" ORDER BY position asc
  Rendered default/empty.html.erb within layouts/application (0.4ms)
  Rendered common/_special_font_face.html.erb (0.3ms)
  Rendered common/_discourse_stylesheet.html.erb (4.8ms)
  Rendered common/_discourse_javascript.html.erb (25.8ms)
Completed 200 OK in 50ms (Views: 38.4ms | ActiveRecord: 4.5ms)


Started GET "/users/cata.json" for 127.0.0.1 at 2013-06-18 01:31:37 -0700
Processing by UsersController#show as JSON
  Parameters: {"username"=>"cata"}
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username_lower" = 'cata' LIMIT 1[0m
  [1m[35mUserAction Load (1.8ms)[0m  
 SELECT action_type, COUNT(*) count
 FROM user_actions a
 JOIN topics t ON t.id = a.target_topic_id
 LEFT JOIN posts p on p.id = a.target_post_id
 JOIN posts p2 on p2.topic_id = a.target_topic_id and p2.post_number = 1
 LEFT JOIN categories c ON c.id = t.category_id
 WHERE (a.user_id = 2) AND (p.deleted_at is null and p2.deleted_at is null and t.deleted_at is null) AND (a.action_type not in (3)) AND (t.archetype != 'private_message') AND ((c.secure IS NULL OR c.secure = 'f'))
 GROUP BY action_type

  [1m[36mInvite Load (1.4ms)[0m  [1mSELECT "invites".* FROM "invites" WHERE "invites"."user_id" = 2 AND ("invites"."deleted_at" IS NULL) AND (redeemed_at is not null) LIMIT 1[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 4.6ms)


Started GET "/user_actions?offset=0&username=cata" for 127.0.0.1 at 2013-06-18 01:31:37 -0700
Processing by UserActionsController#index as JSON
  Parameters: {"offset"=>"0", "username"=>"cata"}
Unpermitted parameters: username
  [1m[35mUser Load (1.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username_lower" = 'cata' LIMIT 1
  [1m[36m (4.6ms)[0m  [1m
SELECT
 t.title, a.action_type, a.created_at, t.id topic_id,
 a.user_id AS target_user_id, au.name AS target_name, au.username AS target_username,
 coalesce(p.post_number, 1) post_number,
 p.reply_to_post_number,
 pu.email ,pu.username, pu.name, pu.id user_id,
 u.email acting_email, u.username acting_username, u.name acting_name, u.id acting_user_id,
 coalesce(p.cooked, p2.cooked) cooked,
 CASE WHEN coalesce(p.deleted_at, p2.deleted_at, t.deleted_at) IS NULL THEN false ELSE true END deleted,
 p.hidden
FROM user_actions as a
JOIN topics t on t.id = a.target_topic_id
LEFT JOIN posts p on p.id = a.target_post_id
JOIN posts p2 on p2.topic_id = a.target_topic_id and p2.post_number = 1
JOIN users u on u.id = a.acting_user_id
JOIN users pu on pu.id = COALESCE(p.user_id, t.user_id)
JOIN users au on au.id = a.user_id
LEFT JOIN categories c on c.id = t.category_id
WHERE (p.deleted_at is null and p2.deleted_at is null and t.deleted_at is null) AND (a.action_type not in (3)) AND (t.archetype != 'private_message') AND ((c.secure IS NULL OR c.secure = 'f')) AND (a.user_id = 2)
ORDER BY a.created_at desc
OFFSET 0
LIMIT 60
[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 6.0ms)


Started GET "/users/cata/avatar/240?__ws=localhost" for 127.0.0.1 at 2013-06-18 01:31:37 -0700
Processing by UsersController#avatar as */*
  Parameters: {"__ws"=>"localhost", "username"=>"cata", "size"=>"240"}
  [1m[35mUser Load (1.2ms)[0m  SELECT email FROM "users" WHERE "users"."username_lower" = 'cata' LIMIT 1
Redirected to https://www.gravatar.com/avatar/650960d4aa25bdeb9b8d969d7304927d.png?s=128&r=pg&d=identicon
Completed 302 Found in 4ms (ActiveRecord: 1.2ms)


Started POST "/session" for 127.0.0.1 at 2013-06-18 01:31:47 -0700
Processing by SessionController#create as */*
  Parameters: {"login"=>"forumadmin", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username_lower" = 'forumadmin' LIMIT 1[0m
Completed 200 OK in 161ms (Views: 0.2ms | ActiveRecord: 1.5ms)


Started POST "/session" for 127.0.0.1 at 2013-06-18 01:31:52 -0700
Processing by SessionController#create as */*
  Parameters: {"login"=>"forumadmin", "password"=>"[FILTERED]"}
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username_lower" = 'forumadmin' LIMIT 1
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "email_tokens" WHERE "email_tokens"."user_id" = 1 AND "email_tokens"."email" = 'team@discourse.org' AND "email_tokens"."confirmed" = 't'[0m
  [1m[35mUserAction Load (2.0ms)[0m  
 SELECT action_type, COUNT(*) count
 FROM user_actions a
 JOIN topics t ON t.id = a.target_topic_id
 LEFT JOIN posts p on p.id = a.target_post_id
 JOIN posts p2 on p2.topic_id = a.target_topic_id and p2.post_number = 1
 LEFT JOIN categories c ON c.id = t.category_id
 WHERE (a.user_id = 1) AND (p.deleted_at is null and p2.deleted_at is null and t.deleted_at is null) AND (a.action_type not in (3)) AND (t.archetype != 'private_message') AND ((c.secure IS NULL OR c.secure = 'f'))
 GROUP BY action_type

  [1m[36mInvite Load (1.4ms)[0m  [1mSELECT "invites".* FROM "invites" WHERE "invites"."user_id" = 1 AND ("invites"."deleted_at" IS NULL) AND (redeemed_at is not null) LIMIT 1[0m
Completed 200 OK in 165ms (Views: 0.1ms | ActiveRecord: 6.2ms)


Started POST "/login" for 127.0.0.1 at 2013-06-18 01:31:52 -0700
Processing by StaticController#enter as HTML
  Parameters: {"username"=>"forumadmin", "password"=>"[FILTERED]", "redirect"=>"http://0.0.0.0:3000/users/cata", "authenticity_token"=>""}
WARNING: Can't verify CSRF token authenticity
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."auth_token" = '8102fd64abe0a669dc300e5141b0ce55' LIMIT 1
  [1m[36mUserVisit Load (1.2ms)[0m  [1mSELECT "user_visits".* FROM "user_visits" WHERE "user_visits"."user_id" = 1 AND "user_visits"."visited_at" = '2013-06-18' LIMIT 1[0m
  [1m[35mSQL (2.9ms)[0m  UPDATE "users" SET "last_seen_at" = '2013-06-18 08:31:52' WHERE "users"."id" = 1
  [1m[36mCategory Load (1.3ms)[0m  [1mSELECT id FROM "categories" WHERE "categories"."secure" = 't'[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) AS count_all, notification_type AS notification_type FROM "notifications" WHERE "notifications"."user_id" = 1 AND (id > 0 and read = false) GROUP BY notification_type
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."user_id" = 1 AND (read = false AND notification_type = 6)[0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM "topics" WHERE "topics"."user_id" = 1 AND ("topics"."deleted_at" IS NULL)
  [1m[36m (1.8ms)[0m  [1m SELECT u.id AS user_id, topics.id AS topic_id, topics.created_at, highest_post_number, last_read_post_number, c.name AS category_name
 FROM users u
 FULL OUTER JOIN topics ON 1=1
 LEFT JOIN topic_users tu ON tu.topic_id = topics.id AND tu.user_id = u.id
 LEFT JOIN categories c ON c.id = topics.category_id
 WHERE u.id IN (1) AND
 topics.archetype <> 'private_message' AND
 ((tu.last_read_post_number < topics.highest_post_number AND COALESCE(tu.notification_level, 1) >= 2) OR (topics.created_at >= CASE
 WHEN COALESCE(u.new_topic_duration_minutes, 2880) = -1 THEN u.created_at
 WHEN COALESCE(u.new_topic_duration_minutes, 2880) = -2 THEN COALESCE(u.previous_visit_at,u.created_at)
 ELSE ('2013-06-18 08:31:52'::timestamp - INTERVAL '1 MINUTE' * COALESCE(u.new_topic_duration_minutes, 2880))
 END AND tu.last_read_post_number IS NULL AND COALESCE(tu.notification_level, 2) >= 2)) AND
 (topics.visible OR u.admin OR u.moderator) AND
 topics.deleted_at IS NULL AND
 ( category_id IS NULL OR NOT c.secure OR category_id IN (
 SELECT c2.id FROM categories c2
 JOIN category_groups cg ON cg.category_id = c2.id
 JOIN group_users gu ON gu.user_id = u.id AND cg.group_id = gu.group_id
 WHERE c2.secure )
 )

[0m
Redirected to http://0.0.0.0:3000/users/cata
Completed 302 Found in 23ms (ActiveRecord: 12.5ms)


Started GET "/users/cata" for 127.0.0.1 at 2013-06-18 01:31:52 -0700
Processing by UsersController#show as HTML
  Parameters: {"username"=>"cata"}
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mCategory Load (1.1ms)[0m  [1mSELECT id FROM "categories" WHERE "categories"."secure" = 't'[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) AS count_all, notification_type AS notification_type FROM "notifications" WHERE "notifications"."user_id" = 1 AND (id > 0 and read = false) GROUP BY notification_type
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."user_id" = 1 AND (read = false AND notification_type = 6)[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "topics" WHERE "topics"."user_id" = 1 AND ("topics"."deleted_at" IS NULL)
  [1m[36m (1.7ms)[0m  [1m SELECT u.id AS user_id, topics.id AS topic_id, topics.created_at, highest_post_number, last_read_post_number, c.name AS category_name
 FROM users u
 FULL OUTER JOIN topics ON 1=1
 LEFT JOIN topic_users tu ON tu.topic_id = topics.id AND tu.user_id = u.id
 LEFT JOIN categories c ON c.id = topics.category_id
 WHERE u.id IN (1) AND
 topics.archetype <> 'private_message' AND
 ((tu.last_read_post_number < topics.highest_post_number AND COALESCE(tu.notification_level, 1) >= 2) OR (topics.created_at >= CASE
 WHEN COALESCE(u.new_topic_duration_minutes, 2880) = -1 THEN u.created_at
 WHEN COALESCE(u.new_topic_duration_minutes, 2880) = -2 THEN COALESCE(u.previous_visit_at,u.created_at)
 ELSE ('2013-06-18 08:31:52'::timestamp - INTERVAL '1 MINUTE' * COALESCE(u.new_topic_duration_minutes, 2880))
 END AND tu.last_read_post_number IS NULL AND COALESCE(tu.notification_level, 2) >= 2)) AND
 (topics.visible OR u.admin OR u.moderator) AND
 topics.deleted_at IS NULL AND
 ( category_id IS NULL OR NOT c.secure OR category_id IN (
 SELECT c2.id FROM categories c2
 JOIN category_groups cg ON cg.category_id = c2.id
 JOIN group_users gu ON gu.user_id = u.id AND cg.group_id = gu.group_id
 WHERE c2.secure )
 )

[0m
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username_lower" = 'cata' LIMIT 1
  [1m[36mUserAction Load (1.6ms)[0m  [1m
 SELECT action_type, COUNT(*) count
 FROM user_actions a
 JOIN topics t ON t.id = a.target_topic_id
 LEFT JOIN posts p on p.id = a.target_post_id
 JOIN posts p2 on p2.topic_id = a.target_topic_id and p2.post_number = 1
 LEFT JOIN categories c ON c.id = t.category_id
 WHERE (a.user_id = 2) AND (a.action_type not in (3))
 GROUP BY action_type
[0m
  [1m[35mInvite Load (1.4ms)[0m  SELECT "invites".* FROM "invites" WHERE "invites"."user_id" = 2 AND ("invites"."deleted_at" IS NULL) AND (redeemed_at is not null) LIMIT 1
  Rendered users/show.html.erb within layouts/application (1.0ms)
  Rendered common/_special_font_face.html.erb (0.2ms)
  Rendered common/_discourse_stylesheet.html.erb (5.0ms)
  Rendered common/_discourse_javascript.html.erb (31.8ms)
Completed 200 OK in 65ms (Views: 42.0ms | ActiveRecord: 12.3ms)


Started GET "/user_actions?offset=0&username=cata" for 127.0.0.1 at 2013-06-18 01:31:53 -0700
Processing by UserActionsController#index as JSON
  Parameters: {"offset"=>"0", "username"=>"cata"}
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
Unpermitted parameters: username
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username_lower" = 'cata' LIMIT 1
  [1m[36m (2.8ms)[0m  [1m
SELECT
 t.title, a.action_type, a.created_at, t.id topic_id,
 a.user_id AS target_user_id, au.name AS target_name, au.username AS target_username,
 coalesce(p.post_number, 1) post_number,
 p.reply_to_post_number,
 pu.email ,pu.username, pu.name, pu.id user_id,
 u.email acting_email, u.username acting_username, u.name acting_name, u.id acting_user_id,
 coalesce(p.cooked, p2.cooked) cooked,
 CASE WHEN coalesce(p.deleted_at, p2.deleted_at, t.deleted_at) IS NULL THEN false ELSE true END deleted,
 p.hidden
FROM user_actions as a
JOIN topics t on t.id = a.target_topic_id
LEFT JOIN posts p on p.id = a.target_post_id
JOIN posts p2 on p2.topic_id = a.target_topic_id and p2.post_number = 1
JOIN users u on u.id = a.acting_user_id
JOIN users pu on pu.id = COALESCE(p.user_id, t.user_id)
JOIN users au on au.id = a.user_id
LEFT JOIN categories c on c.id = t.category_id
WHERE (a.action_type not in (3)) AND (t.archetype != 'private_message') AND (a.user_id = 2)
ORDER BY a.created_at desc
OFFSET 0
LIMIT 60
[0m
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 5.3ms)


Started GET "/users/cata.json" for 127.0.0.1 at 2013-06-18 01:31:53 -0700
Processing by UsersController#show as JSON
  Parameters: {"username"=>"cata"}
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username_lower" = 'cata' LIMIT 1[0m
  [1m[35mUserAction Load (1.7ms)[0m  
 SELECT action_type, COUNT(*) count
 FROM user_actions a
 JOIN topics t ON t.id = a.target_topic_id
 LEFT JOIN posts p on p.id = a.target_post_id
 JOIN posts p2 on p2.topic_id = a.target_topic_id and p2.post_number = 1
 LEFT JOIN categories c ON c.id = t.category_id
 WHERE (a.user_id = 2) AND (a.action_type not in (3))
 GROUP BY action_type

  [1m[36mInvite Load (1.4ms)[0m  [1mSELECT "invites".* FROM "invites" WHERE "invites"."user_id" = 2 AND ("invites"."deleted_at" IS NULL) AND (redeemed_at is not null) LIMIT 1[0m
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 5.5ms)


Started GET "/users/cata/avatar/240?__ws=localhost" for 127.0.0.1 at 2013-06-18 01:31:54 -0700
Processing by UsersController#avatar as */*
  Parameters: {"__ws"=>"localhost", "username"=>"cata", "size"=>"240"}
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mCategory Load (1.2ms)[0m  [1mSELECT id FROM "categories" WHERE "categories"."secure" = 't'[0m
  [1m[35m (2.2ms)[0m  SELECT COUNT(*) AS count_all, notification_type AS notification_type FROM "notifications" WHERE "notifications"."user_id" = 1 AND (id > 0 and read = false) GROUP BY notification_type
  [1m[36m (2.1ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."user_id" = 1 AND (read = false AND notification_type = 6)[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "topics" WHERE "topics"."user_id" = 1 AND ("topics"."deleted_at" IS NULL)
  [1m[36m (1.8ms)[0m  [1m SELECT u.id AS user_id, topics.id AS topic_id, topics.created_at, highest_post_number, last_read_post_number, c.name AS category_name
 FROM users u
 FULL OUTER JOIN topics ON 1=1
 LEFT JOIN topic_users tu ON tu.topic_id = topics.id AND tu.user_id = u.id
 LEFT JOIN categories c ON c.id = topics.category_id
 WHERE u.id IN (1) AND
 topics.archetype <> 'private_message' AND
 ((tu.last_read_post_number < topics.highest_post_number AND COALESCE(tu.notification_level, 1) >= 2) OR (topics.created_at >= CASE
 WHEN COALESCE(u.new_topic_duration_minutes, 2880) = -1 THEN u.created_at
 WHEN COALESCE(u.new_topic_duration_minutes, 2880) = -2 THEN COALESCE(u.previous_visit_at,u.created_at)
 ELSE ('2013-06-18 08:31:54'::timestamp - INTERVAL '1 MINUTE' * COALESCE(u.new_topic_duration_minutes, 2880))
 END AND tu.last_read_post_number IS NULL AND COALESCE(tu.notification_level, 2) >= 2)) AND
 (topics.visible OR u.admin OR u.moderator) AND
 topics.deleted_at IS NULL AND
 ( category_id IS NULL OR NOT c.secure OR category_id IN (
 SELECT c2.id FROM categories c2
 JOIN category_groups cg ON cg.category_id = c2.id
 JOIN group_users gu ON gu.user_id = u.id AND cg.group_id = gu.group_id
 WHERE c2.secure )
 )

[0m
  [1m[35mUser Load (1.4ms)[0m  SELECT email FROM "users" WHERE "users"."username_lower" = 'cata' LIMIT 1
Redirected to https://www.gravatar.com/avatar/650960d4aa25bdeb9b8d969d7304927d.png?s=128&r=pg&d=identicon
Completed 302 Found in 24ms (ActiveRecord: 11.5ms)


Started GET "/admin/users/cata" for 127.0.0.1 at 2013-06-18 01:32:00 -0700
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
Processing by Admin::UsersController#show as JSON
  Parameters: {"id"=>"cata"}
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username_lower" = 'cata' LIMIT 1[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "user_actions" WHERE "user_actions"."user_id" = 2 AND "user_actions"."action_type" = 2
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "posts" WHERE "posts"."user_id" = 2 AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35m (82.7ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."user_id" = 2 AND "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL)
  [1m[36m (1.7ms)[0m  [1mSELECT COUNT(DISTINCT "posts"."id") FROM "posts" LEFT OUTER JOIN "post_actions" ON "post_actions"."post_id" = "posts"."id" WHERE "posts"."user_id" = 2 AND "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35m (1.6ms)[0m  SELECT COUNT(*) FROM "topics" INNER JOIN "topic_allowed_users" ON "topics"."id" = "topic_allowed_users"."topic_id" WHERE "topic_allowed_users"."user_id" = 2 AND "topics"."archetype" = 'private_message' AND ("topics"."deleted_at" IS NULL)
Completed 200 OK in 101ms (Views: 0.1ms | ActiveRecord: 91.3ms)


Started GET "/admin/users/list/active.json?filter=" for 127.0.0.1 at 2013-06-18 01:32:04 -0700
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
Processing by Admin::UsersController#index as JSON
  Parameters: {"filter"=>"", "query"=>"active"}
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUser Load (1.5ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY COALESCE(last_seen_at, to_date('1970-01-01', 'YYYY-MM-DD')) DESC, username[0m
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 2.9ms)


Started GET "/admin/users/cata" for 127.0.0.1 at 2013-06-18 01:32:06 -0700
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
Processing by Admin::UsersController#show as JSON
  Parameters: {"id"=>"cata"}
  [1m[36mUser Load (1.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username_lower" = 'cata' LIMIT 1
  [1m[36m (2.2ms)[0m  [1mSELECT COUNT(*) FROM "user_actions" WHERE "user_actions"."user_id" = 2 AND "user_actions"."action_type" = 2[0m
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "posts" WHERE "posts"."user_id" = 2 AND ("posts"."deleted_at" IS NULL)
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."user_id" = 2 AND "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL)[0m
  [1m[35m (1.6ms)[0m  SELECT COUNT(DISTINCT "posts"."id") FROM "posts" LEFT OUTER JOIN "post_actions" ON "post_actions"."post_id" = "posts"."id" WHERE "posts"."user_id" = 2 AND "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("posts"."deleted_at" IS NULL)
  [1m[36m (1.7ms)[0m  [1mSELECT COUNT(*) FROM "topics" INNER JOIN "topic_allowed_users" ON "topics"."id" = "topic_allowed_users"."topic_id" WHERE "topic_allowed_users"."user_id" = 2 AND "topics"."archetype" = 'private_message' AND ("topics"."deleted_at" IS NULL)[0m
Completed 200 OK in 22ms (Views: 0.1ms | ActiveRecord: 11.3ms)


Started PUT "/admin/users/2/activate" for 127.0.0.1 at 2013-06-18 01:32:09 -0700
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
Processing by Admin::UsersController#activate as */*
  Parameters: {"user_id"=>"2"}
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
  [1m[36mEmailToken Load (1.3ms)[0m  [1mSELECT "email_tokens".* FROM "email_tokens" WHERE "email_tokens"."user_id" = 2 AND "email_tokens"."expired" = 'f' AND (created_at > '2013-06-11 08:32:09.905684') LIMIT 1[0m
  [1m[35mEmailToken Load (1.3ms)[0m  SELECT "email_tokens".* FROM "email_tokens" WHERE (token = '50baad0f380ee36cb4f0022587e97c5d' and expired = FALSE and created_at >= '2013-06-11 08:32:09.907941') LIMIT 1
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" IN (2)[0m
  [1m[35m (0.8ms)[0m  BEGIN
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "email_tokens" SET confirmed = true WHERE "email_tokens"."id" = 7 AND "email_tokens"."expired" = 'f'[0m
  [1m[35mUser Exists (1.5ms)[0m  SELECT 1 AS one FROM "users" WHERE ("users"."email" = '18deltamedic@gmail.com' AND "users"."id" != 2) LIMIT 1
  [1m[36m (1.6ms)[0m  [1mUPDATE "users" SET "active" = 't', "email" = '18deltamedic@gmail.com', "updated_at" = '2013-06-18 08:32:09.919697' WHERE "users"."id" = 2[0m
  [1m[35m (2.8ms)[0m  COMMIT
  Rendered text template (0.0ms)
Completed 200 OK in 26ms (Views: 1.1ms | ActiveRecord: 14.2ms)


Started GET "/admin/users/cata" for 127.0.0.1 at 2013-06-18 01:32:09 -0700
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
Processing by Admin::UsersController#show as HTML
  Parameters: {"id"=>"cata"}
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mCategory Load (1.0ms)[0m  [1mSELECT id FROM "categories" WHERE "categories"."secure" = 't'[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) AS count_all, notification_type AS notification_type FROM "notifications" WHERE "notifications"."user_id" = 1 AND (id > 0 and read = false) GROUP BY notification_type
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "notifications" WHERE "notifications"."user_id" = 1 AND (read = false AND notification_type = 6)[0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM "topics" WHERE "topics"."user_id" = 1 AND ("topics"."deleted_at" IS NULL)
  [1m[36m (1.8ms)[0m  [1m SELECT u.id AS user_id, topics.id AS topic_id, topics.created_at, highest_post_number, last_read_post_number, c.name AS category_name
 FROM users u
 FULL OUTER JOIN topics ON 1=1
 LEFT JOIN topic_users tu ON tu.topic_id = topics.id AND tu.user_id = u.id
 LEFT JOIN categories c ON c.id = topics.category_id
 WHERE u.id IN (1) AND
 topics.archetype <> 'private_message' AND
 ((tu.last_read_post_number < topics.highest_post_number AND COALESCE(tu.notification_level, 1) >= 2) OR (topics.created_at >= CASE
 WHEN COALESCE(u.new_topic_duration_minutes, 2880) = -1 THEN u.created_at
 WHEN COALESCE(u.new_topic_duration_minutes, 2880) = -2 THEN COALESCE(u.previous_visit_at,u.created_at)
 ELSE ('2013-06-18 08:32:09'::timestamp - INTERVAL '1 MINUTE' * COALESCE(u.new_topic_duration_minutes, 2880))
 END AND tu.last_read_post_number IS NULL AND COALESCE(tu.notification_level, 2) >= 2)) AND
 (topics.visible OR u.admin OR u.moderator) AND
 topics.deleted_at IS NULL AND
 ( category_id IS NULL OR NOT c.secure OR category_id IN (
 SELECT c2.id FROM categories c2
 JOIN category_groups cg ON cg.category_id = c2.id
 JOIN group_users gu ON gu.user_id = u.id AND cg.group_id = gu.group_id
 WHERE c2.secure )
 )

[0m
  Rendered default/empty.html.erb within layouts/application (0.1ms)
  Rendered common/_special_font_face.html.erb (0.3ms)
  Rendered common/_discourse_stylesheet.html.erb (5.3ms)
  Rendered common/_discourse_javascript.html.erb (33.6ms)
Completed 200 OK in 134ms (Views: 44.5ms | ActiveRecord: 7.8ms)


Started GET "/admin/users/cata" for 127.0.0.1 at 2013-06-18 01:32:12 -0700
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
Processing by Admin::UsersController#show as JSON
  Parameters: {"id"=>"cata"}
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username_lower" = 'cata' LIMIT 1
  [1m[36m (1.8ms)[0m  [1mSELECT COUNT(*) FROM "user_actions" WHERE "user_actions"."user_id" = 2 AND "user_actions"."action_type" = 2[0m
  [1m[35m (1.8ms)[0m  SELECT COUNT(*) FROM "posts" WHERE "posts"."user_id" = 2 AND ("posts"."deleted_at" IS NULL)
  [1m[36m (1.7ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."user_id" = 2 AND "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL)[0m
  [1m[35m (2.4ms)[0m  SELECT COUNT(DISTINCT "posts"."id") FROM "posts" LEFT OUTER JOIN "post_actions" ON "post_actions"."post_id" = "posts"."id" WHERE "posts"."user_id" = 2 AND "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("posts"."deleted_at" IS NULL)
  [1m[36m (1.6ms)[0m  [1mSELECT COUNT(*) FROM "topics" INNER JOIN "topic_allowed_users" ON "topics"."id" = "topic_allowed_users"."topic_id" WHERE "topic_allowed_users"."user_id" = 2 AND "topics"."archetype" = 'private_message' AND ("topics"."deleted_at" IS NULL)[0m
Completed 200 OK in 25ms (Views: 0.1ms | ActiveRecord: 12.1ms)


Started PUT "/admin/users/2/grant_admin" for 127.0.0.1 at 2013-06-18 01:32:19 -0700
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::UsersController#grant_admin as */*
  Parameters: {"user_id"=>"2"}
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
  [1m[36m (0.9ms)[0m  [1mBEGIN[0m
  [1m[35mUser Exists (1.2ms)[0m  SELECT 1 AS one FROM "users" WHERE ("users"."email" = '18deltamedic@gmail.com' AND "users"."id" != 2) LIMIT 1
  [1m[36m (1.2ms)[0m  [1mUPDATE "users" SET "admin" = 't', "updated_at" = '2013-06-18 08:32:19.367444' WHERE "users"."id" = 2[0m
  [1m[35mGroup Load (1.4ms)[0m  SELECT "groups".* FROM "groups" WHERE "groups"."id" = 1 LIMIT 1
  [1m[36mSQL (1.5ms)[0m  [1mDELETE FROM "group_users" WHERE "group_users"."group_id" = 1 AND (user_id IN (SELECT users.id FROM "users" INNER JOIN "group_users" ON "users"."id" = "group_users"."user_id" WHERE "group_users"."group_id" = 1 AND (users.id NOT IN (SELECT u.id FROM users u WHERE u.admin))))[0m
  [1m[35mGroupUser Load (1.3ms)[0m  SELECT X.id FROM "group_users" RIGHT JOIN (SELECT u.id FROM users u WHERE u.admin) X ON X.id = user_id AND group_id = 1 WHERE (user_id IS NULL)
  [1m[36mSQL (4.0ms)[0m  [1mINSERT INTO "group_users" ("created_at", "group_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", Tue, 18 Jun 2013 04:32:19 EDT -04:00], ["group_id", 1], ["updated_at", Tue, 18 Jun 2013 04:32:19 EDT -04:00], ["user_id", 2]]
  [1m[35mGroup Load (2.0ms)[0m  SELECT "groups".* FROM "groups" WHERE "groups"."id" = 1 LIMIT 1
  [1m[36mSQL (1.7ms)[0m  [1mUPDATE "groups" SET "user_count" = COALESCE("user_count", 0) + 1 WHERE "groups"."id" = 1[0m
  [1m[35mGroup Load (1.3ms)[0m  SELECT "groups".* FROM "groups" WHERE "groups"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "group_users" WHERE "group_users"."group_id" = 1[0m
  [1m[35m (1.1ms)[0m  UPDATE "groups" SET "user_count" = 2 WHERE "groups"."id" = 1
  [1m[36mGroup Load (1.2ms)[0m  [1mSELECT "groups".* FROM "groups" WHERE "groups"."id" = 2 LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  DELETE FROM "group_users" WHERE "group_users"."group_id" = 2 AND (user_id IN (SELECT users.id FROM "users" INNER JOIN "group_users" ON "users"."id" = "group_users"."user_id" WHERE "group_users"."group_id" = 2 AND (users.id NOT IN (SELECT u.id FROM users u WHERE u.moderator))))
  [1m[36mGroupUser Load (1.5ms)[0m  [1mSELECT X.id FROM "group_users" RIGHT JOIN (SELECT u.id FROM users u WHERE u.moderator) X ON X.id = user_id AND group_id = 2 WHERE (user_id IS NULL)[0m
  [1m[35mGroup Load (1.1ms)[0m  SELECT "groups".* FROM "groups" WHERE "groups"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "group_users" WHERE "group_users"."group_id" = 2[0m
  [1m[35m (1.1ms)[0m  UPDATE "groups" SET "user_count" = 1 WHERE "groups"."id" = 2
  [1m[36mGroup Load (1.2ms)[0m  [1mSELECT "groups".* FROM "groups" WHERE "groups"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "group_users" WHERE "group_users"."group_id" = 3 AND (user_id IN (SELECT users.id FROM "users" INNER JOIN "group_users" ON "users"."id" = "group_users"."user_id" WHERE "group_users"."group_id" = 3 AND (users.id NOT IN (SELECT u.id FROM users u WHERE u.moderator OR u.admin))))
  [1m[36mGroupUser Load (1.3ms)[0m  [1mSELECT X.id FROM "group_users" RIGHT JOIN (SELECT u.id FROM users u WHERE u.moderator OR u.admin) X ON X.id = user_id AND group_id = 3 WHERE (user_id IS NULL)[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "group_users" ("created_at", "group_id", "updated_at", "user_id") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Tue, 18 Jun 2013 04:32:19 EDT -04:00], ["group_id", 3], ["updated_at", Tue, 18 Jun 2013 04:32:19 EDT -04:00], ["user_id", 2]]
  [1m[36mGroup Load (1.7ms)[0m  [1mSELECT "groups".* FROM "groups" WHERE "groups"."id" = 3 LIMIT 1[0m
  [1m[35mSQL (1.6ms)[0m  UPDATE "groups" SET "user_count" = COALESCE("user_count", 0) + 1 WHERE "groups"."id" = 3
  [1m[36mGroup Load (1.0ms)[0m  [1mSELECT "groups".* FROM "groups" WHERE "groups"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "group_users" WHERE "group_users"."group_id" = 3
  [1m[36m (1.1ms)[0m  [1mUPDATE "groups" SET "user_count" = 2 WHERE "groups"."id" = 3[0m
  [1m[35m (2.9ms)[0m  COMMIT
Completed 200 OK in 157ms (Views: 0.1ms | ActiveRecord: 46.1ms)


Started GET "/admin/site_settings" for 127.0.0.1 at 2013-06-18 01:32:43 -0700
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::SiteSettingsController#index as JSON
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
Completed 200 OK in 24ms (Views: 0.2ms | ActiveRecord: 1.3ms)


Started PUT "/admin/site_settings/title_prettify" for 127.0.0.1 at 2013-06-18 01:33:35 -0700
  [1m[35mUser Exists (72.9ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::SiteSettingsController#update as */*
  Parameters: {"value"=>"false", "id"=>"title_prettify"}
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUserVisit Load (1.1ms)[0m  [1mSELECT "user_visits".* FROM "user_visits" WHERE "user_visits"."user_id" = 1 AND "user_visits"."visited_at" = '2013-06-18' LIMIT 1[0m
  [1m[35mSQL (3.2ms)[0m  UPDATE "users" SET "last_seen_at" = '2013-06-18 08:33:35' WHERE "users"."id" = 1
  [1m[36mSiteSetting Load (1.3ms)[0m  [1mSELECT "site_settings".* FROM "site_settings" WHERE "site_settings"."name" = 'title_prettify' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  BEGIN
  [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "site_settings" ("created_at", "data_type", "name", "updated_at", "value") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Tue, 18 Jun 2013 04:33:35 EDT -04:00], ["data_type", 5], ["name", :title_prettify], ["updated_at", Tue, 18 Jun 2013 04:33:35 EDT -04:00], ["value", "f"]]
  [1m[35m (1.2ms)[0m  COMMIT
  [1m[36mSiteSetting Load (1.3ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
  Rendered text template (0.0ms)
Completed 200 OK in 28ms (Views: 1.0ms | ActiveRecord: 15.3ms)


Started PUT "/admin/site_settings/contact_email" for 127.0.0.1 at 2013-06-18 01:33:46 -0700
  [1m[35mUser Exists (1.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::SiteSettingsController#update as */*
  Parameters: {"value"=>"pensivearchitect@gmail.com", "id"=>"contact_email"}
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mSiteSetting Load (1.1ms)[0m  [1mSELECT "site_settings".* FROM "site_settings" WHERE "site_settings"."name" = 'contact_email' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  BEGIN
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "site_settings" ("created_at", "data_type", "name", "updated_at", "value") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", Tue, 18 Jun 2013 04:33:46 EDT -04:00], ["data_type", 1], ["name", :contact_email], ["updated_at", Tue, 18 Jun 2013 04:33:46 EDT -04:00], ["value", "pensivearchitect@gmail.com"]]
  [1m[35m (2.5ms)[0m  COMMIT
  [1m[36mSiteSetting Load (1.1ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
  Rendered text template (0.0ms)
Completed 200 OK in 15ms (Views: 0.4ms | ActiveRecord: 8.2ms)


Started PUT "/admin/site_settings/contact_email" for 127.0.0.1 at 2013-06-18 01:33:46 -0700
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::SiteSettingsController#update as */*
  Parameters: {"value"=>"pensivearchitect@gmail.com", "id"=>"contact_email"}
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mSiteSetting Load (1.2ms)[0m  [1mSELECT "site_settings".* FROM "site_settings" WHERE "site_settings"."name" = 'contact_email' LIMIT 1[0m
  [1m[35m (0.8ms)[0m  BEGIN
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
  [1m[35mSiteSetting Load (1.2ms)[0m  SELECT name, value, data_type FROM "site_settings" 
  Rendered text template (0.0ms)
Completed 200 OK in 11ms (Views: 0.4ms | ActiveRecord: 5.5ms)


Started GET "/admin/site_content_types" for 127.0.0.1 at 2013-06-18 01:33:49 -0700
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::SiteContentTypesController#index as JSON
  [1m[36mUser Load (1.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
Completed 200 OK in 12ms (Views: 0.1ms | ActiveRecord: 1.5ms)


Started GET "/admin/site_contents/usage_tips" for 127.0.0.1 at 2013-06-18 01:33:52 -0700
  [1m[35mUser Exists (1.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::SiteContentsController#show as JSON
  Parameters: {"id"=>"usage_tips"}
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mSiteContent Load (1.3ms)[0m  [1mSELECT "site_contents".* FROM "site_contents" WHERE "site_contents"."content_type" = 'usage_tips' LIMIT 1[0m
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 2.7ms)


Started GET "/admin/site_contents/education_new_reply" for 127.0.0.1 at 2013-06-18 01:33:59 -0700
  [1m[35mUser Exists (1.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (1.5ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::SiteContentsController#show as JSON
  Parameters: {"id"=>"education_new_reply"}
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mSiteContent Load (1.7ms)[0m  [1mSELECT "site_contents".* FROM "site_contents" WHERE "site_contents"."content_type" = 'education_new_reply' LIMIT 1[0m
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 3.1ms)


Started GET "/admin/site_contents/tos_user_content_license" for 127.0.0.1 at 2013-06-18 01:34:03 -0700
  [1m[35mUser Exists (1.4ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::SiteContentsController#show as JSON
  Parameters: {"id"=>"tos_user_content_license"}
  [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mSiteContent Load (1.3ms)[0m  [1mSELECT "site_contents".* FROM "site_contents" WHERE "site_contents"."content_type" = 'tos_user_content_license' LIMIT 1[0m
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 3.3ms)


Started GET "/admin/site_contents/tos_miscellaneous" for 127.0.0.1 at 2013-06-18 01:34:10 -0700
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::SiteContentsController#show as JSON
  Parameters: {"id"=>"tos_miscellaneous"}
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mSiteContent Load (1.2ms)[0m  [1mSELECT "site_contents".* FROM "site_contents" WHERE "site_contents"."content_type" = 'tos_miscellaneous' LIMIT 1[0m
Completed 200 OK in 81ms (Views: 0.2ms | ActiveRecord: 2.4ms)


Started GET "/admin/site_contents/login_required_welcome_message" for 127.0.0.1 at 2013-06-18 01:34:13 -0700
  [1m[35mUser Exists (1.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (1.6ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::SiteContentsController#show as JSON
  Parameters: {"id"=>"login_required_welcome_message"}
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mSiteContent Load (1.1ms)[0m  [1mSELECT "site_contents".* FROM "site_contents" WHERE "site_contents"."content_type" = 'login_required_welcome_message' LIMIT 1[0m
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 2.3ms)


Started PUT "/admin/site_contents/login_required_welcome_message" for 127.0.0.1 at 2013-06-18 01:34:42 -0700
  [1m[35mUser Exists (1.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::SiteContentsController#update as */*
  Parameters: {"content"=>"#[Welcome to the DGS Forums!](#welcome) \nPlease create an account or login to continue.\n", "id"=>"login_required_welcome_message"}
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUserVisit Load (1.3ms)[0m  [1mSELECT "user_visits".* FROM "user_visits" WHERE "user_visits"."user_id" = 1 AND "user_visits"."visited_at" = '2013-06-18' LIMIT 1[0m
  [1m[35mSQL (1.4ms)[0m  UPDATE "users" SET "last_seen_at" = '2013-06-18 08:34:42' WHERE "users"."id" = 1
  [1m[36mSiteContent Load (1.0ms)[0m  [1mSELECT "site_contents".* FROM "site_contents" WHERE "site_contents"."content_type" = 'login_required_welcome_message' LIMIT 1[0m
  [1m[35m (1.0ms)[0m  BEGIN
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "site_contents" ("content", "content_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "content_type"[0m  [["content", "#[Welcome to the DGS Forums!](#welcome) \nPlease create an account or login to continue.\n"], ["content_type", "login_required_welcome_message"], ["created_at", Tue, 18 Jun 2013 04:34:42 EDT -04:00], ["updated_at", Tue, 18 Jun 2013 04:34:42 EDT -04:00]]
  [1m[35m (1.2ms)[0m  COMMIT
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 1.3ms | ActiveRecord: 9.1ms)


Started PUT "/admin/site_contents/login_required_welcome_message" for 127.0.0.1 at 2013-06-18 01:34:42 -0700
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::SiteContentsController#update as */*
  Parameters: {"content"=>"#[Welcome to the DGS Forums!](#welcome) \nPlease create an account or login to continue.\n", "id"=>"login_required_welcome_message"}
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mSiteContent Load (1.1ms)[0m  SELECT "site_contents".* FROM "site_contents" WHERE "site_contents"."content_type" = 'login_required_welcome_message' LIMIT 1
  [1m[36m (0.9ms)[0m  [1mBEGIN[0m
  [1m[35m (1.5ms)[0m  COMMIT
  Rendered text template (0.0ms)
Completed 200 OK in 8ms (Views: 0.6ms | ActiveRecord: 4.6ms)


Started GET "/admin/site_contents/tos_miscellaneous" for 127.0.0.1 at 2013-06-18 01:34:44 -0700
  [1m[36mUser Exists (1.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::SiteContentsController#show as JSON
  Parameters: {"id"=>"tos_miscellaneous"}
  [1m[36mUser Load (1.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mSiteContent Load (1.2ms)[0m  SELECT "site_contents".* FROM "site_contents" WHERE "site_contents"."content_type" = 'tos_miscellaneous' LIMIT 1
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 3.1ms)


Started GET "/admin/site_contents/tos_user_content_license" for 127.0.0.1 at 2013-06-18 01:34:45 -0700
  [1m[36mUser Exists (1.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (1.3ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::SiteContentsController#show as JSON
  Parameters: {"id"=>"tos_user_content_license"}
  [1m[36mUser Load (1.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mSiteContent Load (1.2ms)[0m  SELECT "site_contents".* FROM "site_contents" WHERE "site_contents"."content_type" = 'tos_user_content_license' LIMIT 1
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 2.6ms)


Started GET "/admin/site_contents/education_new_reply" for 127.0.0.1 at 2013-06-18 01:34:45 -0700
  [1m[36mUser Exists (2.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::SiteContentsController#show as JSON
  Parameters: {"id"=>"education_new_reply"}
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mSiteContent Load (1.2ms)[0m  SELECT "site_contents".* FROM "site_contents" WHERE "site_contents"."content_type" = 'education_new_reply' LIMIT 1
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 2.5ms)


Started GET "/admin/site_contents/usage_tips" for 127.0.0.1 at 2013-06-18 01:34:46 -0700
  [1m[36mUser Exists (1.4ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::SiteContentsController#show as JSON
  Parameters: {"id"=>"usage_tips"}
  [1m[36mUser Load (2.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mSiteContent Load (1.4ms)[0m  SELECT "site_contents".* FROM "site_contents" WHERE "site_contents"."content_type" = 'usage_tips' LIMIT 1
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 3.8ms)


Started GET "/admin/site_contents/education_new_topic" for 127.0.0.1 at 2013-06-18 01:34:47 -0700
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::SiteContentsController#show as JSON
  Parameters: {"id"=>"education_new_topic"}
  [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mSiteContent Load (1.5ms)[0m  SELECT "site_contents".* FROM "site_contents" WHERE "site_contents"."content_type" = 'education_new_topic' LIMIT 1
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 3.6ms)


Started GET "/admin/site_contents/login_required_welcome_message" for 127.0.0.1 at 2013-06-18 01:34:49 -0700
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (3.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::SiteContentsController#show as JSON
  Parameters: {"id"=>"login_required_welcome_message"}
  [1m[36mUser Load (1.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mSiteContent Load (1.3ms)[0m  SELECT "site_contents".* FROM "site_contents" WHERE "site_contents"."content_type" = 'login_required_welcome_message' LIMIT 1
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 3.0ms)


Started PUT "/admin/site_contents/login_required_welcome_message" for 127.0.0.1 at 2013-06-18 01:34:50 -0700
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::SiteContentsController#update as */*
  Parameters: {"content"=>"#[Welcome to the DGS Forums!](#welcome) \nPlease create an account or login to continue.\n", "id"=>"login_required_welcome_message"}
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mSiteContent Load (1.0ms)[0m  SELECT "site_contents".* FROM "site_contents" WHERE "site_contents"."content_type" = 'login_required_welcome_message' LIMIT 1
  [1m[36m (0.9ms)[0m  [1mBEGIN[0m
  [1m[35m (1.0ms)[0m  COMMIT
  Rendered text template (0.0ms)
Completed 200 OK in 7ms (Views: 0.4ms | ActiveRecord: 4.2ms)


Started PUT "/admin/site_contents/login_required_welcome_message" for 127.0.0.1 at 2013-06-18 01:34:50 -0700
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::SiteContentsController#update as */*
  Parameters: {"content"=>"#[Welcome to the DGS Forums!](#welcome) \nPlease create an account or login to continue.\n", "id"=>"login_required_welcome_message"}
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mSiteContent Load (1.1ms)[0m  SELECT "site_contents".* FROM "site_contents" WHERE "site_contents"."content_type" = 'login_required_welcome_message' LIMIT 1
  [1m[36m (1.0ms)[0m  [1mBEGIN[0m
  [1m[35m (1.0ms)[0m  COMMIT
  Rendered text template (0.0ms)
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 4.4ms)


Started GET "/admin/site_contents/tos_miscellaneous" for 127.0.0.1 at 2013-06-18 01:34:51 -0700
  [1m[36mUser Exists (1.9ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (1.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::SiteContentsController#show as JSON
  Parameters: {"id"=>"tos_miscellaneous"}
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mSiteContent Load (1.1ms)[0m  SELECT "site_contents".* FROM "site_contents" WHERE "site_contents"."content_type" = 'tos_miscellaneous' LIMIT 1
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 2.4ms)


Started GET "/admin/users/list/active.json?filter=" for 127.0.0.1 at 2013-06-18 01:34:54 -0700
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
Processing by Admin::UsersController#index as JSON
  Parameters: {"filter"=>"", "query"=>"active"}
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY COALESCE(last_seen_at, to_date('1970-01-01', 'YYYY-MM-DD')) DESC, username[0m
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 2.7ms)


Started GET "/admin/site_customizations" for 127.0.0.1 at 2013-06-18 01:35:00 -0700
  [1m[35mUser Exists (1.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::SiteCustomizationsController#index as JSON
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mSiteCustomization Load (2.0ms)[0m  [1mSELECT "site_customizations".* FROM "site_customizations" [0m
Completed 200 OK in 7ms (Views: 0.4ms | ActiveRecord: 3.4ms)


Started GET "/admin/flags/active.json" for 127.0.0.1 at 2013-06-18 01:35:01 -0700
  [1m[35mUser Exists (1.2ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
Processing by Admin::FlagsController#index as JSON
  Parameters: {"filter"=>"active"}
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35m (1.5ms)[0m  SELECT COUNT(DISTINCT posts.id) FROM "post_actions" INNER JOIN "posts" ON "posts"."id" = "post_actions"."post_id" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE "post_actions"."post_action_type_id" IN (3, 4, 7, 8) AND "posts"."deleted_at" IS NULL AND "topics"."deleted_at" IS NULL AND ("post_actions"."deleted_at" IS NULL)
  [1m[36m (1.0ms)[0m  [1mSELECT id FROM "users" WHERE (moderator or admin )[0m
  [1m[35m (2.0ms)[0m  select p.id, t.title, p.cooked, p.user_id, p.topic_id, p.post_number, p.hidden, t.visible topic_visible
 from posts p
 join topics t on t.id = topic_id
 join (
 select
 post_id,
 count(*) as cnt,
 max(created_at) max
 from post_actions
 WHERE (post_action_type_id in (3,4,7,8)) AND (deleted_at is null)
 group by post_id
 ) as a on a.post_id = p.id
 WHERE (p.deleted_at is null and t.deleted_at is null)
 ORDER BY cnt desc, max asc
 limit 100
Completed 200 OK in 21ms (Views: 0.3ms | ActiveRecord: 5.9ms)


Started GET "/admin/email.json" for 127.0.0.1 at 2013-06-18 01:35:03 -0700
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
Processing by Admin::EmailController#index as JSON
  [1m[35mUser Load (1.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.5ms)


Started GET "/admin/groups.json" for 127.0.0.1 at 2013-06-18 01:35:07 -0700
  [1m[36mUser Exists (1.7ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (1.7ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::GroupsController#index as JSON
  [1m[36mUser Load (2.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mGroup Load (1.3ms)[0m  SELECT "groups".* FROM "groups" ORDER BY name
Completed 200 OK in 8ms (Views: 0.1ms | ActiveRecord: 4.0ms)


Started GET "/admin/dashboard" for 127.0.0.1 at 2013-06-18 01:35:08 -0700
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
Processing by Admin::DashboardController#index as JSON
  [1m[35mUser Load (1.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36m (1.7ms)[0m  [1mSELECT COUNT(*) AS count_all, visited_at AS visited_at FROM "user_visits" WHERE (visited_at >= '2013-05-19 08:35:08.508853') GROUP BY visited_at ORDER BY visited_at[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) AS count_all, date(created_at) AS date_created_at FROM "users" WHERE (created_at > '2013-05-19 08:35:08.511914') GROUP BY date(created_at) ORDER BY date(created_at)
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "users" [0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM "users" WHERE (created_at > '2013-04-19 08:35:08.515506' and created_at < '2013-05-19 08:35:08.515644')
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) AS count_all, date(created_at) AS date_created_at FROM "topics" WHERE ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (created_at > '2013-05-19 08:35:08.517777') GROUP BY date(created_at) ORDER BY date(created_at)[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "topics" WHERE ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message')
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "topics" WHERE ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (created_at > '2013-04-19 08:35:08.521256' and created_at < '2013-05-19 08:35:08.521364')[0m
  [1m[35m (1.6ms)[0m  SELECT COUNT(*) AS count_all, date(posts.created_at) AS date_posts_created_at FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (posts.created_at > '2013-05-19 08:35:08.523390') GROUP BY date(posts.created_at) ORDER BY date(posts.created_at)
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message')[0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (posts.created_at > '2013-04-19 08:35:08.527965' and posts.created_at < '2013-05-19 08:35:08.528099')
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-19')[0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-20')
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-21')[0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-22')
  [1m[36m (1.1ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-23')[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-24')
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-25')[0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-26')
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-27')[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-28')
  [1m[36m (1.1ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-29')[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-30')
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-05-31')[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-01')
  [1m[36m (73.7ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-02')[0m
  [1m[35m (1.6ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-03')
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-04')[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-05')
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-06')[0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-07')
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-08')[0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-09')
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-10')[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-11')
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-12')[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-13')
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-14')[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-15')
  [1m[36m (1.1ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-16')[0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-17')
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (date(created_at) = '2013-06-18')[0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL)
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" IN (3, 4, 6, 7, 8) AND ("post_actions"."deleted_at" IS NULL) AND (created_at > '2013-04-19 08:35:08.658169' and created_at < '2013-05-19 08:35:08.658315')[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) AS count_all, trust_level AS trust_level FROM "users" GROUP BY trust_level
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) AS count_all, date(created_at) AS date_created_at FROM "post_actions" WHERE "post_actions"."post_action_type_id" = 2 AND (created_at > '2013-05-19 08:35:08.662530') GROUP BY date(created_at) ORDER BY date(created_at)[0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" = 2
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" = 2 AND (created_at > '2013-04-19 08:35:08.666137' and created_at < '2013-05-19 08:35:08.666284')[0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) AS count_all, date(created_at) AS date_created_at FROM "post_actions" WHERE "post_actions"."post_action_type_id" = 1 AND (created_at > '2013-05-19 08:35:08.668187') GROUP BY date(created_at) ORDER BY date(created_at)
  [1m[36m (1.1ms)[0m  [1mSELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" = 1[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "post_actions" WHERE "post_actions"."post_action_type_id" = 1 AND (created_at > '2013-04-19 08:35:08.671445' and created_at < '2013-05-19 08:35:08.671561')
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) AS count_all, date(starred_at) AS date_starred_at FROM "topic_users" WHERE (starred_at > '2013-05-19 08:35:08.673315') GROUP BY date(starred_at) ORDER BY date(starred_at)[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "topic_users" WHERE "topic_users"."starred" = 't'
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "topic_users" WHERE "topic_users"."starred" = 't' AND (starred_at > '2013-04-19 08:35:08.676977' and starred_at < '2013-05-19 08:35:08.677146')[0m
  [1m[35m (1.8ms)[0m  SELECT COUNT(*) AS count_all, date(created_at) AS date_created_at FROM "email_logs" WHERE (created_at > '2013-05-19 08:35:08.685983') GROUP BY date(created_at) ORDER BY date(created_at)
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "email_logs" [0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM "email_logs" WHERE (created_at > '2013-04-19 08:35:08.696130' and created_at < '2013-05-19 08:35:08.696280')
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) AS count_all, date(posts.created_at) AS date_posts_created_at FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'user_to_user') AND (posts.created_at > '2013-05-19 08:35:08.698588') GROUP BY date(posts.created_at) ORDER BY date(posts.created_at)[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'user_to_user')
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'user_to_user') AND (posts.created_at > '2013-04-19 08:35:08.703461' and posts.created_at < '2013-05-19 08:35:08.703568')[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) AS count_all, date(posts.created_at) AS date_posts_created_at FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'system_message') AND (posts.created_at > '2013-05-19 08:35:08.705895') GROUP BY date(posts.created_at) ORDER BY date(posts.created_at)
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'system_message')[0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'system_message') AND (posts.created_at > '2013-04-19 08:35:08.710224' and posts.created_at < '2013-05-19 08:35:08.710335')
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) AS count_all, date(posts.created_at) AS date_posts_created_at FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'moderator_warning') AND (posts.created_at > '2013-05-19 08:35:08.712567') GROUP BY date(posts.created_at) ORDER BY date(posts.created_at)[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'moderator_warning')
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'moderator_warning') AND (posts.created_at > '2013-04-19 08:35:08.717033' and posts.created_at < '2013-05-19 08:35:08.717142')[0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) AS count_all, date(posts.created_at) AS date_posts_created_at FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'notify_moderators') AND (posts.created_at > '2013-05-19 08:35:08.719420') GROUP BY date(posts.created_at) ORDER BY date(posts.created_at)
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'notify_moderators')[0m
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'notify_moderators') AND (posts.created_at > '2013-04-19 08:35:08.723765' and posts.created_at < '2013-05-19 08:35:08.723903')
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) AS count_all, date(posts.created_at) AS date_posts_created_at FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'notify_user') AND (posts.created_at > '2013-05-19 08:35:08.726580') GROUP BY date(posts.created_at) ORDER BY date(posts.created_at)[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'notify_user')
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "posts" INNER JOIN "topics" ON "topics"."id" = "posts"."topic_id" WHERE ("posts"."deleted_at" IS NULL) AND (topics.archetype = 'private_message') AND (topics.subtype = 'notify_user') AND (posts.created_at > '2013-04-19 08:35:08.731047' and posts.created_at < '2013-05-19 08:35:08.731160')[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "users" WHERE "users"."admin" = 't'
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."moderator" = 't'[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "users" WHERE "users"."blocked" = 't'
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) AS count_all, users.username AS users_username FROM "incoming_links" INNER JOIN "users" ON "users"."id" = "incoming_links"."user_id" WHERE (incoming_links.created_at > '2013-05-19 08:35:08.740795' AND incoming_links.user_id IS NOT NULL) GROUP BY users.username[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(DISTINCT incoming_links.topic_id) AS count_incoming_links_topic_id, users.username AS users_username FROM "incoming_links" INNER JOIN "users" ON "users"."id" = "incoming_links"."user_id" WHERE (incoming_links.created_at > '2013-05-19 08:35:08.740795' AND incoming_links.user_id IS NOT NULL) GROUP BY users.username
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) AS count_all, domain AS domain FROM "incoming_links" WHERE (created_at > '2013-05-19 08:35:08.753172' AND domain IS NOT NULL) GROUP BY domain[0m
  [1m[35m (70.9ms)[0m  SELECT COUNT(DISTINCT "incoming_links"."topic_id") AS count_topic_id, domain AS domain FROM "incoming_links" WHERE (created_at > '2013-05-19 08:35:08.753172' AND domain IS NOT NULL) GROUP BY domain
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(DISTINCT "incoming_links"."user_id") AS count_user_id, domain AS domain FROM "incoming_links" WHERE (created_at > '2013-05-19 08:35:08.753172' AND domain IS NOT NULL) GROUP BY domain[0m
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) AS count_all, topic_id AS topic_id FROM "incoming_links" WHERE (created_at > '2013-05-19 08:35:08.828675' AND topic_id IS NOT NULL) GROUP BY topic_id
  [1m[36mTopic Load (1.3ms)[0m  [1mSELECT id, slug, title FROM "topics" WHERE ("topics"."deleted_at" IS NULL) AND (id in (NULL))[0m
Completed 200 OK in 360ms (Views: 0.1ms | ActiveRecord: 254.5ms)


Started GET "/admin/dashboard/problems" for 127.0.0.1 at 2013-06-18 01:35:08 -0700
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
Processing by Admin::DashboardController#problems as JSON
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
Completed 200 OK in 22ms (Views: 0.3ms | ActiveRecord: 1.4ms)


Started GET "/admin/site_settings" for 127.0.0.1 at 2013-06-18 01:35:20 -0700
  [1m[35mUser Exists (1.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1[0m
Processing by Admin::SiteSettingsController#index as JSON
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 1.2ms)


Started GET "/admin/site_content_types" for 127.0.0.1 at 2013-06-18 01:35:31 -0700
  [1m[36mUser Exists (1.3ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."id" = 1 AND (moderator or admin ) LIMIT 1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."admin" = 't' AND "users"."id" = 1 LIMIT 1
Processing by Admin::SiteContentTypesController#index as JSON
  [1m[36mUser Load (1.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 1.6ms)
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (1.7ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m


Started GET "/" for 127.0.0.1 at 2013-06-20 01:42:52 -0700
Processing by ListController#latest as HTML
  [1m[35mCategory Load (4.3ms)[0m  SELECT "categories".* FROM "categories" WHERE (NOT categories.secure) ORDER BY topic_count desc
  [1m[36mTopic Load (3.8ms)[0m  [1mSELECT id, title, slug FROM "topics" WHERE "topics"."id" IN (2, 4) AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mPostActionType Load (6.2ms)[0m  SELECT "post_action_types".* FROM "post_action_types" ORDER BY position asc
  [1m[36m (7.3ms)[0m  [1mSHOW max_identifier_length[0m
  [1m[35mSQL (93.7ms)[0m  SELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') ORDER BY CASE WHEN topics.category_id IS NULL and (topics.pinned_at IS NOT NULL) THEN 0 ELSE 1 END, topics.bumped_at DESC LIMIT 30
  [1m[36mUser Load (6.2ms)[0m  [1mSELECT id, email, username FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mPost Load (4.4ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mPost Load (3.5ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mPost Load (1.7ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  Rendered list/list.erb within layouts/application (1.4ms)
  Rendered common/_special_font_face.html.erb (0.9ms)
  [1m[36mSiteCustomization Load (1.7ms)[0m  [1mSELECT "site_customizations".* FROM "site_customizations" WHERE "site_customizations"."enabled" = 't' LIMIT 1[0m
  Rendered common/_discourse_stylesheet.html.erb (2828.2ms)
  Rendered common/_discourse_javascript.html.erb (3450.3ms)
Completed 200 OK in 8513ms (Views: 6298.1ms | ActiveRecord: 188.4ms)


Started GET "/" for 127.0.0.1 at 2013-06-20 01:43:01 -0700
Processing by ListController#latest as HTML
  [1m[35mSQL (2.8ms)[0m  SELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') ORDER BY CASE WHEN topics.category_id IS NULL and (topics.pinned_at IS NOT NULL) THEN 0 ELSE 1 END, topics.bumped_at DESC LIMIT 30
  [1m[36mUser Load (1.7ms)[0m  [1mSELECT id, email, username FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mPost Load (3.0ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mPost Load (2.0ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mPost Load (1.9ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  Rendered list/list.erb within layouts/application (0.7ms)
  Rendered common/_special_font_face.html.erb (0.3ms)
  Rendered common/_discourse_stylesheet.html.erb (8.9ms)
  Rendered common/_discourse_javascript.html.erb (48.8ms)
Completed 200 OK in 103ms (Views: 64.0ms | ActiveRecord: 11.3ms)
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.5ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m


Started GET "/" for 127.0.0.1 at 2013-06-20 01:49:16 -0700
Processing by ListController#latest as HTML
  [1m[35mCategory Load (1.8ms)[0m  SELECT "categories".* FROM "categories" WHERE (NOT categories.secure) ORDER BY topic_count desc
  [1m[36mTopic Load (1.7ms)[0m  [1mSELECT id, title, slug FROM "topics" WHERE "topics"."id" IN (2, 4) AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mPostActionType Load (1.4ms)[0m  SELECT "post_action_types".* FROM "post_action_types" ORDER BY position asc
  [1m[36m (1.4ms)[0m  [1mSHOW max_identifier_length[0m
  [1m[35mSQL (3.5ms)[0m  SELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') ORDER BY CASE WHEN topics.category_id IS NULL and (topics.pinned_at IS NOT NULL) THEN 0 ELSE 1 END, topics.bumped_at DESC LIMIT 30
  [1m[36mUser Load (1.6ms)[0m  [1mSELECT id, email, username FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mPost Load (1.7ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mPost Load (1.8ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mPost Load (62.6ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  Rendered list/list.erb within layouts/application (1.3ms)
  Rendered common/_special_font_face.html.erb (0.7ms)
  [1m[36mSiteCustomization Load (1.7ms)[0m  [1mSELECT "site_customizations".* FROM "site_customizations" WHERE "site_customizations"."enabled" = 't' LIMIT 1[0m
  Rendered common/_discourse_stylesheet.html.erb (141.7ms)
  Rendered common/_discourse_javascript.html.erb (483.6ms)
Completed 200 OK in 1706ms (Views: 633.1ms | ActiveRecord: 107.7ms)
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.5ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m


Started GET "/" for 127.0.0.1 at 2013-06-20 01:51:31 -0700
Processing by ListController#latest as HTML
  [1m[35mCategory Load (2.0ms)[0m  SELECT "categories".* FROM "categories" WHERE (NOT categories.secure) ORDER BY topic_count desc
  [1m[36mTopic Load (1.9ms)[0m  [1mSELECT id, title, slug FROM "topics" WHERE "topics"."id" IN (2, 4) AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mPostActionType Load (1.3ms)[0m  SELECT "post_action_types".* FROM "post_action_types" ORDER BY position asc
  [1m[36m (1.6ms)[0m  [1mSHOW max_identifier_length[0m
  [1m[35mSQL (3.7ms)[0m  SELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') ORDER BY CASE WHEN topics.category_id IS NULL and (topics.pinned_at IS NOT NULL) THEN 0 ELSE 1 END, topics.bumped_at DESC LIMIT 30
  [1m[36mUser Load (2.0ms)[0m  [1mSELECT id, email, username FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mPost Load (68.9ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mPost Load (1.8ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mPost Load (1.6ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  Rendered list/list.erb within layouts/application (1.5ms)
  Rendered common/_special_font_face.html.erb (0.8ms)
  [1m[36mSiteCustomization Load (2.1ms)[0m  [1mSELECT "site_customizations".* FROM "site_customizations" WHERE "site_customizations"."enabled" = 't' LIMIT 1[0m
  Rendered common/_discourse_stylesheet.html.erb (3.9ms)
  Rendered common/_discourse_javascript.html.erb (1.0ms)
Completed 200 OK in 919ms (Views: 19.2ms | ActiveRecord: 93.7ms)
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.4ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m


Started GET "/" for 127.0.0.1 at 2013-06-20 01:52:53 -0700
Processing by ListController#latest as HTML
  [1m[35mCategory Load (2.1ms)[0m  SELECT "categories".* FROM "categories" WHERE (NOT categories.secure) ORDER BY topic_count desc
  [1m[36mTopic Load (1.8ms)[0m  [1mSELECT id, title, slug FROM "topics" WHERE "topics"."id" IN (2, 4) AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mPostActionType Load (1.4ms)[0m  SELECT "post_action_types".* FROM "post_action_types" ORDER BY position asc
  [1m[36m (1.4ms)[0m  [1mSHOW max_identifier_length[0m
  [1m[35mSQL (3.8ms)[0m  SELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') ORDER BY CASE WHEN topics.category_id IS NULL and (topics.pinned_at IS NOT NULL) THEN 0 ELSE 1 END, topics.bumped_at DESC LIMIT 30
  [1m[36mUser Load (1.8ms)[0m  [1mSELECT id, email, username FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mPost Load (2.3ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mPost Load (2.1ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mPost Load (1.7ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  Rendered list/list.erb within layouts/application (1.3ms)
  Rendered common/_special_font_face.html.erb (0.8ms)
  [1m[36mSiteCustomization Load (1.9ms)[0m  [1mSELECT "site_customizations".* FROM "site_customizations" WHERE "site_customizations"."enabled" = 't' LIMIT 1[0m
  Rendered common/_discourse_stylesheet.html.erb (3.3ms)
  Rendered common/_discourse_javascript.html.erb (67.0ms)
Completed 200 OK in 993ms (Views: 83.9ms | ActiveRecord: 27.1ms)
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.5ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.5ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m


Started GET "/" for 127.0.0.1 at 2013-06-20 02:34:40 -0700
Processing by ListController#latest as HTML
  [1m[35mCategory Load (2.0ms)[0m  SELECT "categories".* FROM "categories" WHERE (NOT categories.secure) ORDER BY topic_count desc
  [1m[36mTopic Load (1.9ms)[0m  [1mSELECT id, title, slug FROM "topics" WHERE "topics"."id" IN (2, 4) AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mPostActionType Load (1.4ms)[0m  SELECT "post_action_types".* FROM "post_action_types" ORDER BY position asc
  [1m[36m (1.4ms)[0m  [1mSHOW max_identifier_length[0m
  [1m[35mSQL (3.8ms)[0m  SELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') ORDER BY CASE WHEN topics.category_id IS NULL and (topics.pinned_at IS NOT NULL) THEN 0 ELSE 1 END, topics.bumped_at DESC LIMIT 30
  [1m[36mUser Load (1.8ms)[0m  [1mSELECT id, email, username FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mPost Load (2.3ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mPost Load (1.8ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mPost Load (1.5ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  Rendered list/list.erb within layouts/application (1.4ms)
  Rendered common/_special_font_face.html.erb (0.7ms)
  [1m[36mSiteCustomization Load (1.8ms)[0m  [1mSELECT "site_customizations".* FROM "site_customizations" WHERE "site_customizations"."enabled" = 't' LIMIT 1[0m
  Rendered common/_discourse_stylesheet.html.erb (3.1ms)
  Rendered common/_discourse_javascript.html.erb (0.8ms)
Completed 200 OK in 930ms (Views: 16.8ms | ActiveRecord: 26.5ms)


Started GET "/categories.json" for 127.0.0.1 at 2013-06-20 02:35:35 -0700
Processing by CategoriesController#index as JSON
  [1m[35mCategoryFeaturedTopic Load (1.9ms)[0m  SELECT category_id, topic_id FROM "category_featured_topics" ORDER BY rank
  [1m[36mTopic Load (1.6ms)[0m  [1mSELECT "topics".* FROM "topics" WHERE "topics"."id" IN (3, 5) AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mCategory Load (1.4ms)[0m  SELECT "categories".* FROM "categories" WHERE (NOT categories.secure) ORDER BY COALESCE(categories.topics_week, 0) DESC, COALESCE(categories.topics_month, 0) DESC, COALESCE(categories.topics_year, 0) DESC
  [1m[36mCategoryFeaturedUser Load (2.5ms)[0m  [1mSELECT "category_featured_users".* FROM "category_featured_users" WHERE "category_featured_users"."category_id" IN (2, 1)[0m
  [1m[35m (1.6ms)[0m  SELECT COUNT(count_column) FROM (SELECT 1 AS count_column FROM "topics" WHERE "topics"."category_id" IS NULL AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') LIMIT 6) subquery_for_count 
  [1m[36m (7.3ms)[0m  [1mSELECT SUM(CASE WHEN created_at >= (CURRENT_TIMESTAMP - INTERVAL '1 WEEK') THEN 1 ELSE 0 END) as topics_week,
 SUM(CASE WHEN created_at >= (CURRENT_TIMESTAMP - INTERVAL '1 MONTH') THEN 1 ELSE 0 END) as topics_month,
 SUM(CASE WHEN created_at >= (CURRENT_TIMESTAMP - INTERVAL '1 YEAR') THEN 1 ELSE 0 END) as topics_year,
 COUNT(*) AS topic_count
 FROM topics
 WHERE topics.visible
 AND topics.deleted_at IS NULL
 AND topics.category_id IS NULL
 AND topics.archetype <> 'private_message'[0m
  [1m[35mTopic Load (2.0ms)[0m  SELECT "topics".* FROM "topics" WHERE "topics"."category_id" IS NULL AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') ORDER BY topics.bumped_at desc LIMIT 6
  [1m[36mPost Load (1.6ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
Completed 200 OK in 173ms (Views: 0.2ms | ActiveRecord: 31.4ms)


Started GET "/latest.json" for 127.0.0.1 at 2013-06-20 02:35:44 -0700
Processing by ListController#latest as JSON
  [1m[36mSQL (2.3ms)[0m  [1mSELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') ORDER BY CASE WHEN topics.category_id IS NULL and (topics.pinned_at IS NOT NULL) THEN 0 ELSE 1 END, topics.bumped_at DESC LIMIT 30[0m
  [1m[35mUser Load (2.0ms)[0m  SELECT id, email, username FROM "users" WHERE "users"."id" IN (1)
  [1m[36mPost Load (1.9ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mPost Load (1.7ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mPost Load (1.7ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
Completed 200 OK in 27ms (Views: 0.1ms | ActiveRecord: 9.6ms)


Started GET "/category/dgs.json" for 127.0.0.1 at 2013-06-20 02:35:48 -0700
Processing by ListController#category as JSON
  Parameters: {"category"=>"dgs"}
  [1m[35mCategory Load (1.4ms)[0m  SELECT "categories".* FROM "categories" WHERE (slug = 'dgs' or id = 0) LIMIT 1
  [1m[36mCategoryFeaturedUser Load (1.3ms)[0m  [1mSELECT "category_featured_users".* FROM "category_featured_users" WHERE "category_featured_users"."category_id" IN (2)[0m
  [1m[35mSQL (3.0ms)[0m  SELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."visible" = 't' AND "topics"."category_id" = 2 AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') ORDER BY CASE WHEN (topics.pinned_at IS NOT NULL) THEN 0 ELSE 1 END, topics.bumped_at DESC LIMIT 30
  [1m[36mUser Load (1.8ms)[0m  [1mSELECT id, email, username FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mPost Load (2.0ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
Completed 200 OK in 21ms (Views: 0.2ms | ActiveRecord: 9.5ms)


Started GET "/latest.json" for 127.0.0.1 at 2013-06-20 02:35:52 -0700
Processing by ListController#latest as JSON
  [1m[36mSQL (2.6ms)[0m  [1mSELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') ORDER BY CASE WHEN topics.category_id IS NULL and (topics.pinned_at IS NOT NULL) THEN 0 ELSE 1 END, topics.bumped_at DESC LIMIT 30[0m
  [1m[35mUser Load (1.5ms)[0m  SELECT id, email, username FROM "users" WHERE "users"."id" IN (1)
  [1m[36mPost Load (1.6ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mPost Load (1.7ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mPost Load (1.6ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
Completed 200 OK in 27ms (Views: 0.1ms | ActiveRecord: 9.0ms)
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (0.5ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
Updating mtimes for current assets...
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (1.7ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m


Started GET "/" for 127.0.0.1 at 2013-06-20 19:23:52 -0700
Processing by ListController#latest as HTML
  [1m[35mCategory Load (3.9ms)[0m  SELECT "categories".* FROM "categories" WHERE (NOT categories.secure) ORDER BY topic_count desc
  [1m[36mTopic Load (2.8ms)[0m  [1mSELECT id, title, slug FROM "topics" WHERE "topics"."id" IN (2, 4) AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35mPostActionType Load (3.6ms)[0m  SELECT "post_action_types".* FROM "post_action_types" ORDER BY position asc
  [1m[36m (1.4ms)[0m  [1mSHOW max_identifier_length[0m
  [1m[35mSQL (9.7ms)[0m  SELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') ORDER BY CASE WHEN topics.category_id IS NULL and (topics.pinned_at IS NOT NULL) THEN 0 ELSE 1 END, topics.bumped_at DESC LIMIT 30
  [1m[36mUser Load (2.9ms)[0m  [1mSELECT id, email, username FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mPost Load (2.9ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mPost Load (3.8ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mPost Load (1.6ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  Rendered list/list.erb within layouts/application (1.5ms)
  Rendered common/_special_font_face.html.erb (0.8ms)
  [1m[36mSiteCustomization Load (1.9ms)[0m  [1mSELECT "site_customizations".* FROM "site_customizations" WHERE "site_customizations"."enabled" = 't' LIMIT 1[0m
  Rendered common/_discourse_stylesheet.html.erb (3.5ms)
  Rendered common/_discourse_javascript.html.erb (65.9ms)
Completed 200 OK in 1051ms (Views: 86.0ms | ActiveRecord: 41.2ms)


Started GET "/t/4/1.json?track_visit=true" for 127.0.0.1 at 2013-06-20 19:23:57 -0700
Processing by TopicsController#show as JSON
  Parameters: {"track_visit"=>"true", "topic_id"=>"4", "post_number"=>"1"}
  [1m[35mTopic Load (1.8ms)[0m  SELECT "topics".* FROM "topics" WHERE "topics"."id" = 4 AND ("topics"."deleted_at" IS NULL) LIMIT 1
  [1m[36mCategory Load (1.6ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."id" IN (2)[0m
  [1m[35mPost Load (3.7ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL) ORDER BY @(post_number - 1) LIMIT 1
  [1m[36m (1.3ms)[0m  [1mSELECT id FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL) ORDER BY sort_order[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "posts" WHERE "posts"."id" IN (5) AND ("posts"."deleted_at" IS NULL)
  [1m[36m (1.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (5.8ms)[0m  INSERT INTO "views" ("ip", "parent_id", "parent_type", "user_id", "viewed_at") VALUES ($1, $2, $3, $4, $5)  [["ip", 2130706433], ["parent_id", 4], ["parent_type", "Topic"], ["user_id", nil], ["viewed_at", Thu, 20 Jun 2013]]
  [1m[36mSQL (2.2ms)[0m  [1mUPDATE "topics" SET views = views + 1 WHERE "topics"."id" = 4 AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35m (1.4ms)[0m  COMMIT
  [1m[36m (1.7ms)[0m  [1mSELECT COUNT(*) FROM "posts" WHERE "posts"."id" IN (5) AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35mPost Load (1.4ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."id" IN (5) AND ("posts"."deleted_at" IS NULL) ORDER BY sort_order
  [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35m (87.7ms)[0m  SELECT
 l.post_id,
 l.url,
 l.clicks,
 t.title,
 l.internal,
 l.reflection
 FROM topic_links l
 LEFT JOIN topics t ON t.id = l.link_topic_id
 LEFT JOIN categories AS c ON c.id = t.category_id
 WHERE (t.deleted_at IS NULL) AND (l.post_id IN (5)) AND (NOT COALESCE(c.secure, false))
 ORDER BY reflection ASC, clicks DESC
  [1m[36mPostAction Load (2.5ms)[0m  [1mSELECT "post_actions".* FROM "post_actions" WHERE "post_actions"."post_id" IN (5) AND "post_actions"."user_id" = 0 AND ("post_actions"."deleted_at" IS NULL)[0m
  [1m[35m (3.1ms)[0m  SELECT MAX("posts"."post_number") AS max_id FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL)
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35mUser Load (1.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mGroup Load (3.2ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "topic_allowed_groups" ON "groups"."id" = "topic_allowed_groups"."group_id" WHERE "topic_allowed_groups"."topic_id" = 4
  [1m[36m (3.2ms)[0m  [1mSELECT ftl.url,
 ft.title,
 ftl.link_topic_id,
 ftl.reflection,
 ftl.internal,
 MIN(ftl.user_id) AS user_id,
 SUM(clicks) AS clicks
 FROM topic_links AS ftl
 LEFT JOIN topics AS ft ON ftl.link_topic_id = ft.id
 LEFT JOIN categories AS c ON c.id = ft.category_id
 WHERE (ftl.topic_id = 4) AND (ft.deleted_at IS NULL) AND (NOT COALESCE(c.secure, false))
 GROUP BY ftl.url, ft.title, ftl.link_topic_id, ftl.reflection, ftl.internal
 ORDER BY clicks DESC[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) AS count_all, user_id AS user_id FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL) GROUP BY user_id ORDER BY count_all desc LIMIT 24
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mSQL (2.9ms)[0m  SELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."closed" = 'f' AND "topics"."archived" = 'f' AND "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') AND (topics.id NOT IN (4)) ORDER BY CASE WHEN topics.category_id = 2 THEN 0 ELSE 1 END, RANDOM() LIMIT 5
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT id, email, username FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mPost Load (2.1ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mGroup Load (1.8ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name[0m
  [1m[35mGroup Load (1.4ms)[0m  SELECT "groups".* FROM "groups" ORDER BY name
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".* FROM "groups" ORDER BY name
  [1m[36mPost Load (1.7ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".* FROM "groups" ORDER BY name[0m
Completed 200 OK in 251ms (Views: 0.2ms | ActiveRecord: 159.7ms)


Started GET "/t/1/1.json?track_visit=true" for 127.0.0.1 at 2013-06-20 19:30:01 -0700
Processing by TopicsController#show as JSON
  Parameters: {"track_visit"=>"true", "topic_id"=>"1", "post_number"=>"1"}
  [1m[35mTopic Load (1.5ms)[0m  SELECT "topics".* FROM "topics" WHERE "topics"."id" = 1 AND ("topics"."deleted_at" IS NULL) LIMIT 1
  [1m[36mPost Load (2.2ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 1 AND ("posts"."deleted_at" IS NULL) ORDER BY @(post_number - 1) LIMIT 1[0m
  [1m[35m (1.3ms)[0m  SELECT id FROM "posts" WHERE "posts"."topic_id" = 1 AND ("posts"."deleted_at" IS NULL) ORDER BY sort_order
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "posts" WHERE "posts"."id" IN (1) AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35m (1.0ms)[0m  BEGIN
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "views" ("ip", "parent_id", "parent_type", "user_id", "viewed_at") VALUES ($1, $2, $3, $4, $5)[0m  [["ip", 2130706433], ["parent_id", 1], ["parent_type", "Topic"], ["user_id", nil], ["viewed_at", Thu, 20 Jun 2013]]
  [1m[35mSQL (1.7ms)[0m  UPDATE "topics" SET views = views + 1 WHERE "topics"."id" = 1 AND ("topics"."deleted_at" IS NULL)
  [1m[36m (1.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (1.6ms)[0m  SELECT COUNT(*) FROM "posts" WHERE "posts"."id" IN (1) AND ("posts"."deleted_at" IS NULL)
  [1m[36mPost Load (2.0ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."id" IN (1) AND ("posts"."deleted_at" IS NULL) ORDER BY sort_order[0m
  [1m[35mUser Load (2.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" IN (1)
  [1m[36m (2.6ms)[0m  [1mSELECT
 l.post_id,
 l.url,
 l.clicks,
 t.title,
 l.internal,
 l.reflection
 FROM topic_links l
 LEFT JOIN topics t ON t.id = l.link_topic_id
 LEFT JOIN categories AS c ON c.id = t.category_id
 WHERE (t.deleted_at IS NULL) AND (l.post_id IN (1)) AND (NOT COALESCE(c.secure, false))
 ORDER BY reflection ASC, clicks DESC[0m
  [1m[35mPostAction Load (1.7ms)[0m  SELECT "post_actions".* FROM "post_actions" WHERE "post_actions"."post_id" IN (1) AND "post_actions"."user_id" = 0 AND ("post_actions"."deleted_at" IS NULL)
  [1m[36m (1.5ms)[0m  [1mSELECT MAX("posts"."post_number") AS max_id FROM "posts" WHERE "posts"."topic_id" = 1 AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "posts" WHERE "posts"."topic_id" = 1 AND ("posts"."deleted_at" IS NULL)
  [1m[36mUser Load (1.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mGroup Load (1.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "topic_allowed_groups" ON "groups"."id" = "topic_allowed_groups"."group_id" WHERE "topic_allowed_groups"."topic_id" = 1[0m
  [1m[35m (1.6ms)[0m  SELECT ftl.url,
 ft.title,
 ftl.link_topic_id,
 ftl.reflection,
 ftl.internal,
 MIN(ftl.user_id) AS user_id,
 SUM(clicks) AS clicks
 FROM topic_links AS ftl
 LEFT JOIN topics AS ft ON ftl.link_topic_id = ft.id
 LEFT JOIN categories AS c ON c.id = ft.category_id
 WHERE (ftl.topic_id = 1) AND (ft.deleted_at IS NULL) AND (NOT COALESCE(c.secure, false))
 GROUP BY ftl.url, ft.title, ftl.link_topic_id, ftl.reflection, ftl.internal
 ORDER BY clicks DESC
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) AS count_all, user_id AS user_id FROM "posts" WHERE "posts"."topic_id" = 1 AND ("posts"."deleted_at" IS NULL) GROUP BY user_id ORDER BY count_all desc LIMIT 24[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" IN (1)
  [1m[36mSQL (2.4ms)[0m  [1mSELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."closed" = 'f' AND "topics"."archived" = 'f' AND "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') AND (topics.id NOT IN (1)) ORDER BY RANDOM() LIMIT 5[0m
  [1m[35mUser Load (1.9ms)[0m  SELECT id, email, username FROM "users" WHERE "users"."id" IN (1)
  [1m[36mPost Load (1.9ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mGroup Load (1.7ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 2 ORDER BY name
  [1m[36mGroup Load (1.5ms)[0m  [1mSELECT "groups".* FROM "groups" ORDER BY name[0m
  [1m[35mPost Load (2.2ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mGroup Load (1.9ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".* FROM "groups" ORDER BY name
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".* FROM "groups" ORDER BY name
  [1m[36mPost Load (1.9ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".* FROM "groups" ORDER BY name[0m
Completed 200 OK in 94ms (Views: 0.3ms | ActiveRecord: 49.5ms)


Started GET "/t/4/1.json?track_visit=true" for 127.0.0.1 at 2013-06-20 19:30:02 -0700
Processing by TopicsController#show as JSON
  Parameters: {"track_visit"=>"true", "topic_id"=>"4", "post_number"=>"1"}
  [1m[35mTopic Load (1.5ms)[0m  SELECT "topics".* FROM "topics" WHERE "topics"."id" = 4 AND ("topics"."deleted_at" IS NULL) LIMIT 1
  [1m[36mCategory Load (1.4ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."id" IN (2)[0m
  [1m[35mPost Load (1.8ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL) ORDER BY @(post_number - 1) LIMIT 1
  [1m[36m (1.7ms)[0m  [1mSELECT id FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL) ORDER BY sort_order[0m
  [1m[35m (2.5ms)[0m  SELECT COUNT(*) FROM "posts" WHERE "posts"."id" IN (5) AND ("posts"."deleted_at" IS NULL)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT COUNT(*) FROM "posts" WHERE "posts"."id" IN (5) AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35mPost Load (2.0ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."id" IN (5) AND ("posts"."deleted_at" IS NULL) ORDER BY sort_order
  [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35m (3.7ms)[0m  SELECT
 l.post_id,
 l.url,
 l.clicks,
 t.title,
 l.internal,
 l.reflection
 FROM topic_links l
 LEFT JOIN topics t ON t.id = l.link_topic_id
 LEFT JOIN categories AS c ON c.id = t.category_id
 WHERE (t.deleted_at IS NULL) AND (l.post_id IN (5)) AND (NOT COALESCE(c.secure, false))
 ORDER BY reflection ASC, clicks DESC
  [1m[36mPostAction Load (1.6ms)[0m  [1mSELECT "post_actions".* FROM "post_actions" WHERE "post_actions"."post_id" IN (5) AND "post_actions"."user_id" = 0 AND ("post_actions"."deleted_at" IS NULL)[0m
  [1m[35m (1.6ms)[0m  SELECT MAX("posts"."post_number") AS max_id FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL)
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35mUser Load (1.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mGroup Load (1.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "topic_allowed_groups" ON "groups"."id" = "topic_allowed_groups"."group_id" WHERE "topic_allowed_groups"."topic_id" = 4
  [1m[36m (1.9ms)[0m  [1mSELECT ftl.url,
 ft.title,
 ftl.link_topic_id,
 ftl.reflection,
 ftl.internal,
 MIN(ftl.user_id) AS user_id,
 SUM(clicks) AS clicks
 FROM topic_links AS ftl
 LEFT JOIN topics AS ft ON ftl.link_topic_id = ft.id
 LEFT JOIN categories AS c ON c.id = ft.category_id
 WHERE (ftl.topic_id = 4) AND (ft.deleted_at IS NULL) AND (NOT COALESCE(c.secure, false))
 GROUP BY ftl.url, ft.title, ftl.link_topic_id, ftl.reflection, ftl.internal
 ORDER BY clicks DESC[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) AS count_all, user_id AS user_id FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL) GROUP BY user_id ORDER BY count_all desc LIMIT 24
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mSQL (2.9ms)[0m  SELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."closed" = 'f' AND "topics"."archived" = 'f' AND "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') AND (topics.id NOT IN (4)) ORDER BY CASE WHEN topics.category_id = 2 THEN 0 ELSE 1 END, RANDOM() LIMIT 5
  [1m[36mUser Load (1.6ms)[0m  [1mSELECT id, email, username FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mGroup Load (1.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name
  [1m[36mGroup Load (1.7ms)[0m  [1mSELECT "groups".* FROM "groups" ORDER BY name[0m
  [1m[35mPost Load (1.7ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".* FROM "groups" ORDER BY name
  [1m[36mPost Load (1.8ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".* FROM "groups" ORDER BY name[0m
Completed 200 OK in 77ms (Views: 0.1ms | ActiveRecord: 38.5ms)


Started GET "/t/5/1.json?track_visit=true" for 127.0.0.1 at 2013-06-20 19:30:06 -0700
Processing by TopicsController#show as JSON
  Parameters: {"track_visit"=>"true", "topic_id"=>"5", "post_number"=>"1"}
  [1m[35mTopic Load (1.4ms)[0m  SELECT "topics".* FROM "topics" WHERE "topics"."id" = 5 AND ("topics"."deleted_at" IS NULL) LIMIT 1
  [1m[36mCategory Load (1.4ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."id" IN (1)[0m
  [1m[35mPost Load (1.6ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 5 AND ("posts"."deleted_at" IS NULL) ORDER BY @(post_number - 1) LIMIT 1
  [1m[36m (1.4ms)[0m  [1mSELECT id FROM "posts" WHERE "posts"."topic_id" = 5 AND ("posts"."deleted_at" IS NULL) ORDER BY sort_order[0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM "posts" WHERE "posts"."id" IN (6) AND ("posts"."deleted_at" IS NULL)
  [1m[36m (1.0ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "views" ("ip", "parent_id", "parent_type", "user_id", "viewed_at") VALUES ($1, $2, $3, $4, $5)  [["ip", 2130706433], ["parent_id", 5], ["parent_type", "Topic"], ["user_id", nil], ["viewed_at", Thu, 20 Jun 2013]]
  [1m[36mSQL (1.6ms)[0m  [1mUPDATE "topics" SET views = views + 1 WHERE "topics"."id" = 5 AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35m (2.5ms)[0m  COMMIT
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "posts" WHERE "posts"."id" IN (6) AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35mPost Load (78.5ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."id" IN (6) AND ("posts"."deleted_at" IS NULL) ORDER BY sort_order
  [1m[36mUser Load (1.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35m (1.6ms)[0m  SELECT
 l.post_id,
 l.url,
 l.clicks,
 t.title,
 l.internal,
 l.reflection
 FROM topic_links l
 LEFT JOIN topics t ON t.id = l.link_topic_id
 LEFT JOIN categories AS c ON c.id = t.category_id
 WHERE (t.deleted_at IS NULL) AND (l.post_id IN (6)) AND (NOT COALESCE(c.secure, false))
 ORDER BY reflection ASC, clicks DESC
  [1m[36mPostAction Load (1.5ms)[0m  [1mSELECT "post_actions".* FROM "post_actions" WHERE "post_actions"."post_id" IN (6) AND "post_actions"."user_id" = 0 AND ("post_actions"."deleted_at" IS NULL)[0m
  [1m[35m (1.5ms)[0m  SELECT MAX("posts"."post_number") AS max_id FROM "posts" WHERE "posts"."topic_id" = 5 AND ("posts"."deleted_at" IS NULL)
  [1m[36m (1.6ms)[0m  [1mSELECT COUNT(*) FROM "posts" WHERE "posts"."topic_id" = 5 AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35mUser Load (1.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mGroup Load (1.5ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "topic_allowed_groups" ON "groups"."id" = "topic_allowed_groups"."group_id" WHERE "topic_allowed_groups"."topic_id" = 5
  [1m[36m (1.4ms)[0m  [1mSELECT ftl.url,
 ft.title,
 ftl.link_topic_id,
 ftl.reflection,
 ftl.internal,
 MIN(ftl.user_id) AS user_id,
 SUM(clicks) AS clicks
 FROM topic_links AS ftl
 LEFT JOIN topics AS ft ON ftl.link_topic_id = ft.id
 LEFT JOIN categories AS c ON c.id = ft.category_id
 WHERE (ftl.topic_id = 5) AND (ft.deleted_at IS NULL) AND (NOT COALESCE(c.secure, false))
 GROUP BY ftl.url, ft.title, ftl.link_topic_id, ftl.reflection, ftl.internal
 ORDER BY clicks DESC[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) AS count_all, user_id AS user_id FROM "posts" WHERE "posts"."topic_id" = 5 AND ("posts"."deleted_at" IS NULL) GROUP BY user_id ORDER BY count_all desc LIMIT 24
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mSQL (2.2ms)[0m  SELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."closed" = 'f' AND "topics"."archived" = 'f' AND "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') AND (topics.id NOT IN (5)) ORDER BY CASE WHEN topics.category_id = 1 THEN 0 ELSE 1 END, RANDOM() LIMIT 5
  [1m[36mUser Load (1.9ms)[0m  [1mSELECT id, email, username FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mPost Load (1.8ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mGroup Load (1.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name[0m
  [1m[35mGroup Load (1.4ms)[0m  SELECT "groups".* FROM "groups" ORDER BY name
  [1m[36mPost Load (1.7ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".* FROM "groups" ORDER BY name[0m
  [1m[35mPost Load (1.8ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mGroup Load (1.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 2 ORDER BY name[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".* FROM "groups" ORDER BY name
Completed 200 OK in 159ms (Views: 0.1ms | ActiveRecord: 123.4ms)


Started GET "/t/3/1.json?track_visit=true" for 127.0.0.1 at 2013-06-20 19:34:16 -0700
Processing by TopicsController#show as JSON
  Parameters: {"track_visit"=>"true", "topic_id"=>"3", "post_number"=>"1"}
  [1m[36mTopic Load (1.5ms)[0m  [1mSELECT "topics".* FROM "topics" WHERE "topics"."id" = 3 AND ("topics"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mCategory Load (1.3ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."id" IN (1)
  [1m[36mPost Load (1.5ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY @(post_number - 1) LIMIT 1[0m
  [1m[35m (1.2ms)[0m  SELECT id FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY sort_order
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) FROM "posts" WHERE "posts"."id" IN (3, 4) AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35m (1.0ms)[0m  BEGIN
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "views" ("ip", "parent_id", "parent_type", "user_id", "viewed_at") VALUES ($1, $2, $3, $4, $5)[0m  [["ip", 2130706433], ["parent_id", 3], ["parent_type", "Topic"], ["user_id", nil], ["viewed_at", Thu, 20 Jun 2013]]
  [1m[35mSQL (1.3ms)[0m  UPDATE "topics" SET views = views + 1 WHERE "topics"."id" = 3 AND ("topics"."deleted_at" IS NULL)
  [1m[36m (2.5ms)[0m  [1mCOMMIT[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "posts" WHERE "posts"."id" IN (3, 4) AND ("posts"."deleted_at" IS NULL)
  [1m[36mPost Load (2.0ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."id" IN (3, 4) AND ("posts"."deleted_at" IS NULL) ORDER BY sort_order[0m
  [1m[35mUser Load (2.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" IN (1)
  [1m[36m (78.3ms)[0m  [1mSELECT
 l.post_id,
 l.url,
 l.clicks,
 t.title,
 l.internal,
 l.reflection
 FROM topic_links l
 LEFT JOIN topics t ON t.id = l.link_topic_id
 LEFT JOIN categories AS c ON c.id = t.category_id
 WHERE (t.deleted_at IS NULL) AND (l.post_id IN (3,4)) AND (NOT COALESCE(c.secure, false))
 ORDER BY reflection ASC, clicks DESC[0m
  [1m[35mPostAction Load (2.0ms)[0m  SELECT "post_actions".* FROM "post_actions" WHERE "post_actions"."post_id" IN (3, 4) AND "post_actions"."user_id" = 0 AND ("post_actions"."deleted_at" IS NULL)
  [1m[36m (1.7ms)[0m  [1mSELECT MAX("posts"."post_number") AS max_id FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL)
  [1m[36mUser Load (2.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mGroup Load (1.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "topic_allowed_groups" ON "groups"."id" = "topic_allowed_groups"."group_id" WHERE "topic_allowed_groups"."topic_id" = 3[0m
  [1m[35m (1.7ms)[0m  SELECT ftl.url,
 ft.title,
 ftl.link_topic_id,
 ftl.reflection,
 ftl.internal,
 MIN(ftl.user_id) AS user_id,
 SUM(clicks) AS clicks
 FROM topic_links AS ftl
 LEFT JOIN topics AS ft ON ftl.link_topic_id = ft.id
 LEFT JOIN categories AS c ON c.id = ft.category_id
 WHERE (ftl.topic_id = 3) AND (ft.deleted_at IS NULL) AND (NOT COALESCE(c.secure, false))
 GROUP BY ftl.url, ft.title, ftl.link_topic_id, ftl.reflection, ftl.internal
 ORDER BY clicks DESC
  [1m[36m (1.7ms)[0m  [1mSELECT COUNT(*) AS count_all, user_id AS user_id FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) GROUP BY user_id ORDER BY count_all desc LIMIT 24[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" IN (1)
  [1m[36mSQL (2.1ms)[0m  [1mSELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."closed" = 'f' AND "topics"."archived" = 'f' AND "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') AND (topics.id NOT IN (3)) ORDER BY CASE WHEN topics.category_id = 1 THEN 0 ELSE 1 END, RANDOM() LIMIT 5[0m
  [1m[35mUser Load (1.4ms)[0m  SELECT id, email, username FROM "users" WHERE "users"."id" IN (1)
  [1m[36mGroup Load (1.4ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name[0m
  [1m[35mGroup Load (1.4ms)[0m  SELECT "groups".* FROM "groups" ORDER BY name
  [1m[36mPost Load (1.7ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".* FROM "groups" ORDER BY name[0m
  [1m[35mPost Load (1.6ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mGroup Load (1.6ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 2 ORDER BY name[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".* FROM "groups" ORDER BY name
Completed 200 OK in 159ms (Views: 0.1ms | ActiveRecord: 122.2ms)


Started GET "/t/5/1.json?track_visit=true" for 127.0.0.1 at 2013-06-20 19:34:18 -0700
Processing by TopicsController#show as JSON
  Parameters: {"track_visit"=>"true", "topic_id"=>"5", "post_number"=>"1"}
  [1m[36mTopic Load (1.4ms)[0m  [1mSELECT "topics".* FROM "topics" WHERE "topics"."id" = 5 AND ("topics"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mCategory Load (1.6ms)[0m  SELECT "categories".* FROM "categories" WHERE "categories"."id" IN (1)
  [1m[36mPost Load (1.5ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 5 AND ("posts"."deleted_at" IS NULL) ORDER BY @(post_number - 1) LIMIT 1[0m
  [1m[35m (1.4ms)[0m  SELECT id FROM "posts" WHERE "posts"."topic_id" = 5 AND ("posts"."deleted_at" IS NULL) ORDER BY sort_order
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "posts" WHERE "posts"."id" IN (6) AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "posts" WHERE "posts"."id" IN (6) AND ("posts"."deleted_at" IS NULL)
  [1m[36mPost Load (1.6ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."id" IN (6) AND ("posts"."deleted_at" IS NULL) ORDER BY sort_order[0m
  [1m[35mUser Load (1.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" IN (1)
  [1m[36m (1.8ms)[0m  [1mSELECT
 l.post_id,
 l.url,
 l.clicks,
 t.title,
 l.internal,
 l.reflection
 FROM topic_links l
 LEFT JOIN topics t ON t.id = l.link_topic_id
 LEFT JOIN categories AS c ON c.id = t.category_id
 WHERE (t.deleted_at IS NULL) AND (l.post_id IN (6)) AND (NOT COALESCE(c.secure, false))
 ORDER BY reflection ASC, clicks DESC[0m
  [1m[35mPostAction Load (2.1ms)[0m  SELECT "post_actions".* FROM "post_actions" WHERE "post_actions"."post_id" IN (6) AND "post_actions"."user_id" = 0 AND ("post_actions"."deleted_at" IS NULL)
  [1m[36m (2.2ms)[0m  [1mSELECT MAX("posts"."post_number") AS max_id FROM "posts" WHERE "posts"."topic_id" = 5 AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "posts" WHERE "posts"."topic_id" = 5 AND ("posts"."deleted_at" IS NULL)
  [1m[36mUser Load (1.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mGroup Load (1.5ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "topic_allowed_groups" ON "groups"."id" = "topic_allowed_groups"."group_id" WHERE "topic_allowed_groups"."topic_id" = 5[0m
  [1m[35m (1.6ms)[0m  SELECT ftl.url,
 ft.title,
 ftl.link_topic_id,
 ftl.reflection,
 ftl.internal,
 MIN(ftl.user_id) AS user_id,
 SUM(clicks) AS clicks
 FROM topic_links AS ftl
 LEFT JOIN topics AS ft ON ftl.link_topic_id = ft.id
 LEFT JOIN categories AS c ON c.id = ft.category_id
 WHERE (ftl.topic_id = 5) AND (ft.deleted_at IS NULL) AND (NOT COALESCE(c.secure, false))
 GROUP BY ftl.url, ft.title, ftl.link_topic_id, ftl.reflection, ftl.internal
 ORDER BY clicks DESC
  [1m[36m (1.2ms)[0m  [1mSELECT COUNT(*) AS count_all, user_id AS user_id FROM "posts" WHERE "posts"."topic_id" = 5 AND ("posts"."deleted_at" IS NULL) GROUP BY user_id ORDER BY count_all desc LIMIT 24[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" IN (1)
  [1m[36mSQL (2.4ms)[0m  [1mSELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."closed" = 'f' AND "topics"."archived" = 'f' AND "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') AND (topics.id NOT IN (5)) ORDER BY CASE WHEN topics.category_id = 1 THEN 0 ELSE 1 END, RANDOM() LIMIT 5[0m
  [1m[35mUser Load (1.4ms)[0m  SELECT id, email, username FROM "users" WHERE "users"."id" IN (1)
  [1m[36mPost Load (1.6ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mGroup Load (1.7ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name
  [1m[36mGroup Load (1.6ms)[0m  [1mSELECT "groups".* FROM "groups" ORDER BY name[0m
  [1m[35mPost Load (72.5ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".* FROM "groups" ORDER BY name
  [1m[36mPost Load (1.7ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mGroup Load (1.6ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 2 ORDER BY name
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".* FROM "groups" ORDER BY name[0m
Completed 200 OK in 146ms (Views: 0.2ms | ActiveRecord: 108.5ms)


Started GET "/t/2/1.json?track_visit=true" for 127.0.0.1 at 2013-06-20 19:34:21 -0700
Processing by TopicsController#show as JSON
  Parameters: {"track_visit"=>"true", "topic_id"=>"2", "post_number"=>"1"}
  [1m[35mTopic Load (1.5ms)[0m  SELECT "topics".* FROM "topics" WHERE "topics"."id" = 2 AND ("topics"."deleted_at" IS NULL) LIMIT 1
  [1m[36mCategory Load (1.4ms)[0m  [1mSELECT "categories".* FROM "categories" WHERE "categories"."id" IN (1)[0m
  [1m[35mPost Load (1.5ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY @(post_number - 1) LIMIT 1
  [1m[36m (1.4ms)[0m  [1mSELECT id FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) ORDER BY sort_order[0m
  [1m[35m (1.3ms)[0m  SELECT COUNT(*) FROM "posts" WHERE "posts"."id" IN (2) AND ("posts"."deleted_at" IS NULL)
  [1m[36m (0.9ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "views" ("ip", "parent_id", "parent_type", "user_id", "viewed_at") VALUES ($1, $2, $3, $4, $5)  [["ip", 2130706433], ["parent_id", 2], ["parent_type", "Topic"], ["user_id", nil], ["viewed_at", Thu, 20 Jun 2013]]
  [1m[36mSQL (1.8ms)[0m  [1mUPDATE "topics" SET views = views + 1 WHERE "topics"."id" = 2 AND ("topics"."deleted_at" IS NULL)[0m
  [1m[35m (3.5ms)[0m  COMMIT
  [1m[36m (1.5ms)[0m  [1mSELECT COUNT(*) FROM "posts" WHERE "posts"."id" IN (2) AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35mPost Load (1.8ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."id" IN (2) AND ("posts"."deleted_at" IS NULL) ORDER BY sort_order
  [1m[36mUser Load (1.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35m (1.6ms)[0m  SELECT
 l.post_id,
 l.url,
 l.clicks,
 t.title,
 l.internal,
 l.reflection
 FROM topic_links l
 LEFT JOIN topics t ON t.id = l.link_topic_id
 LEFT JOIN categories AS c ON c.id = t.category_id
 WHERE (t.deleted_at IS NULL) AND (l.post_id IN (2)) AND (NOT COALESCE(c.secure, false))
 ORDER BY reflection ASC, clicks DESC
  [1m[36mPostAction Load (1.8ms)[0m  [1mSELECT "post_actions".* FROM "post_actions" WHERE "post_actions"."post_id" IN (2) AND "post_actions"."user_id" = 0 AND ("post_actions"."deleted_at" IS NULL)[0m
  [1m[35m (2.3ms)[0m  SELECT MAX("posts"."post_number") AS max_id FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL)
  [1m[36m (1.6ms)[0m  [1mSELECT COUNT(*) FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL)[0m
  [1m[35mUser Load (2.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mGroup Load (1.6ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "topic_allowed_groups" ON "groups"."id" = "topic_allowed_groups"."group_id" WHERE "topic_allowed_groups"."topic_id" = 2
  [1m[36m (1.5ms)[0m  [1mSELECT ftl.url,
 ft.title,
 ftl.link_topic_id,
 ftl.reflection,
 ftl.internal,
 MIN(ftl.user_id) AS user_id,
 SUM(clicks) AS clicks
 FROM topic_links AS ftl
 LEFT JOIN topics AS ft ON ftl.link_topic_id = ft.id
 LEFT JOIN categories AS c ON c.id = ft.category_id
 WHERE (ftl.topic_id = 2) AND (ft.deleted_at IS NULL) AND (NOT COALESCE(c.secure, false))
 GROUP BY ftl.url, ft.title, ftl.link_topic_id, ftl.reflection, ftl.internal
 ORDER BY clicks DESC[0m
  [1m[35m (1.4ms)[0m  SELECT COUNT(*) AS count_all, user_id AS user_id FROM "posts" WHERE "posts"."topic_id" = 2 AND ("posts"."deleted_at" IS NULL) GROUP BY user_id ORDER BY count_all desc LIMIT 24
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mSQL (2.6ms)[0m  SELECT "topics"."id" AS t0_r0, "topics"."title" AS t0_r1, "topics"."last_posted_at" AS t0_r2, "topics"."created_at" AS t0_r3, "topics"."updated_at" AS t0_r4, "topics"."views" AS t0_r5, "topics"."posts_count" AS t0_r6, "topics"."user_id" AS t0_r7, "topics"."last_post_user_id" AS t0_r8, "topics"."reply_count" AS t0_r9, "topics"."featured_user1_id" AS t0_r10, "topics"."featured_user2_id" AS t0_r11, "topics"."featured_user3_id" AS t0_r12, "topics"."avg_time" AS t0_r13, "topics"."deleted_at" AS t0_r14, "topics"."highest_post_number" AS t0_r15, "topics"."image_url" AS t0_r16, "topics"."off_topic_count" AS t0_r17, "topics"."like_count" AS t0_r18, "topics"."incoming_link_count" AS t0_r19, "topics"."bookmark_count" AS t0_r20, "topics"."star_count" AS t0_r21, "topics"."category_id" AS t0_r22, "topics"."visible" AS t0_r23, "topics"."moderator_posts_count" AS t0_r24, "topics"."closed" AS t0_r25, "topics"."archived" AS t0_r26, "topics"."bumped_at" AS t0_r27, "topics"."has_best_of" AS t0_r28, "topics"."meta_data" AS t0_r29, "topics"."vote_count" AS t0_r30, "topics"."archetype" AS t0_r31, "topics"."featured_user4_id" AS t0_r32, "topics"."notify_moderators_count" AS t0_r33, "topics"."spam_count" AS t0_r34, "topics"."illegal_count" AS t0_r35, "topics"."inappropriate_count" AS t0_r36, "topics"."pinned_at" AS t0_r37, "topics"."score" AS t0_r38, "topics"."percent_rank" AS t0_r39, "topics"."notify_user_count" AS t0_r40, "topics"."subtype" AS t0_r41, "topics"."slug" AS t0_r42, "topics"."auto_close_at" AS t0_r43, "topics"."auto_close_user_id" AS t0_r44, "topics"."auto_close_started_at" AS t0_r45, "categories"."id" AS t1_r0, "categories"."name" AS t1_r1, "categories"."color" AS t1_r2, "categories"."topic_id" AS t1_r3, "categories"."topic_count" AS t1_r4, "categories"."created_at" AS t1_r5, "categories"."updated_at" AS t1_r6, "categories"."user_id" AS t1_r7, "categories"."topics_year" AS t1_r8, "categories"."topics_month" AS t1_r9, "categories"."topics_week" AS t1_r10, "categories"."slug" AS t1_r11, "categories"."description" AS t1_r12, "categories"."text_color" AS t1_r13, "categories"."hotness" AS t1_r14, "categories"."secure" AS t1_r15, "categories"."auto_close_days" AS t1_r16, "topic_only_relative_urls_categories"."id" AS t2_r0, "topic_only_relative_urls_categories"."title" AS t2_r1, "topic_only_relative_urls_categories"."last_posted_at" AS t2_r2, "topic_only_relative_urls_categories"."created_at" AS t2_r3, "topic_only_relative_urls_categories"."updated_at" AS t2_r4, "topic_only_relative_urls_categories"."views" AS t2_r5, "topic_only_relative_urls_categories"."posts_count" AS t2_r6, "topic_only_relative_urls_categories"."user_id" AS t2_r7, "topic_only_relative_urls_categories"."last_post_user_id" AS t2_r8, "topic_only_relative_urls_categories"."reply_count" AS t2_r9, "topic_only_relative_urls_categories"."featured_user1_id" AS t2_r10, "topic_only_relative_urls_categories"."featured_user2_id" AS t2_r11, "topic_only_relative_urls_categories"."featured_user3_id" AS t2_r12, "topic_only_relative_urls_categories"."avg_time" AS t2_r13, "topic_only_relative_urls_categories"."deleted_at" AS t2_r14, "topic_only_relative_urls_categories"."highest_post_number" AS t2_r15, "topic_only_relative_urls_categories"."image_url" AS t2_r16, "topic_only_relative_urls_categories"."off_topic_count" AS t2_r17, "topic_only_relative_urls_categories"."like_count" AS t2_r18, "topic_only_relative_urls_categories"."incoming_link_count" AS t2_r19, "topic_only_relative_urls_categories"."bookmark_count" AS t2_r20, "topic_only_relative_urls_categories"."star_count" AS t2_r21, "topic_only_relative_urls_categories"."category_id" AS t2_r22, "topic_only_relative_urls_categories"."visible" AS t2_r23, "topic_only_relative_urls_categories"."moderator_posts_count" AS t2_r24, "topic_only_relative_urls_categories"."closed" AS t2_r25, "topic_only_relative_urls_categories"."archived" AS t2_r26, "topic_only_relative_urls_categories"."bumped_at" AS t2_r27, "topic_only_relative_urls_categories"."has_best_of" AS t2_r28, "topic_only_relative_urls_categories"."meta_data" AS t2_r29, "topic_only_relative_urls_categories"."vote_count" AS t2_r30, "topic_only_relative_urls_categories"."archetype" AS t2_r31, "topic_only_relative_urls_categories"."featured_user4_id" AS t2_r32, "topic_only_relative_urls_categories"."notify_moderators_count" AS t2_r33, "topic_only_relative_urls_categories"."spam_count" AS t2_r34, "topic_only_relative_urls_categories"."illegal_count" AS t2_r35, "topic_only_relative_urls_categories"."inappropriate_count" AS t2_r36, "topic_only_relative_urls_categories"."pinned_at" AS t2_r37, "topic_only_relative_urls_categories"."score" AS t2_r38, "topic_only_relative_urls_categories"."percent_rank" AS t2_r39, "topic_only_relative_urls_categories"."notify_user_count" AS t2_r40, "topic_only_relative_urls_categories"."subtype" AS t2_r41, "topic_only_relative_urls_categories"."slug" AS t2_r42, "topic_only_relative_urls_categories"."auto_close_at" AS t2_r43, "topic_only_relative_urls_categories"."auto_close_user_id" AS t2_r44, "topic_only_relative_urls_categories"."auto_close_started_at" AS t2_r45 FROM "topics" LEFT OUTER JOIN "categories" ON "categories"."id" = "topics"."category_id" LEFT OUTER JOIN "topics" "topic_only_relative_urls_categories" ON "topic_only_relative_urls_categories"."id" = "categories"."topic_id" WHERE "topics"."closed" = 'f' AND "topics"."archived" = 'f' AND "topics"."visible" = 't' AND ("topics"."deleted_at" IS NULL) AND (topics.archetype <> 'private_message') AND (categories.secure IS NULL OR categories.secure = 'f') AND (topics.id NOT IN (2)) ORDER BY CASE WHEN topics.category_id = 1 THEN 0 ELSE 1 END, RANDOM() LIMIT 5
  [1m[36mUser Load (1.5ms)[0m  [1mSELECT id, email, username FROM "users" WHERE "users"."id" IN (1)[0m
  [1m[35mGroup Load (1.6ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name
  [1m[36mGroup Load (1.4ms)[0m  [1mSELECT "groups".* FROM "groups" ORDER BY name[0m
  [1m[35mPost Load (1.6ms)[0m  SELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 3 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 1 ORDER BY name[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "groups".* FROM "groups" ORDER BY name
  [1m[36mPost Load (1.7ms)[0m  [1mSELECT "posts".* FROM "posts" WHERE "posts"."topic_id" = 4 AND ("posts"."deleted_at" IS NULL) ORDER BY post_number ASC LIMIT 1[0m
  [1m[35mGroup Load (1.7ms)[0m  SELECT "groups".* FROM "groups" INNER JOIN "category_groups" ON "groups"."id" = "category_groups"."group_id" WHERE "category_groups"."category_id" = 2 ORDER BY name
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "groups".* FROM "groups" ORDER BY name[0m
Completed 200 OK in 84ms (Views: 0.1ms | ActiveRecord: 46.9ms)
Connecting to database specified by database.yml
  [1m[36mSiteSetting Load (1.6ms)[0m  [1mSELECT name, value, data_type FROM "site_settings" [0m
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mselect name, data_type, value from site_settings[0m
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mselect name, data_type, value from site_settings[0m
Connecting to database specified by database.yml
  [1m[36m (0.5ms)[0m  [1mselect name, data_type, value from site_settings[0m
Connecting to database specified by database.yml
  [1m[36m (4.3ms)[0m  [1mselect name, data_type, value from site_settings[0m
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mselect name, data_type, value from site_settings[0m
Connecting to database specified by database.yml
  [1m[36m (3.6ms)[0m  [1mselect name, data_type, value from site_settings[0m
Connecting to database specified by database.yml
  [1m[36m (0.6ms)[0m  [1mselect name, data_type, value from site_settings[0m
Connecting to database specified by database.yml
  [1m[36m (0.5ms)[0m  [1mselect name, data_type, value from site_settings[0m
Connecting to database specified by database.yml
  [1m[36m (0.8ms)[0m  [1mselect name, data_type, value from site_settings[0m
  [1m[35m (1.7ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Migrating to CreateForumThreads (20120311163914)
Migrating to CreatePosts (20120311164326)
Migrating to CreateUsers (20120311170118)
Migrating to CreateForums (20120311201341)
Migrating to CreateSites (20120311210245)
Migrating to AddReplyToToPosts (20120416201606)
Migrating to AddViewsToForumThreads (20120420183447)
Migrating to AddPostsCountToForumThreads (20120423140906)
Migrating to FixPostIndices (20120423142820)
Migrating to RemoveLastPostId (20120423151548)
Migrating to AddDisplayUsernameToUsers (20120425145456)
Migrating to AddUserIdIndexToPosts (20120427150624)
Migrating to CookedMigration (20120427151452)
Migrating to CreateVestalVersions (20120427154330)
Migrating to AddVersionToPosts (20120427172031)
Migrating to AddCreatedByToForumThreads (20120502183240)
Migrating to AddLastPostUserIdToForumThreads (20120502192121)
Migrating to AddSiteIdToUsers (20120503205521)
Migrating to CreateExpressions (20120507144132)
Migrating to CreateExpressionTypes (20120507144222)
Migrating to AddReplyCountToPosts (20120514144549)
Migrating to AddFlagToExpressionTypes (20120514173920)
Migrating to AddDescriptionToExpressionTypes (20120514204934)
Migrating to AddQuotelessToPost (20120517200130)
Migrating to CreateReadPosts (20120518200115)
Migrating to CreateLastReadPosts (20120519182212)
Migrating to CreateViews (20120523180723)
Migrating to AddRepliesToForumThreads (20120523184307)
Migrating to AddFeaturedToForumThreads (20120523201329)
Migrating to AddAvgTimeToForumThreads (20120525194845)
Migrating to CreateUploads (20120529175956)
Migrating to CreateStars (20120529202707)
Migrating to CreateForumThreadUser (20120530150726)
Migrating to MigratePosted (20120530160745)
Migrating to AddIndexToForumThreads (20120530200724)
Migrating to CreateForumThreadLinks (20120530212912)
Migrating to AddTagsToForumThreads (20120614190726)
Migrating to AddQuoteCountToPosts (20120614202024)
Migrating to CreateBookmarks (20120615180517)
Migrating to AddReplyBelowToPosts (20120618152946)
Migrating to CreatePostTimings (20120618212349)
Migrating to CreateMessageBus (20120618214856)
Migrating to FixPostTimings (20120619150807)
Migrating to DropReadPosts (20120619153349)
Migrating to AddPostNumberToBookmarks (20120619172714)
Migrating to AddSeenPostCountToForumThreadUsers (20120621155351)
Migrating to AddDeletedAtToForumThreads (20120621190310)
Migrating to CreateNotifications (20120622200242)
Migrating to AddSeenNotificationIdToUsers (20120625145714)
Migrating to AddDeletedAtToPosts (20120625162318)
Migrating to AddHighestPostNumberToForumThreads (20120625174544)
Migrating to AddImageUrlToForumThreads (20120625195326)
Migrating to RenameExpressionTypeId (20120629143908)
Migrating to DenormalizeExpressions (20120629150253)
Migrating to MakeExpressionsLessGeneric (20120629151243)
Migrating to CreateIncomingLinks (20120629182637)
Migrating to CreateReplies (20120702211427)
Migrating to AddReflectionToForumThreadLinks (20120703184734)
Migrating to AddIncomingLinkCountToPosts (20120703201312)
Migrating to AddIncomingLinkCountToForumThreads (20120703203623)
Migrating to AddBookmarkCountToPosts (20120703210004)
Migrating to AddAvgTimeToPosts (20120704160659)
Migrating to AddViewCountToPosts (20120704201743)
Migrating to AddUserToVersions (20120705181724)
Migrating to AddLastPostedAtToUsers (20120708210305)
Migrating to CreateCategories (20120712150500)
Migrating to AddCategoryIdToForumThreads (20120712151934)
Migrating to CreateCategoryFeaturedThreads (20120713201324)
Migrating to CreateSiteSettings (20120716020835)
Migrating to AddStatsToCategories (20120716173544)
Migrating to CreateUserOpenIds (20120718044955)
Migrating to AddEmailHashedPasswordNameSaltToUsers (20120719004636)
Migrating to AddUsernameLowerToUsers (20120720013733)
Migrating to AddAuthTokenToUsers (20120720044246)
Migrating to AddForumIdToCategories (20120720162422)
Migrating to AddNotNullsToUserOpenIds (20120723051512)
Migrating to AddLastSeenAtToUsers (20120724234502)
Migrating to AddWebsiteToUsers (20120724234711)
Migrating to AddExcerptToCategories (20120725183347)
Migrating to AddInvisibleToForumThread (20120726201830)
Migrating to AddUserIdToCategories (20120726235129)
Migrating to RemoveExcerptFromCategories (20120727005556)
Migrating to RenameInvisible (20120727150428)
Migrating to AddThreadCountsToCategories (20120727213543)
Migrating to AddIconToExpressionTypes (20120802151210)
Migrating to AddAdminFlagToUsers (20120803191426)
Migrating to AddNewPasswordNewSaltEmailTokenToUsers (20120806030641)
Migrating to RemoveNewPasswordStuffFromUser (20120806062617)
Migrating to CreateActions (20120807223020)
Migrating to RemoveSiteId (20120809020415)
Migrating to RemoveForumId (20120809030647)
Migrating to CorrectIndexingOnPosts (20120809053414)
Migrating to RemoveIndexForNow (20120809154750)
Migrating to CreatePostActions (20120809174649)
Migrating to CreatePostActionTypes (20120809175110)
Migrating to MigrateBookmarksToPostActions (20120809201855)
Migrating to RenameActionsToUserActions (20120810064839)
Migrating to RetireExpressions (20120812235417)
Migrating to RenameExpressionColumnsInForumThread (20120813004347)
Migrating to RenameExpressionColumnsInPosts (20120813042912)
Migrating to CreateForumThreadLinkClicks (20120813201426)
Migrating to AddUniqueIndexToForumThreadLinks (20120815004411)
Migrating to AddPostTypeToPosts (20120815180106)
Migrating to AddModeratorPostsCountToForumThreads (20120815204733)
Migrating to AddUniqueConstraintToUserActions (20120816050526)
Migrating to AddForumThreadStates (20120816205537)
Migrating to AddStarredAtToForumThreadUser (20120816205538)
Migrating to AddSearchIndices (20120820191804)
Migrating to AddBumpedAtToForumThreads (20120821191616)
Migrating to AddSlugToCategories (20120823205956)
Migrating to CreateCategoryFeaturedUsers (20120824171908)
Migrating to CreateOneboxRenders (20120828204209)
Migrating to CreatePostOneboxRenders (20120828204624)
Migrating to AddPreviewToOneboxRenders (20120830182736)
Migrating to RemoveDescriptionFromSiteSettings (20120910171504)
Migrating to RenameViewsToReads (20120918152319)
Migrating to AddSubTagToForumThreads (20120918205931)
Migrating to AddHasBestOfToForumThreads (20120919152846)
Migrating to AddTwitterUserInfo (20120921055428)
Migrating to CreateArchetypes (20120921155050)
Migrating to AddMetaDataToForumThreads (20120921162512)
Migrating to CreateArchetypeOptions (20120921163606)
Migrating to AddHstoreExtension (20120924182000)
Migrating to AddVoteCountToPosts (20120924182031)
Migrating to RemoveEnglishFromPostActionTypes (20120925171620)
Migrating to AddSequenceToPostActionTypes (20120925190802)
Migrating to AddSortOrderToPosts (20120928170023)
Migrating to AddEmailStuffToUsers (20121009161116)
Migrating to CreateEmailLogs (20121011155904)
Migrating to ConvertArchetypes (20121017162924)
Migrating to RenameForumThreadTables (20121018103721)
Migrating to CreateTopicAllowedUsers (20121018133039)
Migrating to FixNotificationData (20121018182709)
Migrating to DropAvatarUrlFromUsers (20121106015500)
Migrating to AddPostActionIdToNotifications (20121108193516)
Migrating to CreateTrustLevels (20121109164630)
Migrating to BioMarkdownSupport (20121113200844)
Migrating to CreateFacebookUserInfos (20121113200845)
Migrating to RenameStickyToPinned (20121115172544)
Migrating to AddMoreEmailSettingsToUser (20121116212424)
Migrating to AddEmailSettingsToUsers (20121119190529)
Migrating to AddEmailDirectToUsers (20121119200843)
Migrating to CreateInvites (20121121202035)
Migrating to CreateTopicInvites (20121121205215)
Migrating to AddMutedAtToTopicUser (20121122033316)
Migrating to MakePostNumberDistinct (20121123054127)
Migrating to CreateUserVisits (20121123063630)
Migrating to CreateEmailTokens (20121129160035)
Migrating to RemoveEmailTokenFromUsers (20121129184948)
Migrating to CreateDrafts (20121130010400)
Migrating to AddLinkPostIdToTopicLinks (20121130191818)
Migrating to AddVisitedAtToTopicUser (20121202225421)
Migrating to RenameSeenNotificaitonId (20121203181719)
Migrating to FixLinkPostId (20121204183855)
Migrating to AddAnotherFeaturedUserToTopics (20121204193747)
Migrating to AddApprovedToUsers (20121205162143)
Migrating to AddNotificationsToTopicUsers (20121207000741)
Migrating to CreateSiteCustomizations (20121211233131)
Migrating to AddOverrideDefaultStyleToSiteCustomization (20121216230719)
Migrating to AddTopicsEnteredToUsers (20121218205642)
Migrating to AddLastEditorIdToPosts (20121224072204)
Migrating to CreateDraftSequence (20121224095139)
Migrating to AddSequenceToDrafts (20121224100650)
Migrating to AddDeletedAtToInvites (20121228192219)
Migrating to AddDigestAfterDaysToUsers (20130107165207)
Migrating to AddPreviousVisitAtToUsers (20130108195847)
Migrating to MergeMuteOptionsOnTopicUsers (20130115012140)
Migrating to CorrectDefaultOnNotificationLevel (20130115021937)
Migrating to OopsUnwatchABoatOfWatchedStuff (20130115043603)
Migrating to RemoveSubTagFromTopics (20130116151829)
Migrating to FixSearch (20130120222728)
Migrating to AddTrackingToTopicUsers (20130121231352)
Migrating to AddAutoTrackTopicsToUser (20130122051134)
Migrating to AddAutoTrackAfterSecondsAndBanningAndDobToUser (20130122232825)
Migrating to AutoTrackAllTopicsRepliedTo (20130123070909)
Migrating to AddHiddenToPosts (20130125002652)
Migrating to AddFieldsToPostAction (20130125030305)
Migrating to CorrectIndexOnPostAction (20130125031122)
Migrating to RemoveTrustLevels (20130127213646)
Migrating to TrustLevelDefaultNull (20130128182013)
Migrating to RemovePmReflections (20130129010625)
Migrating to AddTimeReadToUsers (20130129163244)
Migrating to AddDaysVisitedToUsers (20130129174845)
Migrating to RemoveIndexFromViews (20130130154611)
Migrating to AddCustomFlagCountToTopics (20130131055710)
Migrating to AddColumnSummariesToPostsAndTopics (20130201000828)
Migrating to AddPositionToPostActionType (20130201023409)
Migrating to AddLastVersionAtToPosts (20130203204338)
Migrating to AddIpAddressToUsers (20130204000159)
Migrating to AlterFacebookUserId (20130205021905)
Migrating to AddUserDeletedToPosts (20130207200019)
Migrating to RemoveReplyBelowPostNumberFromPosts (20130208220635)
Migrating to RemoveTopicResponseActions (20130213021450)
Migrating to AddNewTopicDurationMinutesToUsers (20130213203300)
Migrating to AddDescriptionToCategories (20130221215017)
Migrating to AddGithubUserInfo (20130226015336)
Migrating to AddClearedPinnedToTopicUsers (20130306180148)
Migrating to RemoveExtraSpamRecord (20130311181327)
Migrating to AddExternalLinksInNewTabAnDisableQuotingToUser (20130313004922)
Migrating to AddForegroundColorToCategories (20130314093434)
Migrating to EnableTrigramSupport (20130315180637)
Migrating to AddReplyToUserIdToPost (20130319122248)
Migrating to AddUserIndexesToPostsAndTopics (20130320012100)
Migrating to AddModeratorToUser (20130320024345)
Migrating to RemoveOneboxesFromDb (20130321154905)
Migrating to AddPercentRankToPosts (20130322183614)
Migrating to AddHotnessToCategory (20130326210101)
Migrating to UpdateSiteSettingsForHot (20130327185852)
Migrating to CreateHotTopics (20130328162943)
Migrating to AddScoreToTopics (20130328182433)
Migrating to AddValuesToHotTopics (20130402210723)
Migrating to CreateSiteContents (20130404143437)
Migrating to AddUserExtras (20130404232558)
Migrating to CreateAdminLogs (20130411205132)
Migrating to CorrectCountsOnPosts (20130412015502)
Migrating to CorrectCountsOnTopics (20130412020156)
Migrating to CreateGroups (20130416004607)
Migrating to GroupUsers (20130416004933)
Migrating to AddSubtypeToTopics (20130416170855)
Migrating to IncreaseDataLengthOnNotifications (20130419195746)
Migrating to AddRelatedPostIdToPostActions (20130422050626)
Migrating to AddSlugToTopics (20130424015746)
Migrating to AddUserIdToIncomingLinks (20130424055025)
Migrating to AllowNullsInIncomingLinks (20130426044914)
Migrating to AddIncomingIpCurrentUserIdToIncomingLinks (20130426052257)
Migrating to AddUnstarredAtToTopicUsers (20130428194335)
Migrating to AddSecurityToCategories (20130429000101)
Migrating to AddTopicAllowedGroups (20130430052751)
Migrating to FixTopicAllowedGroups (20130501105651)
Migrating to AddAutomaticToGroups (20130506020935)
Migrating to AddAutoCloseAtToTopics (20130506185042)
Migrating to AddUserCountToGroups (20130508040235)
Migrating to UpdateSequenceForGroups (20130509040248)
Migrating to AddUniqueNameToGroups (20130509041351)
Migrating to AddAutoCloseDaysToCategories (20130515193551)
Migrating to CreateCasUserInfos (20130521210140)
Migrating to RenameSearchTables (20130522193615)
Migrating to AddLikeScoreToPosts (20130527152648)
Migrating to AddRankToCategoryFeaturedTopics (20130528174147)
Migrating to AddStaffTookActionToPostActions (20130531210816)
Migrating to AddBlockedToUsers (20130603192412)
Migrating to AddAutoCloseStartedAtToTopics (20130606190601)
Migrating to AddReplyKeyToEmailLogs (20130610201033)
Migrating to CreatePostUploadJoinTable (20130612200846)
Migrating to DropPostsUploads (20130613211700)
Migrating to CreatePostUploads (20130613212230)
Migrating to AddDynamicFaviconPreferenceToUser (20130615064344)
Migrating to RemoveTopicIdFromUploads (20130615073305)
Migrating to AddShaToUploads (20130615075557)
Migrating to CreateOptimizedImages (20130616082327)
Migrating to RenameShaAndExtColumns (20130617014127)
Migrating to RenameShaColumn (20130617180009)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (5.3ms)[0m  DROP INDEX "index_uploads_on_sha"
  [1m[36m (1.3ms)[0m  [1mALTER TABLE "uploads" RENAME COLUMN "sha" TO "sha1"[0m
  [1m[35m (18.4ms)[0m  ALTER TABLE "uploads" ALTER COLUMN "sha1" TYPE character varying(40)
  [1m[36m (0.9ms)[0m  [1mCREATE UNIQUE INDEX "index_uploads_on_sha1" ON "uploads" ("sha1")[0m
  [1m[35m (1.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130617180009')
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
Migrating to AddPostIdToEmailLogs (20130617181804)
Migrating to AddDeferToPostActions (20130619063902)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "post_actions" ADD COLUMN "defer" boolean[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "post_actions" ADD COLUMN "defer_by" int
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130619063902')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to ChangeSupressToSuppress (20130621042855)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "site_settings" SET "name" = 'supress_reply_directly_below' WHERE "site_settings"."name" = 'suppress_reply_directly_below'
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130621042855')[0m
  [1m[35m (0.2ms)[0m  COMMIT
Migrating to AddUrlIndexToUploads (20130622110348)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (0.6ms)[0m  CREATE INDEX "index_uploads_on_url" ON "uploads" ("url")
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130622110348')[0m
  [1m[35m (0.2ms)[0m  COMMIT
Migrating to ChangeIpToInetInTopicLinkClicks (20130624203206)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.6ms)[0m  ALTER TABLE "topic_link_clicks" ADD COLUMN "ip_address" inet
  [1m[36m (4.6ms)[0m  [1mUPDATE topic_link_clicks SET ip_address = inet(
 (ip >> 24 & 255) || '.' ||
 (ip >> 16 & 255) || '.' ||
 (ip >> 8 & 255) || '.' ||
 (ip >> 0 & 255)
 );[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "topic_link_clicks" ALTER COLUMN "ip_address" TYPE inet
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "topic_link_clicks" ALTER "ip_address" SET NOT NULL[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "topic_link_clicks" DROP "ip"
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130624203206')[0m
  [1m[35m (0.4ms)[0m  COMMIT
Migrating to ChangeIpToInetInViews (20130625022454)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.8ms)[0m  ALTER TABLE "views" ADD COLUMN "ip_address" inet
  [1m[36m (1.3ms)[0m  [1mUPDATE views SET ip_address = inet(
 (ip >> 24 & 255) || '.' ||
 (ip >> 16 & 255) || '.' ||
 (ip >> 8 & 255) || '.' ||
 (ip >> 0 & 255)
 );[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "views" ALTER COLUMN "ip_address" TYPE inet
  [1m[36m (0.1ms)[0m  [1mALTER TABLE "views" ALTER "ip_address" SET NOT NULL[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "views" DROP "ip"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130625022454')[0m
  [1m[35m (0.4ms)[0m  COMMIT
Migrating to RemoveAccessPassword (20130625170842)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (351.8ms)[0m  SELECT count(*) FROM site_settings where name='access_password' and char_length(value) > 0
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130625170842')[0m
  [1m[35m (0.3ms)[0m  COMMIT
Migrating to AddTitleToUsers (20130625201113)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (2.1ms)[0m  ALTER TABLE "users" ADD COLUMN "title" character varying(255)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130625201113')[0m
  [1m[35m (0.3ms)[0m  COMMIT
  [1m[36m (2.0ms)[0m  [1mSELECT version FROM schema_migrations ORDER BY version[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mPostActionType Load (1.1ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 1 LIMIT 1[0m
  [1m[35m (1.1ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.3ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 4 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 5 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.4ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 8 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 6 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 7 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Connecting to database specified by database.yml
  [1m[36m (0.6ms)[0m  [1mselect name, data_type, value from site_settings[0m
Connecting to database specified by database.yml
  [1m[36m (0.5ms)[0m  [1mselect name, data_type, value from site_settings[0m
Updating mtimes for current assets...
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mselect name, data_type, value from site_settings[0m
  [1m[35m (0.4ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Migrating to CreateForumThreads (20120311163914)
Migrating to CreatePosts (20120311164326)
Migrating to CreateUsers (20120311170118)
Migrating to CreateForums (20120311201341)
Migrating to CreateSites (20120311210245)
Migrating to AddReplyToToPosts (20120416201606)
Migrating to AddViewsToForumThreads (20120420183447)
Migrating to AddPostsCountToForumThreads (20120423140906)
Migrating to FixPostIndices (20120423142820)
Migrating to RemoveLastPostId (20120423151548)
Migrating to AddDisplayUsernameToUsers (20120425145456)
Migrating to AddUserIdIndexToPosts (20120427150624)
Migrating to CookedMigration (20120427151452)
Migrating to CreateVestalVersions (20120427154330)
Migrating to AddVersionToPosts (20120427172031)
Migrating to AddCreatedByToForumThreads (20120502183240)
Migrating to AddLastPostUserIdToForumThreads (20120502192121)
Migrating to AddSiteIdToUsers (20120503205521)
Migrating to CreateExpressions (20120507144132)
Migrating to CreateExpressionTypes (20120507144222)
Migrating to AddReplyCountToPosts (20120514144549)
Migrating to AddFlagToExpressionTypes (20120514173920)
Migrating to AddDescriptionToExpressionTypes (20120514204934)
Migrating to AddQuotelessToPost (20120517200130)
Migrating to CreateReadPosts (20120518200115)
Migrating to CreateLastReadPosts (20120519182212)
Migrating to CreateViews (20120523180723)
Migrating to AddRepliesToForumThreads (20120523184307)
Migrating to AddFeaturedToForumThreads (20120523201329)
Migrating to AddAvgTimeToForumThreads (20120525194845)
Migrating to CreateUploads (20120529175956)
Migrating to CreateStars (20120529202707)
Migrating to CreateForumThreadUser (20120530150726)
Migrating to MigratePosted (20120530160745)
Migrating to AddIndexToForumThreads (20120530200724)
Migrating to CreateForumThreadLinks (20120530212912)
Migrating to AddTagsToForumThreads (20120614190726)
Migrating to AddQuoteCountToPosts (20120614202024)
Migrating to CreateBookmarks (20120615180517)
Migrating to AddReplyBelowToPosts (20120618152946)
Migrating to CreatePostTimings (20120618212349)
Migrating to CreateMessageBus (20120618214856)
Migrating to FixPostTimings (20120619150807)
Migrating to DropReadPosts (20120619153349)
Migrating to AddPostNumberToBookmarks (20120619172714)
Migrating to AddSeenPostCountToForumThreadUsers (20120621155351)
Migrating to AddDeletedAtToForumThreads (20120621190310)
Migrating to CreateNotifications (20120622200242)
Migrating to AddSeenNotificationIdToUsers (20120625145714)
Migrating to AddDeletedAtToPosts (20120625162318)
Migrating to AddHighestPostNumberToForumThreads (20120625174544)
Migrating to AddImageUrlToForumThreads (20120625195326)
Migrating to RenameExpressionTypeId (20120629143908)
Migrating to DenormalizeExpressions (20120629150253)
Migrating to MakeExpressionsLessGeneric (20120629151243)
Migrating to CreateIncomingLinks (20120629182637)
Migrating to CreateReplies (20120702211427)
Migrating to AddReflectionToForumThreadLinks (20120703184734)
Migrating to AddIncomingLinkCountToPosts (20120703201312)
Migrating to AddIncomingLinkCountToForumThreads (20120703203623)
Migrating to AddBookmarkCountToPosts (20120703210004)
Migrating to AddAvgTimeToPosts (20120704160659)
Migrating to AddViewCountToPosts (20120704201743)
Migrating to AddUserToVersions (20120705181724)
Migrating to AddLastPostedAtToUsers (20120708210305)
Migrating to CreateCategories (20120712150500)
Migrating to AddCategoryIdToForumThreads (20120712151934)
Migrating to CreateCategoryFeaturedThreads (20120713201324)
Migrating to CreateSiteSettings (20120716020835)
Migrating to AddStatsToCategories (20120716173544)
Migrating to CreateUserOpenIds (20120718044955)
Migrating to AddEmailHashedPasswordNameSaltToUsers (20120719004636)
Migrating to AddUsernameLowerToUsers (20120720013733)
Migrating to AddAuthTokenToUsers (20120720044246)
Migrating to AddForumIdToCategories (20120720162422)
Migrating to AddNotNullsToUserOpenIds (20120723051512)
Migrating to AddLastSeenAtToUsers (20120724234502)
Migrating to AddWebsiteToUsers (20120724234711)
Migrating to AddExcerptToCategories (20120725183347)
Migrating to AddInvisibleToForumThread (20120726201830)
Migrating to AddUserIdToCategories (20120726235129)
Migrating to RemoveExcerptFromCategories (20120727005556)
Migrating to RenameInvisible (20120727150428)
Migrating to AddThreadCountsToCategories (20120727213543)
Migrating to AddIconToExpressionTypes (20120802151210)
Migrating to AddAdminFlagToUsers (20120803191426)
Migrating to AddNewPasswordNewSaltEmailTokenToUsers (20120806030641)
Migrating to RemoveNewPasswordStuffFromUser (20120806062617)
Migrating to CreateActions (20120807223020)
Migrating to RemoveSiteId (20120809020415)
Migrating to RemoveForumId (20120809030647)
Migrating to CorrectIndexingOnPosts (20120809053414)
Migrating to RemoveIndexForNow (20120809154750)
Migrating to CreatePostActions (20120809174649)
Migrating to CreatePostActionTypes (20120809175110)
Migrating to MigrateBookmarksToPostActions (20120809201855)
Migrating to RenameActionsToUserActions (20120810064839)
Migrating to RetireExpressions (20120812235417)
Migrating to RenameExpressionColumnsInForumThread (20120813004347)
Migrating to RenameExpressionColumnsInPosts (20120813042912)
Migrating to CreateForumThreadLinkClicks (20120813201426)
Migrating to AddUniqueIndexToForumThreadLinks (20120815004411)
Migrating to AddPostTypeToPosts (20120815180106)
Migrating to AddModeratorPostsCountToForumThreads (20120815204733)
Migrating to AddUniqueConstraintToUserActions (20120816050526)
Migrating to AddForumThreadStates (20120816205537)
Migrating to AddStarredAtToForumThreadUser (20120816205538)
Migrating to AddSearchIndices (20120820191804)
Migrating to AddBumpedAtToForumThreads (20120821191616)
Migrating to AddSlugToCategories (20120823205956)
Migrating to CreateCategoryFeaturedUsers (20120824171908)
Migrating to CreateOneboxRenders (20120828204209)
Migrating to CreatePostOneboxRenders (20120828204624)
Migrating to AddPreviewToOneboxRenders (20120830182736)
Migrating to RemoveDescriptionFromSiteSettings (20120910171504)
Migrating to RenameViewsToReads (20120918152319)
Migrating to AddSubTagToForumThreads (20120918205931)
Migrating to AddHasBestOfToForumThreads (20120919152846)
Migrating to AddTwitterUserInfo (20120921055428)
Migrating to CreateArchetypes (20120921155050)
Migrating to AddMetaDataToForumThreads (20120921162512)
Migrating to CreateArchetypeOptions (20120921163606)
Migrating to AddHstoreExtension (20120924182000)
Migrating to AddVoteCountToPosts (20120924182031)
Migrating to RemoveEnglishFromPostActionTypes (20120925171620)
Migrating to AddSequenceToPostActionTypes (20120925190802)
Migrating to AddSortOrderToPosts (20120928170023)
Migrating to AddEmailStuffToUsers (20121009161116)
Migrating to CreateEmailLogs (20121011155904)
Migrating to ConvertArchetypes (20121017162924)
Migrating to RenameForumThreadTables (20121018103721)
Migrating to CreateTopicAllowedUsers (20121018133039)
Migrating to FixNotificationData (20121018182709)
Migrating to DropAvatarUrlFromUsers (20121106015500)
Migrating to AddPostActionIdToNotifications (20121108193516)
Migrating to CreateTrustLevels (20121109164630)
Migrating to BioMarkdownSupport (20121113200844)
Migrating to CreateFacebookUserInfos (20121113200845)
Migrating to RenameStickyToPinned (20121115172544)
Migrating to AddMoreEmailSettingsToUser (20121116212424)
Migrating to AddEmailSettingsToUsers (20121119190529)
Migrating to AddEmailDirectToUsers (20121119200843)
Migrating to CreateInvites (20121121202035)
Migrating to CreateTopicInvites (20121121205215)
Migrating to AddMutedAtToTopicUser (20121122033316)
Migrating to MakePostNumberDistinct (20121123054127)
Migrating to CreateUserVisits (20121123063630)
Migrating to CreateEmailTokens (20121129160035)
Migrating to RemoveEmailTokenFromUsers (20121129184948)
Migrating to CreateDrafts (20121130010400)
Migrating to AddLinkPostIdToTopicLinks (20121130191818)
Migrating to AddVisitedAtToTopicUser (20121202225421)
Migrating to RenameSeenNotificaitonId (20121203181719)
Migrating to FixLinkPostId (20121204183855)
Migrating to AddAnotherFeaturedUserToTopics (20121204193747)
Migrating to AddApprovedToUsers (20121205162143)
Migrating to AddNotificationsToTopicUsers (20121207000741)
Migrating to CreateSiteCustomizations (20121211233131)
Migrating to AddOverrideDefaultStyleToSiteCustomization (20121216230719)
Migrating to AddTopicsEnteredToUsers (20121218205642)
Migrating to AddLastEditorIdToPosts (20121224072204)
Migrating to CreateDraftSequence (20121224095139)
Migrating to AddSequenceToDrafts (20121224100650)
Migrating to AddDeletedAtToInvites (20121228192219)
Migrating to AddDigestAfterDaysToUsers (20130107165207)
Migrating to AddPreviousVisitAtToUsers (20130108195847)
Migrating to MergeMuteOptionsOnTopicUsers (20130115012140)
Migrating to CorrectDefaultOnNotificationLevel (20130115021937)
Migrating to OopsUnwatchABoatOfWatchedStuff (20130115043603)
Migrating to RemoveSubTagFromTopics (20130116151829)
Migrating to FixSearch (20130120222728)
Migrating to AddTrackingToTopicUsers (20130121231352)
Migrating to AddAutoTrackTopicsToUser (20130122051134)
Migrating to AddAutoTrackAfterSecondsAndBanningAndDobToUser (20130122232825)
Migrating to AutoTrackAllTopicsRepliedTo (20130123070909)
Migrating to AddHiddenToPosts (20130125002652)
Migrating to AddFieldsToPostAction (20130125030305)
Migrating to CorrectIndexOnPostAction (20130125031122)
Migrating to RemoveTrustLevels (20130127213646)
Migrating to TrustLevelDefaultNull (20130128182013)
Migrating to RemovePmReflections (20130129010625)
Migrating to AddTimeReadToUsers (20130129163244)
Migrating to AddDaysVisitedToUsers (20130129174845)
Migrating to RemoveIndexFromViews (20130130154611)
Migrating to AddCustomFlagCountToTopics (20130131055710)
Migrating to AddColumnSummariesToPostsAndTopics (20130201000828)
Migrating to AddPositionToPostActionType (20130201023409)
Migrating to AddLastVersionAtToPosts (20130203204338)
Migrating to AddIpAddressToUsers (20130204000159)
Migrating to AlterFacebookUserId (20130205021905)
Migrating to AddUserDeletedToPosts (20130207200019)
Migrating to RemoveReplyBelowPostNumberFromPosts (20130208220635)
Migrating to RemoveTopicResponseActions (20130213021450)
Migrating to AddNewTopicDurationMinutesToUsers (20130213203300)
Migrating to AddDescriptionToCategories (20130221215017)
Migrating to AddGithubUserInfo (20130226015336)
Migrating to AddClearedPinnedToTopicUsers (20130306180148)
Migrating to RemoveExtraSpamRecord (20130311181327)
Migrating to AddExternalLinksInNewTabAnDisableQuotingToUser (20130313004922)
Migrating to AddForegroundColorToCategories (20130314093434)
Migrating to EnableTrigramSupport (20130315180637)
Migrating to AddReplyToUserIdToPost (20130319122248)
Migrating to AddUserIndexesToPostsAndTopics (20130320012100)
Migrating to AddModeratorToUser (20130320024345)
Migrating to RemoveOneboxesFromDb (20130321154905)
Migrating to AddPercentRankToPosts (20130322183614)
Migrating to AddHotnessToCategory (20130326210101)
Migrating to UpdateSiteSettingsForHot (20130327185852)
Migrating to CreateHotTopics (20130328162943)
Migrating to AddScoreToTopics (20130328182433)
Migrating to AddValuesToHotTopics (20130402210723)
Migrating to CreateSiteContents (20130404143437)
Migrating to AddUserExtras (20130404232558)
Migrating to CreateAdminLogs (20130411205132)
Migrating to CorrectCountsOnPosts (20130412015502)
Migrating to CorrectCountsOnTopics (20130412020156)
Migrating to CreateGroups (20130416004607)
Migrating to GroupUsers (20130416004933)
Migrating to AddSubtypeToTopics (20130416170855)
Migrating to IncreaseDataLengthOnNotifications (20130419195746)
Migrating to AddRelatedPostIdToPostActions (20130422050626)
Migrating to AddSlugToTopics (20130424015746)
Migrating to AddUserIdToIncomingLinks (20130424055025)
Migrating to AllowNullsInIncomingLinks (20130426044914)
Migrating to AddIncomingIpCurrentUserIdToIncomingLinks (20130426052257)
Migrating to AddUnstarredAtToTopicUsers (20130428194335)
Migrating to AddSecurityToCategories (20130429000101)
Migrating to AddTopicAllowedGroups (20130430052751)
Migrating to FixTopicAllowedGroups (20130501105651)
Migrating to AddAutomaticToGroups (20130506020935)
Migrating to AddAutoCloseAtToTopics (20130506185042)
Migrating to AddUserCountToGroups (20130508040235)
Migrating to UpdateSequenceForGroups (20130509040248)
Migrating to AddUniqueNameToGroups (20130509041351)
Migrating to AddAutoCloseDaysToCategories (20130515193551)
Migrating to CreateCasUserInfos (20130521210140)
Migrating to RenameSearchTables (20130522193615)
Migrating to AddLikeScoreToPosts (20130527152648)
Migrating to AddRankToCategoryFeaturedTopics (20130528174147)
Migrating to AddStaffTookActionToPostActions (20130531210816)
Migrating to AddBlockedToUsers (20130603192412)
Migrating to AddAutoCloseStartedAtToTopics (20130606190601)
Migrating to AddReplyKeyToEmailLogs (20130610201033)
Migrating to CreatePostUploadJoinTable (20130612200846)
Migrating to DropPostsUploads (20130613211700)
Migrating to CreatePostUploads (20130613212230)
Migrating to AddDynamicFaviconPreferenceToUser (20130615064344)
Migrating to RemoveTopicIdFromUploads (20130615073305)
Migrating to AddShaToUploads (20130615075557)
Migrating to CreateOptimizedImages (20130616082327)
Migrating to RenameShaAndExtColumns (20130617014127)
Migrating to RenameShaColumn (20130617180009)
Migrating to AddPostIdToEmailLogs (20130617181804)
Migrating to AddDeferToPostActions (20130619063902)
Migrating to ChangeSupressToSuppress (20130621042855)
Migrating to AddUrlIndexToUploads (20130622110348)
Migrating to ChangeIpToInetInTopicLinkClicks (20130624203206)
Migrating to ChangeIpToInetInViews (20130625022454)
Migrating to RemoveAccessPassword (20130625170842)
Migrating to AddTitleToUsers (20130625201113)
  [1m[36m (1.7ms)[0m  [1mSELECT version FROM schema_migrations ORDER BY version[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mPostActionType Load (0.8ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 4 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.3ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 5 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 8 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 6 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.5ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 7 LIMIT 1[0m
  [1m[35m (0.3ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36m (0.3ms)[0m  [1mCOMMIT[0m
Connecting to database specified by database.yml
  [1m[36m (4.5ms)[0m  [1mselect name, data_type, value from site_settings[0m
  [1m[35m (7.4ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
Migrating to CreateForumThreads (20120311163914)
Migrating to CreatePosts (20120311164326)
Migrating to CreateUsers (20120311170118)
Migrating to CreateForums (20120311201341)
Migrating to CreateSites (20120311210245)
Migrating to AddReplyToToPosts (20120416201606)
Migrating to AddViewsToForumThreads (20120420183447)
Migrating to AddPostsCountToForumThreads (20120423140906)
Migrating to FixPostIndices (20120423142820)
Migrating to RemoveLastPostId (20120423151548)
Migrating to AddDisplayUsernameToUsers (20120425145456)
Migrating to AddUserIdIndexToPosts (20120427150624)
Migrating to CookedMigration (20120427151452)
Migrating to CreateVestalVersions (20120427154330)
Migrating to AddVersionToPosts (20120427172031)
Migrating to AddCreatedByToForumThreads (20120502183240)
Migrating to AddLastPostUserIdToForumThreads (20120502192121)
Migrating to AddSiteIdToUsers (20120503205521)
Migrating to CreateExpressions (20120507144132)
Migrating to CreateExpressionTypes (20120507144222)
Migrating to AddReplyCountToPosts (20120514144549)
Migrating to AddFlagToExpressionTypes (20120514173920)
Migrating to AddDescriptionToExpressionTypes (20120514204934)
Migrating to AddQuotelessToPost (20120517200130)
Migrating to CreateReadPosts (20120518200115)
Migrating to CreateLastReadPosts (20120519182212)
Migrating to CreateViews (20120523180723)
Migrating to AddRepliesToForumThreads (20120523184307)
Migrating to AddFeaturedToForumThreads (20120523201329)
Migrating to AddAvgTimeToForumThreads (20120525194845)
Migrating to CreateUploads (20120529175956)
Migrating to CreateStars (20120529202707)
Migrating to CreateForumThreadUser (20120530150726)
Migrating to MigratePosted (20120530160745)
Migrating to AddIndexToForumThreads (20120530200724)
Migrating to CreateForumThreadLinks (20120530212912)
Migrating to AddTagsToForumThreads (20120614190726)
Migrating to AddQuoteCountToPosts (20120614202024)
Migrating to CreateBookmarks (20120615180517)
Migrating to AddReplyBelowToPosts (20120618152946)
Migrating to CreatePostTimings (20120618212349)
Migrating to CreateMessageBus (20120618214856)
Migrating to FixPostTimings (20120619150807)
Migrating to DropReadPosts (20120619153349)
Migrating to AddPostNumberToBookmarks (20120619172714)
Migrating to AddSeenPostCountToForumThreadUsers (20120621155351)
Migrating to AddDeletedAtToForumThreads (20120621190310)
Migrating to CreateNotifications (20120622200242)
Migrating to AddSeenNotificationIdToUsers (20120625145714)
Migrating to AddDeletedAtToPosts (20120625162318)
Migrating to AddHighestPostNumberToForumThreads (20120625174544)
Migrating to AddImageUrlToForumThreads (20120625195326)
Migrating to RenameExpressionTypeId (20120629143908)
Migrating to DenormalizeExpressions (20120629150253)
Migrating to MakeExpressionsLessGeneric (20120629151243)
Migrating to CreateIncomingLinks (20120629182637)
Migrating to CreateReplies (20120702211427)
Migrating to AddReflectionToForumThreadLinks (20120703184734)
Migrating to AddIncomingLinkCountToPosts (20120703201312)
Migrating to AddIncomingLinkCountToForumThreads (20120703203623)
Migrating to AddBookmarkCountToPosts (20120703210004)
Migrating to AddAvgTimeToPosts (20120704160659)
Migrating to AddViewCountToPosts (20120704201743)
Migrating to AddUserToVersions (20120705181724)
Migrating to AddLastPostedAtToUsers (20120708210305)
Migrating to CreateCategories (20120712150500)
Migrating to AddCategoryIdToForumThreads (20120712151934)
Migrating to CreateCategoryFeaturedThreads (20120713201324)
Migrating to CreateSiteSettings (20120716020835)
Migrating to AddStatsToCategories (20120716173544)
Migrating to CreateUserOpenIds (20120718044955)
Migrating to AddEmailHashedPasswordNameSaltToUsers (20120719004636)
Migrating to AddUsernameLowerToUsers (20120720013733)
Migrating to AddAuthTokenToUsers (20120720044246)
Migrating to AddForumIdToCategories (20120720162422)
Migrating to AddNotNullsToUserOpenIds (20120723051512)
Migrating to AddLastSeenAtToUsers (20120724234502)
Migrating to AddWebsiteToUsers (20120724234711)
Migrating to AddExcerptToCategories (20120725183347)
Migrating to AddInvisibleToForumThread (20120726201830)
Migrating to AddUserIdToCategories (20120726235129)
Migrating to RemoveExcerptFromCategories (20120727005556)
Migrating to RenameInvisible (20120727150428)
Migrating to AddThreadCountsToCategories (20120727213543)
Migrating to AddIconToExpressionTypes (20120802151210)
Migrating to AddAdminFlagToUsers (20120803191426)
Migrating to AddNewPasswordNewSaltEmailTokenToUsers (20120806030641)
Migrating to RemoveNewPasswordStuffFromUser (20120806062617)
Migrating to CreateActions (20120807223020)
Migrating to RemoveSiteId (20120809020415)
Migrating to RemoveForumId (20120809030647)
Migrating to CorrectIndexingOnPosts (20120809053414)
Migrating to RemoveIndexForNow (20120809154750)
Migrating to CreatePostActions (20120809174649)
Migrating to CreatePostActionTypes (20120809175110)
Migrating to MigrateBookmarksToPostActions (20120809201855)
Migrating to RenameActionsToUserActions (20120810064839)
Migrating to RetireExpressions (20120812235417)
Migrating to RenameExpressionColumnsInForumThread (20120813004347)
Migrating to RenameExpressionColumnsInPosts (20120813042912)
Migrating to CreateForumThreadLinkClicks (20120813201426)
Migrating to AddUniqueIndexToForumThreadLinks (20120815004411)
Migrating to AddPostTypeToPosts (20120815180106)
Migrating to AddModeratorPostsCountToForumThreads (20120815204733)
Migrating to AddUniqueConstraintToUserActions (20120816050526)
Migrating to AddForumThreadStates (20120816205537)
Migrating to AddStarredAtToForumThreadUser (20120816205538)
Migrating to AddSearchIndices (20120820191804)
Migrating to AddBumpedAtToForumThreads (20120821191616)
Migrating to AddSlugToCategories (20120823205956)
Migrating to CreateCategoryFeaturedUsers (20120824171908)
Migrating to CreateOneboxRenders (20120828204209)
Migrating to CreatePostOneboxRenders (20120828204624)
Migrating to AddPreviewToOneboxRenders (20120830182736)
Migrating to RemoveDescriptionFromSiteSettings (20120910171504)
Migrating to RenameViewsToReads (20120918152319)
Migrating to AddSubTagToForumThreads (20120918205931)
Migrating to AddHasBestOfToForumThreads (20120919152846)
Migrating to AddTwitterUserInfo (20120921055428)
Migrating to CreateArchetypes (20120921155050)
Migrating to AddMetaDataToForumThreads (20120921162512)
Migrating to CreateArchetypeOptions (20120921163606)
Migrating to AddHstoreExtension (20120924182000)
Migrating to AddVoteCountToPosts (20120924182031)
Migrating to RemoveEnglishFromPostActionTypes (20120925171620)
Migrating to AddSequenceToPostActionTypes (20120925190802)
Migrating to AddSortOrderToPosts (20120928170023)
Migrating to AddEmailStuffToUsers (20121009161116)
Migrating to CreateEmailLogs (20121011155904)
Migrating to ConvertArchetypes (20121017162924)
Migrating to RenameForumThreadTables (20121018103721)
Migrating to CreateTopicAllowedUsers (20121018133039)
Migrating to FixNotificationData (20121018182709)
Migrating to DropAvatarUrlFromUsers (20121106015500)
Migrating to AddPostActionIdToNotifications (20121108193516)
Migrating to CreateTrustLevels (20121109164630)
Migrating to BioMarkdownSupport (20121113200844)
Migrating to CreateFacebookUserInfos (20121113200845)
Migrating to RenameStickyToPinned (20121115172544)
Migrating to AddMoreEmailSettingsToUser (20121116212424)
Migrating to AddEmailSettingsToUsers (20121119190529)
Migrating to AddEmailDirectToUsers (20121119200843)
Migrating to CreateInvites (20121121202035)
Migrating to CreateTopicInvites (20121121205215)
Migrating to AddMutedAtToTopicUser (20121122033316)
Migrating to MakePostNumberDistinct (20121123054127)
Migrating to CreateUserVisits (20121123063630)
Migrating to CreateEmailTokens (20121129160035)
Migrating to RemoveEmailTokenFromUsers (20121129184948)
Migrating to CreateDrafts (20121130010400)
Migrating to AddLinkPostIdToTopicLinks (20121130191818)
Migrating to AddVisitedAtToTopicUser (20121202225421)
Migrating to RenameSeenNotificaitonId (20121203181719)
Migrating to FixLinkPostId (20121204183855)
Migrating to AddAnotherFeaturedUserToTopics (20121204193747)
Migrating to AddApprovedToUsers (20121205162143)
Migrating to AddNotificationsToTopicUsers (20121207000741)
Migrating to CreateSiteCustomizations (20121211233131)
Migrating to AddOverrideDefaultStyleToSiteCustomization (20121216230719)
Migrating to AddTopicsEnteredToUsers (20121218205642)
Migrating to AddLastEditorIdToPosts (20121224072204)
Migrating to CreateDraftSequence (20121224095139)
Migrating to AddSequenceToDrafts (20121224100650)
Migrating to AddDeletedAtToInvites (20121228192219)
Migrating to AddDigestAfterDaysToUsers (20130107165207)
Migrating to AddPreviousVisitAtToUsers (20130108195847)
Migrating to MergeMuteOptionsOnTopicUsers (20130115012140)
Migrating to CorrectDefaultOnNotificationLevel (20130115021937)
Migrating to OopsUnwatchABoatOfWatchedStuff (20130115043603)
Migrating to RemoveSubTagFromTopics (20130116151829)
Migrating to FixSearch (20130120222728)
Migrating to AddTrackingToTopicUsers (20130121231352)
Migrating to AddAutoTrackTopicsToUser (20130122051134)
Migrating to AddAutoTrackAfterSecondsAndBanningAndDobToUser (20130122232825)
Migrating to AutoTrackAllTopicsRepliedTo (20130123070909)
Migrating to AddHiddenToPosts (20130125002652)
Migrating to AddFieldsToPostAction (20130125030305)
Migrating to CorrectIndexOnPostAction (20130125031122)
Migrating to RemoveTrustLevels (20130127213646)
Migrating to TrustLevelDefaultNull (20130128182013)
Migrating to RemovePmReflections (20130129010625)
Migrating to AddTimeReadToUsers (20130129163244)
Migrating to AddDaysVisitedToUsers (20130129174845)
Migrating to RemoveIndexFromViews (20130130154611)
Migrating to AddCustomFlagCountToTopics (20130131055710)
Migrating to AddColumnSummariesToPostsAndTopics (20130201000828)
Migrating to AddPositionToPostActionType (20130201023409)
Migrating to AddLastVersionAtToPosts (20130203204338)
Migrating to AddIpAddressToUsers (20130204000159)
Migrating to AlterFacebookUserId (20130205021905)
Migrating to AddUserDeletedToPosts (20130207200019)
Migrating to RemoveReplyBelowPostNumberFromPosts (20130208220635)
Migrating to RemoveTopicResponseActions (20130213021450)
Migrating to AddNewTopicDurationMinutesToUsers (20130213203300)
Migrating to AddDescriptionToCategories (20130221215017)
Migrating to AddGithubUserInfo (20130226015336)
Migrating to AddClearedPinnedToTopicUsers (20130306180148)
Migrating to RemoveExtraSpamRecord (20130311181327)
Migrating to AddExternalLinksInNewTabAnDisableQuotingToUser (20130313004922)
Migrating to AddForegroundColorToCategories (20130314093434)
Migrating to EnableTrigramSupport (20130315180637)
Migrating to AddReplyToUserIdToPost (20130319122248)
Migrating to AddUserIndexesToPostsAndTopics (20130320012100)
Migrating to AddModeratorToUser (20130320024345)
Migrating to RemoveOneboxesFromDb (20130321154905)
Migrating to AddPercentRankToPosts (20130322183614)
Migrating to AddHotnessToCategory (20130326210101)
Migrating to UpdateSiteSettingsForHot (20130327185852)
Migrating to CreateHotTopics (20130328162943)
Migrating to AddScoreToTopics (20130328182433)
Migrating to AddValuesToHotTopics (20130402210723)
Migrating to CreateSiteContents (20130404143437)
Migrating to AddUserExtras (20130404232558)
Migrating to CreateAdminLogs (20130411205132)
Migrating to CorrectCountsOnPosts (20130412015502)
Migrating to CorrectCountsOnTopics (20130412020156)
Migrating to CreateGroups (20130416004607)
Migrating to GroupUsers (20130416004933)
Migrating to AddSubtypeToTopics (20130416170855)
Migrating to IncreaseDataLengthOnNotifications (20130419195746)
Migrating to AddRelatedPostIdToPostActions (20130422050626)
Migrating to AddSlugToTopics (20130424015746)
Migrating to AddUserIdToIncomingLinks (20130424055025)
Migrating to AllowNullsInIncomingLinks (20130426044914)
Migrating to AddIncomingIpCurrentUserIdToIncomingLinks (20130426052257)
Migrating to AddUnstarredAtToTopicUsers (20130428194335)
Migrating to AddSecurityToCategories (20130429000101)
Migrating to AddTopicAllowedGroups (20130430052751)
Migrating to FixTopicAllowedGroups (20130501105651)
Migrating to AddAutomaticToGroups (20130506020935)
Migrating to AddAutoCloseAtToTopics (20130506185042)
Migrating to AddUserCountToGroups (20130508040235)
Migrating to UpdateSequenceForGroups (20130509040248)
Migrating to AddUniqueNameToGroups (20130509041351)
Migrating to AddAutoCloseDaysToCategories (20130515193551)
Migrating to CreateCasUserInfos (20130521210140)
Migrating to RenameSearchTables (20130522193615)
Migrating to AddLikeScoreToPosts (20130527152648)
Migrating to AddRankToCategoryFeaturedTopics (20130528174147)
Migrating to AddStaffTookActionToPostActions (20130531210816)
Migrating to AddBlockedToUsers (20130603192412)
Migrating to AddAutoCloseStartedAtToTopics (20130606190601)
Migrating to AddReplyKeyToEmailLogs (20130610201033)
Migrating to CreatePostUploadJoinTable (20130612200846)
Migrating to DropPostsUploads (20130613211700)
Migrating to CreatePostUploads (20130613212230)
Migrating to AddDynamicFaviconPreferenceToUser (20130615064344)
Migrating to RemoveTopicIdFromUploads (20130615073305)
Migrating to AddShaToUploads (20130615075557)
Migrating to CreateOptimizedImages (20130616082327)
Migrating to RenameShaAndExtColumns (20130617014127)
Migrating to RenameShaColumn (20130617180009)
Migrating to AddPostIdToEmailLogs (20130617181804)
Migrating to AddDeferToPostActions (20130619063902)
Migrating to ChangeSupressToSuppress (20130621042855)
Migrating to AddUrlIndexToUploads (20130622110348)
Migrating to ChangeIpToInetInTopicLinkClicks (20130624203206)
Migrating to ChangeIpToInetInViews (20130625022454)
Migrating to RemoveAccessPassword (20130625170842)
Migrating to AddTitleToUsers (20130625201113)
Migrating to AddDeletedByIdToPosts (20130709184941)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (4.1ms)[0m  ALTER TABLE "posts" ADD COLUMN "deleted_by_id" integer
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "topics" ADD COLUMN "deleted_by_id" integer[0m
  [1m[35m (2.0ms)[0m  ALTER TABLE "invites" ADD COLUMN "deleted_by_id" integer
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "post_actions" RENAME COLUMN "deleted_by" TO "deleted_by_id"[0m
  [1m[35m (1.7ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130709184941')
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
Migrating to AddNukedUserToPosts (20130710201248)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (45.8ms)[0m  [1mALTER TABLE "posts" ADD COLUMN "nuked_user" boolean DEFAULT 'f'[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130710201248')
  [1m[36m (23.0ms)[0m  [1mCOMMIT[0m
Migrating to AddPermissionTypeToCategoryGroups (20130712041133)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (17.8ms)[0m  [1mALTER TABLE "category_groups" ADD COLUMN "permission_type" integer DEFAULT 1[0m
  [1m[35m (0.9ms)[0m  ALTER TABLE "categories" RENAME COLUMN "secure" TO "read_restricted"
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130712041133')[0m
  [1m[35m (0.5ms)[0m  COMMIT
Migrating to AddMissingIdColumns (20130712163509)
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (12.3ms)[0m  ALTER TABLE "category_featured_topics" ADD COLUMN "id" serial primary key
  [1m[36m (5.1ms)[0m  [1mALTER TABLE "topic_users" ADD COLUMN "id" serial primary key[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130712163509')
  [1m[36m (0.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (2.3ms)[0m  SELECT version FROM schema_migrations ORDER BY version
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mPostActionType Load (1.2ms)[0m  SELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 1 LIMIT 1
  [1m[36m (1.0ms)[0m  [1mSELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);[0m
  [1m[35mPostActionType Load (0.3ms)[0m  SELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 2 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);[0m
  [1m[35mPostActionType Load (0.2ms)[0m  SELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 3 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);[0m
  [1m[35mPostActionType Load (0.2ms)[0m  SELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 4 LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);[0m
  [1m[35mPostActionType Load (0.2ms)[0m  SELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 5 LIMIT 1
  [1m[36m (0.2ms)[0m  [1mSELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);[0m
  [1m[35mPostActionType Load (0.3ms)[0m  SELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 8 LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);[0m
  [1m[35mPostActionType Load (0.2ms)[0m  SELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 6 LIMIT 1
  [1m[36m (0.3ms)[0m  [1mSELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);[0m
  [1m[35mPostActionType Load (0.3ms)[0m  SELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 7 LIMIT 1
  [1m[36m (0.4ms)[0m  [1mSELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);[0m
  [1m[35m (0.3ms)[0m  COMMIT
Connecting to database specified by database.yml
  [1m[36m (0.5ms)[0m  [1mselect name, data_type, value from site_settings[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mPostActionType Load (0.6ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 1 LIMIT 1[0m
  [1m[35m (0.4ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.3ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 2 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 3 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 4 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 5 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 8 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 6 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36mPostActionType Load (0.2ms)[0m  [1mSELECT "post_action_types".* FROM "post_action_types" WHERE "post_action_types"."id" = 7 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT pg_catalog.setval('post_action_types_id_seq',(SELECT MAX("id") FROM "post_action_types") + 1);
  [1m[36m (1.7ms)[0m  [1mCOMMIT[0m
